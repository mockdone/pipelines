(this["webpackJsonppipelines-frontend"]=this["webpackJsonppipelines-frontend"]||[]).push([[0],{466:function(e){e.exports=JSON.parse('["[Demo] XGBoost - Training with confusion matrix","[Demo] TFX - Taxi tip prediction model trainer","[Demo] TFX - Iris classification pipeline","[Tutorial] Data passing in python components","[Tutorial] DSL - Control structures"]')},517:function(e,t,n){e.exports=n(988)},988:function(e,t,n){"use strict";n.r(t);var r,a=n(5),i=n(7),s=n(8),o=n(9),c=n(0),l=n.n(c),u=n(2),p=n.n(u),d=n(28),h=n(4),f=n(75),m="#fce8e6",v="#f7f7f7",b="#e8f0fe",g="#e6f4ea",E="#e6f4ea",y="#f1f3f4";function x(e){switch(e){case r.SUCCEEDED:case r.CACHED:case r.FAILED:case r.ERROR:case r.SKIPPED:case r.TERMINATED:return!0;case r.PENDING:case r.RUNNING:case r.TERMINATING:case r.UNKNOWN:default:return!1}}function w(e,t){switch(e=O(e,t)){case r.ERROR:case r.FAILED:return m;case r.PENDING:return v;case r.TERMINATING:case r.RUNNING:return b;case r.SUCCEEDED:return g;case r.CACHED:return E;case r.SKIPPED:case r.TERMINATED:return y;case r.UNKNOWN:default:return pt.verbose("Unknown node phase:",e),v}}function O(e,t){return e===r.FAILED&&"terminated"===t&&(e=r.TERMINATED),e}function k(e){return"Succeeded"!==e.phase?e.phase:function(e){var t,n=null===(t=e.outputs)||void 0===t?void 0:t.artifacts;if(!n||!e.id)return!1;return n.some((function(t){return t.s3&&!t.s3.key.includes(e.id)}))}(e)?r.CACHED:r.SUCCEEDED}!function(e){e.ERROR="Error",e.FAILED="Failed",e.PENDING="Pending",e.RUNNING="Running",e.SKIPPED="Skipped",e.SUCCEEDED="Succeeded",e.CACHED="Cached",e.TERMINATING="Terminating",e.TERMINATED="Terminated",e.UNKNOWN="Unknown"}(r||(r={}));var N=n(438),S=n.n(N),R=n(76),_=n.n(R),C=n(227),I=n.n(C),P=n(228),j=n.n(P),T=n(68),A=n.n(T),D=n(437),L=n.n(D),M=n(59),U=n.n(M),F=n(84),V=n(90),B=n.n(V),z=n(129),K=n.n(z),W=n(3),q="#eaf1fd",H="#f9ab00",G="#fff",X="#4285f4",J="#ddd",Y="#e0e0e0",$="#fbe9e7",Q="#d50000",Z="#000",ee="#f2f2f2",te="#5f6368",ne="#5f6368",re="#eee",ae="#80868b",ie="rgba(0, 0, 0, .88)",se="#e8e8e8",oe="#202124",ce="#34a853",le="#80868b",ue="#1a73e8",pe="#0b59dc",de="#f9f9e1",he="#ee8100",fe="#f3f4ff",me="#1a73e8",ve="#9aa0a6",be=40,ge=64,Ee=24,ye=32,xe=1,we=1,Oe=2,ke=2,Ne=2,Se=12,Re=14,_e=16,Ce=18,Ie=18,Pe=24,je=24,Te=function(e){return 24+4*e},Ae='"Source Code Pro", monospace',De='"Google Sans", "Helvetica Neue", sans-serif',Le='"Roboto", "Helvetica Neue", sans-serif',Me={primary:{dark:pe,main:ue},secondary:{main:"rgba(0, 0, 0, .38)"}},Ue=K()({overrides:{MuiButton:{flat:{fontSize:Re,fontWeight:"bold",minHeight:Ee,textTransform:"none"},flatPrimary:{border:"1px solid #ddd",cursor:"pointer",fontSize:Re,marginRight:10,textTransform:"none"},flatSecondary:{color:ue},root:{"&$disabled":{backgroundColor:"initial"},color:ue,marginRight:10,padding:"0 8px"}},MuiDialogActions:{root:{margin:15}},MuiDialogTitle:{root:{fontSize:Ce}},MuiFormControlLabel:{root:{marginLeft:0}},MuiFormLabel:{filled:{marginLeft:0,marginTop:0},root:{"&$focused":{marginLeft:0,marginTop:0},fontSize:Re,marginLeft:5,marginTop:-8}},MuiIconButton:{root:{padding:9}},MuiInput:{input:{padding:0},root:{padding:0}},MuiInputAdornment:{positionEnd:{paddingRight:0},root:{padding:0}},MuiTooltip:{tooltip:{backgroundColor:"#666",color:"#f1f1f1",fontSize:12}}},palette:Me,typography:{fontFamily:De,fontSize:Re+" !important",useNextVariants:!0}}),Fe=Object(W.stylesheet)({absoluteCenter:{left:"calc(50% - 15px)",position:"absolute",top:"calc(50% - 15px)"},busyOverlay:{backgroundColor:"#ffffffaa",bottom:0,left:0,position:"absolute",right:0,top:0,zIndex:Oe},buttonAction:{$nest:{"&:disabled":{backgroundColor:G},"&:hover":{backgroundColor:Ue.palette.primary.dark}},backgroundColor:Me.primary.main,color:"white"},ellipsis:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},flex:{alignItems:"center !important",display:"flex !important",flexShrink:0},flexColumn:{display:"flex !important",flexDirection:"column"},flexGrow:{display:"flex !important",flexGrow:1},header:{fontSize:Ce,fontWeight:"bold",paddingBottom:16,paddingTop:20},header2:{fontSize:_e,fontWeight:"bold",paddingBottom:16,paddingTop:20},infoIcon:{color:ae,height:16,width:16},link:{$nest:{"&:hover":{color:ue,textDecoration:"underline"}},color:oe,cursor:"pointer",textDecoration:"none"},noShrink:{flexShrink:0},page:{display:"flex",flexFlow:"column",flexGrow:1,overflow:"auto"},pageOverflowHidden:{display:"flex",flexFlow:"column",flexGrow:1,overflowX:"auto",overflowY:"hidden"},prewrap:{whiteSpace:"pre-wrap"},scrollContainer:{background:"linear-gradient(white 30%, rgba(255,255,255,0)),\n       linear-gradient(rgba(255,255,255,0), white 70%) 0 100%,\n       radial-gradient(farthest-corner at 50% 0, rgba(0,0,0,.2), rgba(0,0,0,0)),\n       radial-gradient(farthest-corner at 50% 100%, rgba(0,0,0,.2), rgba(0,0,0,0)) 0 100%",backgroundAttachment:"local, local, scroll, scroll",backgroundColor:"white",backgroundRepeat:"no-repeat",backgroundSize:"100% 40px, 100% 40px, 100% 2px, 100% 2px",overflow:"auto",position:"relative"},textField:{display:"flex",height:40,marginBottom:20,marginTop:15},unstyled:{color:"inherit",outline:"none",textDecoration:"none"}});function Ve(e,t){return Object(W.style)(function(e,t){e=e||24;var n={};return(t=t||"blrt").indexOf("b")>-1&&(n.paddingBottom=e),t.indexOf("l")>-1&&(n.paddingLeft=e),t.indexOf("r")>-1&&(n.paddingRight=e),t.indexOf("t")>-1&&(n.paddingTop=e),n}(e,t))}var Be,ze=function(e){var t=e.height,n=e.maxWidth,r=e.variant,a=e.width,i=Object(F.a)(e,["height","maxWidth","variant","width"]);return(c.createElement(B.a,Object.assign({variant:r,className:Fe.textField,spellCheck:!1,style:{height:e.multiline?"auto":t||40,maxWidth:n||600,width:a||"100%"}},i),e.children))},Ke=n(37),We=n.n(Ke),qe=n(55),He=n.n(qe),Ge=function(e){return c.createElement("span",{style:(t=e.orientation||"horizontal",n=e.units||10,"horizontal"===t?{display:"inline-block",minWidth:n,width:n}:{display:"block",flexShrink:0,height:n,minHeight:n})});var t,n},Xe=n(130),Je=n.n(Xe),Ye=n(20),$e=n.n(Ye),Qe=n(69),Ze=n(12),et=n(19);"http://localhost".replace(/\/+$/,""),Error;!function(e){e[e.UNKNOWN="UNKNOWN"]="UNKNOWN",e[e.EQUALS="EQUALS"]="EQUALS",e[e.NOTEQUALS="NOT_EQUALS"]="NOTEQUALS",e[e.GREATERTHAN="GREATER_THAN"]="GREATERTHAN",e[e.GREATERTHANEQUALS="GREATER_THAN_EQUALS"]="GREATERTHANEQUALS",e[e.LESSTHAN="LESS_THAN"]="LESSTHAN",e[e.LESSTHANEQUALS="LESS_THAN_EQUALS"]="LESSTHANEQUALS",e[e.IN="IN"]="IN",e[e.ISSUBSTRING="IS_SUBSTRING"]="ISSUBSTRING"}(Be||(Be={}));var tt=n(134),nt=n(436),rt=n.n(nt),at=Object(W.stylesheet)({cell:{$nest:{"&:not(:nth-child(2))":{color:ne}},alignSelf:"center",borderBottom:"initial",color:Z,fontFamily:Le,fontSize:Re,letterSpacing:.25,marginRight:20,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},icon:{color:H,height:18,paddingRight:4,verticalAlign:"sub",width:18},row:{$nest:{"&:hover":{backgroundColor:"#f3f3f3"}},borderBottom:"1px solid #ddd",display:"flex",flexShrink:0,height:40,outline:"none"}});var it,st=function(e){var t=e.row,n=e.columns,r=function(e){var t=e.reduce((function(e,t){return e+(t.flex||1)}),0);return e.map((function(e){return(e.flex||1)/t*100}))}(n);return c.createElement(c.Fragment,null,t.otherFields.map((function(e,a){return c.createElement("div",{key:a,style:{width:r[a]+"%"},className:at.cell},0===a&&t.error&&c.createElement($e.a,{title:t.error},c.createElement(rt.a,{className:at.icon})),n[a].customRenderer?n[a].customRenderer({value:e,id:t.id}):e)})))};!function(e){e[e.COLLAPSED=0]="COLLAPSED",e[e.EXPANDED=1]="EXPANDED",e[e.NONE=2]="NONE"}(it||(it={}));var ot=Object(W.stylesheet)({cell:{$nest:{"&:not(:nth-child(2))":{color:ne}},alignSelf:"center",borderBottom:"initial",color:Z,fontFamily:Le,fontSize:Re,letterSpacing:.25,marginRight:20,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},columnName:{color:"#1F1F1F",fontSize:Se,fontWeight:"bold",letterSpacing:.25,marginRight:20,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},emptyMessage:{padding:20,textAlign:"center"},expandButton:{marginRight:10,padding:3,transition:"transform 0.3s"},expandButtonExpanded:{transform:"rotate(90deg)"},expandButtonPlaceholder:{width:54},expandableContainer:{transition:"margin 0.2s"},expandedContainer:{borderRadius:10,boxShadow:"0 1px 2px 0 rgba(60,64,67,0.30), 0 1px 3px 1px rgba(60,64,67,0.15)",margin:"16px 2px"},expandedRow:{borderBottom:"1px solid transparent !important",boxSizing:"border-box",height:"40px !important"},filterBorderRadius:{borderRadius:8},filterBox:{margin:"16px 0"},footer:{borderBottom:"1px solid "+Y,fontFamily:Le,height:40,textAlign:"right"},header:{borderBottom:"solid 1px "+Y,color:oe,display:"flex",flex:"0 0 40px",lineHeight:"40px"},noLeftPadding:{paddingLeft:0},noMargin:{margin:0},row:{$nest:{"&:hover":{backgroundColor:"#f3f3f3"}},borderBottom:"1px solid #ddd",display:"flex",flexShrink:0,height:40,outline:"none"},rowsPerPage:{color:oe,height:ye,minWidth:be},selected:{backgroundColor:q},selectionToggle:{marginRight:12,overflow:"initial"},verticalAlignInitial:{verticalAlign:"initial"}}),ct=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._isMounted=!0,r._debouncedFilterRequest=Object(f.debounce)((function(e){return r._requestFilter(e)}),300),r.handleFilterChange=function(e){var t=e.target.value;r.setStateSafe({filterString:t},Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._debouncedFilterRequest(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))))},r.state={currentPage:0,filterString:"",filterStringEncoded:"",isBusy:!1,maxPageIndex:Number.MAX_SAFE_INTEGER,pageSize:10,sortBy:e.initialSortColumn||e.columns.length&&e.columns[0].sortKey||"",sortOrder:e.initialSortOrder||"desc",tokenList:[""]},r}return Object(i.a)(n,[{key:"handleSelectAllClick",value:function(e){if(!0!==this.props.disableSelection){var t=e.target.checked?this.props.rows.map((function(e){return e.id})):[];this.props.updateSelection&&this.props.updateSelection(t)}}},{key:"handleClick",value:function(e,t){if(!0!==this.props.disableSelection){var n=[];if(this.props.useRadioButtons)n=[t];else{var r=this.props.selectedIds||[],a=r.indexOf(t);n=-1===a?r.concat(t):r.slice(0,a).concat(r.slice(a+1))}this.props.updateSelection&&this.props.updateSelection(n),e.stopPropagation()}}},{key:"isSelected",value:function(e){return!!this.props.selectedIds&&-1!==this.props.selectedIds.indexOf(e)}},{key:"componentDidMount",value:function(){this._pageChanged(0)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this._debouncedFilterRequest.cancel()}},{key:"render",value:function(){var e=this,t=this.state,n=t.filterString,r=t.pageSize,a=t.sortBy,i=t.sortOrder,s=(this.props.selectedIds||[]).length,o=this.props.columns.reduce((function(e,t){return e+(t.flex||1)}),0),l=this.props.columns.map((function(e){return(e.flex||1)/o*100}));return c.createElement("div",{className:Fe.pageOverflowHidden},!this.props.noFilterBox&&c.createElement("div",null,c.createElement(ze,{id:"tableFilterBox",label:this.props.filterLabel||"Filter",height:48,maxWidth:"100%",className:ot.filterBox,InputLabelProps:{classes:{root:ot.noMargin}},onChange:this.handleFilterChange,value:n,variant:"outlined",InputProps:{classes:{notchedOutline:ot.filterBorderRadius,root:ot.noLeftPadding},startAdornment:c.createElement(tt.b,{position:"end"},c.createElement(L.a,{style:{color:ae,paddingRight:16}}))}})),c.createElement("div",{className:Object(W.classes)(ot.header,this.props.disableSelection&&Ve(20,"l"))},lt({disableSelection:this.props.disableSelection,indeterminate:!!s&&s<this.props.rows.length,isSelected:!!s&&s===this.props.rows.length,onSelectAll:this.handleSelectAllClick.bind(this),showExpandButton:!!this.props.getExpandComponent,useRadioButtons:this.props.useRadioButtons}),this.props.columns.map((function(t,n){var r=!!e.props.columns[n].sortKey,s=a===e.props.columns[n].sortKey;return c.createElement("div",{key:n,style:{width:l[n]+"%"},className:ot.columnName,title:t.label},!0===e.props.disableSorting&&t.label,!e.props.disableSorting&&c.createElement($e.a,{title:r?"Sort":"Cannot sort by this column",enterDelay:300},c.createElement(Je.a,{active:s,className:Fe.ellipsis,direction:r?i:void 0,onClick:function(){return e._requestSort(e.props.columns[n].sortKey)}},t.label)))}))),c.createElement("div",{className:Fe.scrollContainer,style:{minHeight:60}},this.state.isBusy&&c.createElement(c.Fragment,null,c.createElement("div",{className:Fe.busyOverlay}),c.createElement(A.a,{size:25,className:Fe.absoluteCenter,style:{zIndex:Oe}})),0===this.props.rows.length&&!!this.props.emptyMessage&&!this.state.isBusy&&c.createElement("div",{className:ot.emptyMessage},this.props.emptyMessage),this.props.rows.map((function(t,n){if(t.otherFields.length!==e.props.columns.length)return pt.error("Rows must have the same number of cells defined in columns"),null;var r=e.isSelected(t.id);return(c.createElement("div",{className:Object(W.classes)(ot.expandableContainer,t.expandState===it.EXPANDED&&ot.expandedContainer),key:n},c.createElement("div",{role:"checkbox","aria-checked":r,tabIndex:-1,className:Object(W.classes)("tableRow",ot.row,!0===e.props.disableSelection&&Ve(20,"l"),r&&ot.selected,t.expandState===it.EXPANDED&&ot.expandedRow),onClick:function(n){return e.handleClick(n,t.id)}},ut({disableSelection:e.props.disableSelection,expandState:t.expandState,isSelected:r,onExpand:function(t){return e._expandButtonToggled(t,n)},showExpandButton:!!e.props.getExpandComponent,useRadioButtons:e.props.useRadioButtons}),c.createElement(st,{row:t,columns:e.props.columns})),t.expandState===it.EXPANDED&&e.props.getExpandComponent&&c.createElement("div",null,e.props.getExpandComponent(n))))}))),!this.props.disablePaging&&c.createElement("div",{className:ot.footer},c.createElement("span",{className:Ve(10,"r")},"Rows per page:"),c.createElement(B.a,{select:!0,variant:"standard",className:ot.rowsPerPage,classes:{root:ot.verticalAlignInitial},InputProps:{disableUnderline:!0},onChange:this._requestRowsPerPage.bind(this),value:r},[10,20,50,100].map((function(e,t){return c.createElement(We.a,{key:t,value:e},e)}))),c.createElement(U.a,{onClick:function(){return e._pageChanged(-1)},disabled:!this.state.currentPage},c.createElement(I.a,null)),c.createElement(U.a,{onClick:function(){return e._pageChanged(1)},disabled:this.state.currentPage>=this.state.maxPageIndex},c.createElement(j.a,null))))}},{key:"reload",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.assign({filter:this.state.filterStringEncoded,orderAscending:"asc"===this.state.sortOrder,pageSize:this.state.pageSize,pageToken:this.state.tokenList[this.state.currentPage],sortBy:this.state.sortBy},t),r="",e.prev=2,this.setStateSafe({filterStringEncoded:n.filter,isBusy:!0,pageSize:n.pageSize,sortBy:n.sortBy,sortOrder:n.orderAscending?"asc":"desc"}),n.sortBy&&!n.orderAscending&&(n.sortBy+=" desc"),e.next=7,this.props.reload(n);case 7:r=e.sent;case 8:return e.prev=8,this.setStateSafe({isBusy:!1}),e.finish(8);case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this,[[2,,8,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_requestFilter",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?this._createAndEncodeFilter(t):"",this.setStateSafe({filterStringEncoded:n}),e.t0=this,e.next=5,this.reload({filter:n});case 5:e.t1=e.sent,e.t0._resetToFirstPage.call(e.t0,e.t1);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createAndEncodeFilter",value:function(e){var t={predicates:[{key:"name",op:Be.ISSUBSTRING,string_value:e}]};return encodeURIComponent(JSON.stringify(t))}},{key:"setStateSafe",value:function(e,t){this._isMounted&&this.setState(e,t)}},{key:"_requestSort",value:function(e){var t=this;if(e){var n=this.state.sortBy===e&&"asc"===this.state.sortOrder?"desc":"asc";this.setStateSafe({sortOrder:n,sortBy:e},Object(h.a)(p.a.mark((function r(){return p.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t,r.next=3,t.reload({pageToken:"",orderAscending:"asc"===n,sortBy:e});case 3:r.t1=r.sent,r.t0._resetToFirstPage.call(r.t0,r.t1);case 5:case"end":return r.stop()}}),r)}))))}}},{key:"_pageChanged",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.currentPage+t,r=this.state.maxPageIndex,n=Math.max(0,n),n=Math.min(this.state.maxPageIndex,n),e.next=6,this.reload({pageToken:this.state.tokenList[n]});case 6:(a=e.sent)?n+1===this.state.tokenList.length&&this.state.tokenList.push(a):r=n,this.setStateSafe({currentPage:n,maxPageIndex:r});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_requestRowsPerPage",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,e.t0=this,e.next=4,this.reload({pageSize:n,pageToken:""});case 4:e.t1=e.sent,e.t0._resetToFirstPage.call(e.t0,e.t1);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_resetToFirstPage",value:function(e){var t=Number.MAX_SAFE_INTEGER,n=[""];e?n.push(e):t=0,this.setStateSafe({currentPage:0,maxPageIndex:t,tokenList:n})}},{key:"_expandButtonToggled",value:function(e,t){e.stopPropagation(),this.props.toggleExpansion&&this.props.toggleExpansion(t)}}]),n}(c.Component),lt=function(e){var t=e.disableSelection,n=e.indeterminate,r=e.isSelected,a=e.onSelectAll,i=e.showExpandButton,s=e.useRadioButtons;return!0!==t||i?c.createElement("div",{className:Object(W.classes)(ot.columnName,ot.cell,ot.selectionToggle)},!0!==t&&!0!==s&&c.createElement(_.a,{indeterminate:n,color:"primary",checked:r,onChange:a}),!0!==t&&s&&c.createElement(Ge,{orientation:"horizontal",units:42}),i&&c.createElement(Ge,{orientation:"horizontal",units:40})):null},ut=function(e){var t=e.disableSelection,n=e.expandState,r=e.isSelected,a=e.onExpand,i=e.showExpandButton,s=e.useRadioButtons;return(c.createElement(c.Fragment,null,(!0!==t||i)&&n!==it.NONE&&c.createElement("div",{className:Object(W.classes)(ot.cell,ot.selectionToggle)},!0!==t&&!0!==s&&c.createElement(_.a,{color:"primary",checked:r}),!0!==t&&s&&c.createElement(He.a,{color:"primary",checked:r}),i&&c.createElement(U.a,{className:Object(W.classes)(ot.expandButton,n===it.EXPANDED&&ot.expandButtonExpanded),onClick:a,"aria-label":"Expand"},c.createElement(S.a,null))),n===it.NONE&&c.createElement("div",{className:ot.expandButtonPlaceholder})))},pt={error:function(){var e;(e=console).error.apply(e,arguments)},warn:function(){var e;(e=console).warn.apply(e,arguments)},verbose:function(){var e;(e=console).log.apply(e,arguments)}};function dt(e,t){return e.message&&"string"===typeof e.message&&(e.message=t+": "+e.message),e}function ht(e){return"string"===typeof e?new Date(e).toLocaleString():e?e.toLocaleString():"-"}function ft(e){return mt.apply(this,arguments)}function mt(){return(mt=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Error)){e.next=2;break}return e.abrupt("return",t.message);case 2:if(!(t&&t.text&&Object(f.isFunction)(t.text))){e.next=6;break}return e.next=5,t.text();case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",JSON.stringify(t)||"");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e,t){var n=t.getTime()-e.getTime(),r=n<0?"-":"";n<0&&(n*=-1);var a=("0"+Math.floor(n/1e3%60).toString()).slice(-2),i=("0"+Math.floor(n/6e4%60).toString()).slice(-2),s=Math.floor(n/36e5).toString();return"".concat(r).concat(s,":").concat(i,":").concat(a)}function bt(e){return e&&e.status&&e.status.startedAt&&e.status.finishedAt?vt(new Date(e.status.startedAt),new Date(e.status.finishedAt)):"-"}function gt(e){return 1===(Array.isArray(e)?e.length:e)?"":"s"}function Et(e){return"Error: ".concat(e.message,".").concat(e.code?" Code: ".concat(e.code):"")}function yt(e){return function(t){if(!e.filter)return!0;var n=decodeURIComponent(e.filter);try{var r=JSON.parse(n);if(!r.predicates||0===r.predicates.length)return!0;var a=""+(r.predicates[0].int_value||r.predicates[0].long_value||r.predicates[0].string_value);return t.otherFields.join("").toLowerCase().indexOf(a.toLowerCase())>-1}catch(i){return pt.error("Error parsing request filter!",i),!0}}}function xt(e,t){return function(n,r){if(!e.sortBy)return-1;var a=e.sortBy.endsWith(" desc")?e.sortBy.substring(0,e.sortBy.length-" desc".length):e.sortBy,i=t.findIndex((function(e){return a===e.sortKey})),s=(n.otherFields[i]||"")<(r.otherFields[i]||"");return e.orderAscending?s?-1:1:s?1:-1}}function wt(e){var t=e.reduce((function(e,t){var n=t.otherFields[0],r=e.get(n);return r?r.push(t):e.set(n,[t]),e}),new Map),n={collapsedRows:[],expandedRows:new Map};return Array.from(t.entries()).forEach((function(e,t){var r=e[1];1===r.length&&(r[0].expandState=it.NONE),n.collapsedRows.push(r[0]);var a=r.slice(1);a.forEach((function(e){return e.otherFields[0]=""})),n.expandedRows.set(t,a)})),n}function Ot(e,t){return function(n){var r=e.get(n)||[];return(c.createElement("div",{className:Ve(65,"l")},r.map((function(e,n){return c.createElement("div",{className:Object(W.classes)("tableRow",at.row),key:n},c.createElement(st,{row:e,columns:t}))}))))}}function kt(e,t,n,r){return"artifacts/get".concat(Rt({source:e,bucket:t,key:n,peek:r}))}var Nt,St;function Rt(e){var t=Object.entries(e).filter((function(e){return null!=e[1]})).map((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];return"".concat(n,"=").concat(encodeURIComponent(r))})).join("&");return t?"?".concat(t):""}var _t=l.a.createContext(void 0),Ct=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={namespace:Nt},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;St=function(t){return e.setState({namespace:t})}}},{key:"render",value:function(){return l.a.createElement(_t.Provider,Object.assign({value:this.state.namespace},this.props))}}]),n}(l.a.Component);function It(){var e=Object(c.useContext)(_t),t=function(e){var t=Object(c.useRef)(e);return Object(c.useLayoutEffect)((function(){t.current=e})),t.current}(e);return!!t&&t!==e}Object(W.cssRaw)("\n@import url(https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700|Google+Sans:400,700);\n/* Reset */\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed,\nfigure, figcaption, footer, header, hgroup,\nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n  border: 0;\n  /* Consider adding flex-shrink: 0; */\n  font-size: 100%;\n  margin: 0;\n  padding: 0;\n  vertical-align: baseline;\n}\n\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure,\nfooter, header, hgroup, menu, nav, section {\n  display: block;\n}\n\nol, ul {\n  list-style: none;\n}\n\nblockquote, q {\n  quotes: none;\n}\n\nblockquote:before, blockquote:after,\nq:before, q:after {\n  content: '';\n  content: none;\n}\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\n");var Pt,jt=n(39),Tt=n(308),At=n.n(Tt),Dt=n(41),Lt=n(46),Mt=n(10),Ut=n(165),Ft=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._isMounted=!0,r.showPageError=function(){var e=Object(h.a)(p.a.mark((function e(t,n,a,i){var s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft(n);case 2:if(s=e.sent,r._isMounted){e.next=5;break}return e.abrupt("return");case 5:r.props.updateBanner({additionalInfo:s||void 0,message:t+(s?" Click Details for more information.":""),mode:a||"error",refresh:i||r.refresh.bind(Object(Lt.a)(r))});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),r.props.updateToolbar(r.getInitialToolbarState()),r}return Object(i.a)(n,[{key:"componentWillUnmount",value:function(){this.clearBanner(),this._isMounted=!1}},{key:"componentDidMount",value:function(){this.clearBanner()}},{key:"clearBanner",value:function(){this._isMounted&&this.props.updateBanner({})}},{key:"showErrorDialog",value:function(e,t){this._isMounted&&this.props.updateDialog({buttons:[{text:"Dismiss"}],content:t,title:e})}},{key:"setStateSafe",value:function(e,t){this._isMounted&&this.setState(e,t)}}]),n}(c.Component),Vt=function(e){var t,n=e.artifactUri;if(n){if(n.startsWith("gs:")){var r=function(e){if(e.startsWith("gs://"))return"https://console.cloud.google.com/storage/browser/"+e.substring("gs://".length)}(n);r&&(t=r)}n.startsWith("s3:")?t=function(e){if(e.startsWith("s3://")){var t=e.match(/^s3:\/\/([^\/]+)\/(.+)$/);if(null!=t)return kt("s3",t[1],t[2])}}(n):n.startsWith("http:")||n.startsWith("https:")?t=n:n.startsWith("minio:")&&(t=function(e,t){if(e.startsWith("minio://")){var n=e.match(/^minio:\/\/([^\/]+)\/(.+)$/);if(null!=n)return kt("minio",n[1],n[2],t)}}(n))}return t?c.createElement("a",{href:t,target:"_blank",rel:"noreferrer noopener"},n):c.createElement(c.Fragment,null,n)},Bt=[Mt.ArtifactProperties,Mt.ArtifactCustomProperties],zt=["RUN_ID","PIPELINE_NAME","WORKSPACE"],Kt=["NAME"],Wt=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).tableRef=c.createRef(),r.api=Mt.Api.getInstance(),r.artifactTypesMap=void 0,r.nameCustomRenderer=function(e){return c.createElement(Ut.a,{onClick:function(e){return e.stopPropagation()},className:Fe.link,to:wl.artifactDetails(Number(e.id))},e.value)},r.uriCustomRenderer=function(e){var t=e.value;return(c.createElement(Vt,{artifactUri:t}))},r.state={artifacts:[],columns:[{customRenderer:r.nameCustomRenderer,flex:2,label:"Pipeline/Workspace",sortKey:"pipelineName"},{customRenderer:r.nameCustomRenderer,flex:1,label:"\u540d\u79f0",sortKey:"name"},{label:"ID",flex:1,sortKey:"id"},{label:"\u7c7b\u578b",flex:2,sortKey:"type"},{label:"\u5730\u5740",flex:2,sortKey:"uri",customRenderer:r.uriCustomRenderer},{label:"\u521b\u5efa\u65f6\u95f4",flex:1,sortKey:"created_at"}],expandedRows:new Map,rows:[]},r.reload=r.reload.bind(Object(Lt.a)(r)),r.toggleRowExpand=r.toggleRowExpand.bind(Object(Lt.a)(r)),r.getExpandedArtifactsRow=r.getExpandedArtifactsRow.bind(Object(Lt.a)(r)),r}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){return{actions:{},breadcrumbs:[],pageTitle:"\u4ea7\u54c1"}}},{key:"render",value:function(){var e=this.state,t=e.rows,n=e.columns;return(c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"))},c.createElement(ct,{ref:this.tableRef,columns:n,rows:t,disablePaging:!0,disableSelection:!0,reload:this.reload,initialSortColumn:"pipelineName",initialSortOrder:"asc",getExpandComponent:this.getExpandedArtifactsRow,toggleExpansion:this.toggleRowExpand,emptyMessage:"\u65e0\u6570\u636e."})))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tableRef.current){e.next=3;break}return e.next=3,this.tableRef.current.reload();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reload",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.artifactTypesMap&&this.artifactTypesMap.size){e.next=4;break}return e.next=3,Object(Mt.getArtifactTypes)(this.api.metadataStoreService,this.showPageError.bind(this));case 3:this.artifactTypesMap=e.sent;case 4:if(this.state.artifacts.length){e.next=13;break}return e.next=7,this.getArtifacts();case 7:return n=e.sent,this.clearBanner(),e.next=11,this.getRowsFromArtifacts(t,n);case 11:(r=e.sent)&&this.setState({artifacts:n,expandedRows:r.expandedRows,rows:r.collapsedRows});case 13:return e.abrupt("return","");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArtifacts",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.metadataStoreService.getArtifacts(new Mt.GetArtifactsRequest);case 3:return t=e.sent,e.abrupt("return",t.getArtifactsList());case 7:e.prev=7,e.t0=e.catch(0),5!==e.t0.code&&this.showPageError(Et(e.t0));case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getRowsFromArtifacts",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r,a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(n.map(function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getId()){e.next=3;break}return e.abrupt("return",{artifact:t});case 3:return e.t0=t,e.next=6,Object(Mt.getArtifactCreationTime)(n,a.api.metadataStoreService);case 6:return e.t1=e.sent,e.abrupt("return",{artifact:e.t0,creationTime:e.t1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return r=e.sent,e.abrupt("return",wt(r.map((function(e){var t=e.artifact,n=e.creationTime,r=t.getTypeId(),i=a.artifactTypesMap.get(r),s=i?i.getName():t.getTypeId();return{id:"".concat(t.getId()),otherFields:[Object(Mt.getResourcePropertyViaFallBack)(t,Bt,zt),Object(Mt.getResourcePropertyViaFallBack)(t,Bt,Kt),t.getId(),s,t.getUri(),n||""]}})).filter(yt(t)).sort(xt(t,this.state.columns))));case 7:e.prev=7,e.t0=e.catch(0),e.t0.message?this.showPageError(e.t0.message,e.t0):this.showPageError("Unknown error",e.t0);case 10:return e.abrupt("return");case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"toggleRowExpand",value:function(e){var t=this.state.rows;t[e]&&(t[e].expandState=t[e].expandState===it.EXPANDED?it.COLLAPSED:it.EXPANDED,this.setState({rows:t}))}},{key:"getExpandedArtifactsRow",value:function(e){return Ot(this.state.expandedRows,this.state.columns)(e)}}]),n}(Ft),qt=n(16),Ht=n(434),Gt=n(216),Xt=n(14),Jt=n.n(Xt),Yt=Object(W.stylesheet)({active:{color:"".concat(ue," !important"),fontWeight:"bold"},button:{$nest:{"&:hover":{backgroundColor:"initial"}},borderRadius:"4px 4px 0 0",color:ne,fontSize:Re,height:33,minHeight:0,padding:"0 15px",textTransform:"none"},indicator:{backgroundColor:"initial",borderBottom:"3px solid "+ue,borderLeft:"3px solid transparent",borderRight:"3px solid transparent",bottom:0,left:35,position:"absolute",transition:"width 0.3s, left 0.3s",width:50},tabs:{borderBottom:"1px solid "+se,height:33,position:"relative",whiteSpace:"nowrap"}}),$t=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i)))._rootRef=c.createRef(),e._indicatorRef=c.createRef(),e._tabRefs=e.props.tabs.map((function(e){return c.createRef()})),e._timeoutHandle=0,e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this._getSelectedIndex(),n=this.props.onSwitch||function(){return null};return c.createElement("div",{className:Yt.tabs,ref:this._rootRef},c.createElement("div",{className:Yt.indicator,ref:this._indicatorRef}),c.createElement(Ge,{units:20}),this.props.tabs.map((function(r,a){return c.createElement(Jt.a,{className:Object(W.classes)(Yt.button,a===t?Yt.active:""),key:a,onClick:function(){a!==t&&n(a)}},c.createElement("span",{ref:e._tabRefs[a]},r))})))}},{key:"componentDidMount",value:function(){this._timeoutHandle=setTimeout(this._updateIndicator.bind(this))}},{key:"componentDidUpdate",value:function(){this._timeoutHandle=setTimeout(this._updateIndicator.bind(this))}},{key:"componentWillUnmount",value:function(){clearTimeout(this._timeoutHandle)}},{key:"_getSelectedIndex",value:function(){var e=this.props.selectedTab;return void 0===this.props.tabs[e]&&(pt.error("Out of bound index passed for selected tab"),e=0),e}},{key:"_updateIndicator",value:function(){var e=this._getSelectedIndex(),t=this._tabRefs[e].current;if(t){var n=t.getBoundingClientRect().left-this._rootRef.current.getBoundingClientRect().left,r=this._indicatorRef.current;r.style.left=n-5+"px",r.style.width=t.getBoundingClientRect().width+5+"px",r.style.display="block"}}}]),n}(c.Component),Qt=Object(W.stylesheet)({field:{flexBasis:"300px",marginBottom:"32px"},resourceInfo:{display:"flex",flexDirection:"row",flexWrap:"wrap"},term:{color:te,fontSize:"12px",letterSpacing:"0.2px",lineHeight:"16px"},value:{color:ie,fontSize:"14px",letterSpacing:"0.2px",lineHeight:"20px"}});!function(e){e.ARTIFACT="ARTIFACT",e.EXECUTION="EXECUTION"}(Pt||(Pt={}));var Zt=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.resource,n=t.getPropertiesMap(),r=t.getCustomPropertiesMap();return c.createElement("section",null,c.createElement("h1",{className:Fe.header},"Type: ",this.props.typeName),e.props.resourceType===Pt.ARTIFACT?c.createElement(c.Fragment,null,c.createElement("dt",{className:Qt.term},"URI"),c.createElement("dd",{className:Qt.value},c.createElement(Vt,{artifactUri:e.props.resource.getUri()}))):null,c.createElement("h2",{className:Fe.header2},"Properties"),c.createElement("dl",{className:Qt.resourceInfo},n.getEntryList().filter((function(e){return"__ALL_META__"!==e[0]})).map((function(e){return c.createElement("div",{className:Qt.field,key:e[0]},c.createElement("dt",{className:Qt.term},e[0]),c.createElement("dd",{className:Qt.value},n&&en(Object(Mt.getMetadataValue)(n.get(e[0])))))}))),c.createElement("h2",{className:Fe.header2},"Custom Properties"),c.createElement("dl",{className:Qt.resourceInfo},r.getEntryList().map((function(e){return c.createElement("div",{className:Qt.field,key:e[0]},c.createElement("dt",{className:Qt.term},e[0]),c.createElement("dd",{className:Qt.value},r&&en(Object(Mt.getMetadataValue)(r.get(e[0])))))}))))}}]),n}(c.Component);function en(e){if("number"===typeof e)return e;try{var t=JSON.parse(e);return(c.createElement("pre",null,JSON.stringify(t,null,2)))}catch(n){return e}}var tn,nn,rn=n(111);!function(e){e[e.OVERVIEW=0]="OVERVIEW",e[e.LINEAGE_EXPLORER=1]="LINEAGE_EXPLORER"}(nn||(nn={}));var an,sn=(tn={},Object(qt.a)(tn,nn.OVERVIEW,{name:"\u67e5\u770b"}),Object(qt.a)(tn,nn.LINEAGE_EXPLORER,{name:"Lineage Explorer"}),tn),on=[nn.OVERVIEW,nn.LINEAGE_EXPLORER].map((function(e){return sn[e].name})),cn=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={},e.api=Mt.Api.getInstance(),e.load=Object(h.a)(p.a.mark((function t(){var n,r,a,i,s,o,c,l,u;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new Mt.GetArtifactsByIDRequest).setArtifactIdsList([Number(e.id)]),t.prev=2,t.next=5,e.api.metadataStoreService.getArtifactsByID(n);case 5:if(0!==(r=t.sent).getArtifactsList().length){t.next=9;break}return e.showPageError("No artifact identified by id: ".concat(e.id)),t.abrupt("return");case 9:if(!(r.getArtifactsList().length>1)){t.next=12;break}return e.showPageError("Found multiple artifacts with ID: ".concat(e.id)),t.abrupt("return");case 12:return a=r.getArtifactsList()[0],(i=new rn.GetArtifactTypesByIDRequest).setTypeIdsList([a.getTypeId()]),t.next=17,e.api.metadataStoreService.getArtifactTypesByID(i);case 17:s=t.sent,o=s.getArtifactTypesList()[0]||void 0,c=Object(Mt.getResourceProperty)(a,Mt.ArtifactProperties.NAME)||Object(Mt.getResourceProperty)(a,Mt.ArtifactCustomProperties.NAME,!0),l=c?c.toString():"",(u=Object(Mt.getResourceProperty)(a,Mt.ArtifactProperties.VERSION))&&(l+=" (version: ".concat(u,")")),e.props.updateToolbar({pageTitle:l}),e.setState({artifact:a,artifactType:o}),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(2),e.showPageError(Et(t.t0));case 30:case"end":return t.stop()}}),t,null,[[2,27]])}))),e.switchTab=function(t){switch(t){case nn.LINEAGE_EXPLORER:return e.props.history.push("".concat(e.props.match.url,"/").concat("lineage"));case nn.OVERVIEW:return e.props.history.push(e.props.match.url);default:pt.error("Unknown selected tab ".concat(t,"."))}},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.artifact?c.createElement("div",{className:Object(W.classes)(Fe.page)},c.createElement(Ht.a,null,c.createElement(Gt.a,{path:this.props.match.path,exact:!0},c.createElement(c.Fragment,null,c.createElement("div",{className:Object(W.classes)(Ve(20,"t"))},c.createElement($t,{tabs:on,selectedTab:nn.OVERVIEW,onSwitch:this.switchTab})),c.createElement("div",{className:Object(W.classes)(Ve(20,"lr"))},c.createElement(Zt,{resourceType:Pt.ARTIFACT,typeName:this.properTypeName,resource:this.state.artifact})))),c.createElement(Gt.a,{path:"".concat(this.props.match.path,"/").concat("lineage"),exact:!0},c.createElement(c.Fragment,null,c.createElement("div",{className:Object(W.classes)(Ve(20,"t"))},c.createElement($t,{tabs:on,selectedTab:nn.LINEAGE_EXPLORER,onSwitch:this.switchTab})),c.createElement(Mt.LineageView,{target:this.state.artifact,buildResourceDetailsPageRoute:n.buildResourceDetailsPageRoute}))))):c.createElement("div",{className:Fe.page},c.createElement(tt.a,{className:Fe.absoluteCenter}))}},{key:"getInitialToolbarState",value:function(){return{actions:{},breadcrumbs:[{displayName:"Artifacts",href:xl.ARTIFACTS}],pageTitle:"Artifact #".concat(this.id," details")}}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fullTypeName",get:function(){var e;return(null===(e=this.state.artifactType)||void 0===e?void 0:e.getName())||""}},{key:"properTypeName",get:function(){var e=this.fullTypeName.split("/");return e.length?Object(Mt.titleCase)(e[e.length-1]):""}},{key:"id",get:function(){return Number(this.props.match.params[gl.ID])}}],[{key:"buildResourceDetailsPageRoute",value:function(e,t){return"function"===typeof e.getUri?wl.artifactDetails(e.getId()):wl.executionDetails(e.getId())}}]),n}(Ft),ln=function(e){return c.createElement(cn,Object.assign({},e,{key:e.match.params[gl.ID]}))},un=n(40),pn=n.n(un),dn=n(50),hn=n.n(dn),fn=n(54),mn=n.n(fn),vn=n(82),bn=n.n(vn),gn=n(141),En=n.n(gn),yn=n(442),xn=n.n(yn),wn=n(443),On=n.n(wn),kn=Object(W.stylesheet)({banner:{border:"1px solid ".concat(Y),boxSizing:"border-box",justifyContent:"space-between",margin:Te(-1),minHeight:"50px",padding:Te(-4)},button:{color:ie,maxHeight:"32px",minWidth:"75px"},detailsButton:{backgroundColor:G},icon:{height:"18px",padding:Te(-4),width:"18px"},message:{alignItems:"center",display:"flex"},refreshButton:{backgroundColor:G},troubleShootingLink:{alignItems:"center",color:ue,fontWeight:"bold",padding:Te(-4)}}),Nn=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={dialogOpen:!1},r}return Object(i.a)(n,[{key:"render",value:function(){var e=Object(W.stylesheet)({mode:{backgroundColor:$,color:Q}}),t=c.createElement(En.a,{className:kn.icon}),n="An error occurred",r=!0;switch(this.props.mode){case"error":e=Object(W.stylesheet)({mode:{backgroundColor:$,color:Q}}),t=c.createElement(En.a,{className:kn.icon}),n="An error occurred",this.props.showTroubleshootingGuideLink||!1;break;case"warning":e=Object(W.stylesheet)({mode:{backgroundColor:de,color:he}}),t=c.createElement(xn.a,{className:kn.icon}),n="Warning";break;case"info":e=Object(W.stylesheet)({mode:{backgroundColor:fe,color:me}}),t=c.createElement(On.a,{className:kn.icon}),n="Info",r=!1}return(c.createElement("div",{className:Object(W.classes)(Fe.flex,kn.banner,e.mode)},c.createElement("div",{className:kn.message},t,this.props.message),c.createElement("div",{className:Fe.flex},this.props.additionalInfo&&c.createElement(Jt.a,{className:Object(W.classes)(kn.button,kn.detailsButton),onClick:this._showAdditionalInfo.bind(this)},"\u8be6\u60c5"),r&&this.props.refresh&&c.createElement(Jt.a,{className:Object(W.classes)(kn.button,kn.refreshButton),onClick:this._refresh.bind(this)},"\u5237\u65b0")),this.props.additionalInfo&&c.createElement(pn.a,{open:this.state.dialogOpen,onClose:this._dialogClosed.bind(this)},c.createElement(bn.a,null,n),c.createElement(mn.a,{className:Fe.prewrap},this.props.additionalInfo),c.createElement(hn.a,null,c.createElement(Jt.a,{id:"dismissDialogBtn",onClick:this._dialogClosed.bind(this)},"\u53d6\u6d88")))))}},{key:"_dialogClosed",value:function(){this.setState({dialogOpen:!1})}},{key:"_showAdditionalInfo",value:function(){this.setState({dialogOpen:!0})}},{key:"_refresh",value:function(){this.props.refresh()}}]),n}(c.Component),Sn=n(63),Rn=n(433),_n={border:"0px none transparent",borderTop:"1px solid ".concat(Y),margin:"".concat(je,"px 0")},Cn=function(e){return c.createElement("hr",Object.assign({style:_n},e))},In=n(444),Pn=n.n(In),jn=Object(W.stylesheet)({collapseBtn:{color:oe,fontSize:Ie,fontWeight:"bold",padding:5},collapsed:{transform:"rotate(180deg)"},icon:{marginRight:5,transition:"transform 0.3s"}}),Tn=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.collapseSections,n=e.compareSetState,r=this.props.sectionName;return c.createElement("div",null,c.createElement(Jt.a,{onClick:function(){t[r]=!t[r],n({collapseSections:t})},title:"Expand/Collapse this section",className:jn.collapseBtn},c.createElement(Pn.a,{className:Object(W.classes)(jn.icon,t[r]?jn.collapsed:"")}),r))}}]),n}(c.Component),An="1px solid ".concat(Y),Dn=Object(W.stylesheet)({cell:{border:An,borderCollapse:"collapse",padding:5},labelCell:{backgroundColor:re,fontWeight:"bold",maxWidth:200,minWidth:50,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},root:{border:An,borderCollapse:"collapse"},row:{$nest:{"&:hover":{backgroundColor:"#f7f7f7"}}}}),Ln=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.rows,n=e.xLabels,r=e.yLabels;return t.length!==r.length&&pt.error("Number of rows (".concat(t.length,") should match the number of Y labels (").concat(r.length,").")),t&&0!==t.length?c.createElement("table",{className:Dn.root},c.createElement("tbody",null,c.createElement("tr",{className:Dn.row},c.createElement("td",{className:Dn.labelCell}),n.map((function(e,t){return c.createElement("td",{key:t,className:Object(W.classes)(Dn.cell,Dn.labelCell),title:e},e)}))),t.map((function(e,t){return c.createElement("tr",{key:t,className:Dn.row},c.createElement("td",{className:Object(W.classes)(Dn.cell,Dn.labelCell),title:r[t]},r[t]),e.map((function(e,t){return c.createElement("td",{key:t,className:Dn.cell,title:e},e)})))})))):null}}]),n}(c.PureComponent),Mn=n(232),Un=n.n(Mn),Fn=n(61),Vn=n.n(Fn),Bn=n(231),zn=n.n(Bn),Kn=n(70),Wn=n(238);!function(e){e.CONFUSION_MATRIX="confusion_matrix",e.MARKDOWN="markdown",e.ROC="roc",e.TABLE="table",e.TENSORBOARD="tensorboard",e.VISUALIZATION_CREATOR="visualization-creator",e.WEB_APP="web-app"}(an||(an={}));var qn=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"isAggregatable",value:function(){return!1}}]),n}(c.Component),Hn=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;if(Object(a.a)(this,n),(r=t.call(this,e))._opacities=[],r._config=r.props.configs[0],r._max=r._config&&Math.max.apply(Math,Object(Kn.a)(r._config.data.map((function(e){return e.map((function(e){return+e}))})).map((function(e){return Math.max.apply(Math,Object(Kn.a)(e))})))),r._minRegularCellDimension=15,r._maxRegularCellDimension=80,r._cellDimension=r._config?Math.max(Math.min((r.props.maxDimension||700)/r._config.data.length,r._maxRegularCellDimension),r._minRegularCellDimension)-1:0,r._shrinkThreshold=600,r._uiData=[],r._css=Object(W.stylesheet)({activeLabel:{borderRadius:5,color:ue,fontWeight:"bold"},cell:{border:"solid 1px "+G,fontSize:r._isSmall()?Se:Re,height:r._cellDimension,minHeight:r._cellDimension,minWidth:r._cellDimension,position:"relative",textAlign:"center",verticalAlign:"middle",width:r._cellDimension},legend:{background:"linear-gradient(".concat(ue,", ").concat(G,")"),borderRight:"solid 1px #777",marginLeft:20,minWidth:10,position:"relative",width:10},legendLabel:{left:15,position:"absolute",top:-7},legendNotch:{borderTop:"solid 1px #777",left:"100%",paddingLeft:5,position:"absolute",width:5},overlay:{backgroundColor:"#000",bottom:0,left:0,opacity:0,position:"absolute",right:0,top:0},root:{flexGrow:1,justifyContent:"center",margin:"auto",pointerEvents:r._isSmall()?"none":"initial",position:"relative",width:"fit-content"},xAxisLabel:{color:Z,fontSize:15,fontWeight:"bold",paddingLeft:20,position:"absolute"},xlabel:{marginLeft:15,overflow:"hidden",position:"absolute",textAlign:"left",textOverflow:"ellipsis",transform:"rotate(60deg)",transformOrigin:"left",whiteSpace:"nowrap",width:150},yAxisLabel:{color:Z,fontSize:15,height:25,paddingRight:20,textAlign:"right"},ylabel:{lineHeight:"".concat(r._cellDimension,"px"),marginRight:10,minWidth:r._cellDimension,textAlign:"right",whiteSpace:"nowrap"}}),!r._config)return Object(Wn.a)(r);if(r.state={activeCell:[-1,-1]},r._config&&r._config.labels&&r._config.data){for(var i=r._config.labels.length,s=new Array(i).fill(void 0).map((function(){return new Array(i)})),o=0;o<i;++o)for(var c=0;c<i;++c){var l;s[i-1-c][o]=null===(l=r._config.data[o])||void 0===l?void 0:l[c]}r._uiData=s}else r._uiData=[];var u,p=Object(Sn.a)(r._uiData);try{for(p.s();!(u=p.n()).done;){var d,h=u.value,f=[],m=Object(Sn.a)(h);try{for(m.s();!(d=m.n()).done;){var v=d.value;f.push(+v/r._max)}}catch(b){m.e(b)}finally{m.f()}r._opacities.push(f)}}catch(b){p.e(b)}finally{p.f()}return r}return Object(i.a)(n,[{key:"getDisplayName",value:function(){return"Confusion matrix"}},{key:"render",value:function(){var e=this;if(!this._config)return null;var t=Object(d.a)(this.state.activeCell,2),n=t[0],r=t[1],a=Object(d.a)(this._config.axes,2),i=a[0],s=a[1],o=this._isSmall();return c.createElement("div",{className:Object(W.classes)(Fe.flex,this._css.root)},c.createElement("table",null,c.createElement("tbody",null,!o&&c.createElement("tr",null,c.createElement("td",{className:this._css.yAxisLabel},s)),this._uiData.map((function(t,a){return c.createElement("tr",{key:a},!o&&c.createElement("td",null,c.createElement("div",{className:Object(W.classes)(e._css.ylabel,a===n?e._css.activeLabel:"")},e._config.labels[e._config.labels.length-1-a])),t.map((function(t,i){return c.createElement("td",{key:i,className:e._css.cell,style:{backgroundColor:"rgba(41, 121, 255, ".concat(e._opacities[a][i],")"),color:e._opacities[a][i]<.6?Z:G},onMouseOver:function(){return e.setState({activeCell:[a,i]})},onMouseLeave:function(){return e.setState((function(e){return{activeCell:e.activeCell[0]===a&&e.activeCell[1]===i?[-1,-1]:e.activeCell}}))}},c.createElement("div",{className:e._css.overlay,style:{opacity:a===n||i===r?.05:0}}),t)})))})),!o&&c.createElement("tr",null,c.createElement("th",{className:this._css.xlabel}),this._config.labels.map((function(t,n){return c.createElement("th",{key:n},c.createElement("div",{className:Object(W.classes)(n===r?e._css.activeLabel:"",e._css.xlabel)},t))})),c.createElement("td",{className:this._css.xAxisLabel},i)))),!o&&c.createElement("div",{className:this._css.legend,style:{height:.75*this._config.data.length*this._cellDimension}},c.createElement("div",{className:this._css.legendNotch,style:{top:0}},c.createElement("span",{className:this._css.legendLabel},this._max)),new Array(5).fill(0).map((function(t,n){return c.createElement("div",{key:n,className:e._css.legendNotch,style:{top:(5-n)/5*100+"%"}},c.createElement("span",{className:e._css.legendLabel},Math.floor(n/5*e._max)))}))))}},{key:"_isSmall",value:function(){return!!this.props.maxDimension&&this.props.maxDimension<this._shrinkThreshold}}]),n}(qn),Gn=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i)))._iframeRef=c.createRef(),e._config=e.props.configs[0],e._css=Object(W.stylesheet)({iframe:{border:"1px solid "+Y,boxSizing:"border-box",flexGrow:1,height:e.props.maxDimension?e.props.maxDimension:"initial",minHeight:e.props.maxDimension?e.props.maxDimension:600,width:e.props.maxDimension?e.props.maxDimension:"100%"}}),e}return Object(i.a)(n,[{key:"getDisplayName",value:function(){return"Static HTML"}},{key:"componentDidMount",value:function(){this._iframeRef.current&&(this._iframeRef.current.srcdoc=this._config.htmlContent)}},{key:"render",value:function(){return this._config?c.createElement("iframe",{ref:this._iframeRef,src:"about:blank",className:this._css.iframe,sandbox:"allow-scripts"}):null}}]),n}(qn),Xn=n(137);Object(W.cssRaw)("\n.markdown-viewer h1,\n.markdown-viewer h2,\n.markdown-viewer h3,\n.markdown-viewer h4,\n.markdown-viewer h5,\n.markdown-viewer h6 {\nposition: relative;\n  margin-top: 1em;\n  margin-bottom: 16px;\n  font-size: initial;\n  font-weight: 700;\n  line-height: 1.4;\n}\n\n.markdown-viewer h1,\n.markdown-viewer h2 {\n  padding-bottom: .3em;\n  border-bottom: 1px solid #eee;\n}\n\n.markdown-viewer code,\n.markdown-viewer pre {\n  background-color: #f8f8f8;\n  border-radius: 5px;\n}\n\n.markdown-viewer pre {\n  border: solid 1px #eee;\n  margin: 7px 0;\n  padding: 7px;\n}\n");var Jn,Yn=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i)))._config=e.props.configs[0],e}return Object(i.a)(n,[{key:"getDisplayName",value:function(){return"Markdown"}},{key:"render",value:function(){return this._config?c.createElement("div",{className:"markdown-viewer"},c.createElement(Xn.a,null,this._config.markdownContent)):null}}]),n}(qn),$n=n(217),Qn=n.n($n),Zn=n(219),er=n.n(Zn),tr=n(110),nr=n.n(tr),rr=n(218),ar=n.n(rr),ir=n(220),sr=n.n(ir),or=n(138),cr=n.n(or);!function(e){e.ASC="asc",e.DESC="desc"}(Jn||(Jn={}));var lr,ur,pr,dr=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._shrinkThreshold=600,r._config=r.props.configs[0],r._rowHeight=30,r._css=Object(W.stylesheet)({cell:{borderRight:"solid 1px "+Y,color:Z,fontSize:r._isSmall()?Se:Re,paddingLeft:r._isSmall()?5:"invalid",paddingRight:5,pointerEvents:r._isSmall()?"none":"initial"},columnName:{fontSize:r._isSmall()?Re:_e,fontWeight:"bold",paddingLeft:r._isSmall()?5:"invalid"},row:{borderBottom:"1px solid #ddd",height:r._isSmall()?25:r._rowHeight}}),r._handleSort=function(e){return function(){var t=e,n=Jn.ASC;r.state.orderBy===e&&r.state.order===Jn.ASC&&(n=Jn.DESC),r.setState({order:n,orderBy:t})}},r._handleChangePage=function(e,t){r.setState({page:t})},r._handleChangeRowsPerPage=function(e){r.setState({rowsPerPage:e.target.value})},r.state={order:Jn.ASC,orderBy:0,page:0,rowsPerPage:10},r}return Object(i.a)(n,[{key:"getDisplayName",value:function(){return"Table"}},{key:"render",value:function(){var e=this;if(!this._config)return null;var t=this._config,n=t.data,r=t.labels,a=this.state,i=a.order,s=a.orderBy,o=a.rowsPerPage,l=a.page,u=o-Math.min(o,n.length-l*o);return c.createElement("div",{style:{width:"100%"},className:Fe.page},c.createElement(Qn.a,{style:{display:"block",overflow:"auto"}},c.createElement(ar.a,null,c.createElement(cr.a,null,r.map((function(t,n){return c.createElement(nr.a,{className:e._css.columnName,key:n,sortDirection:s===n&&i},c.createElement($e.a,{title:"Sort",enterDelay:300},c.createElement(Je.a,{active:s===n,direction:i,onClick:e._handleSort(n)},t)))}),this))),c.createElement(er.a,null,this._stableSort(n).slice(l*o,l*o+o).map((function(t){return c.createElement(cr.a,{hover:!0,tabIndex:-1,key:t[0],className:e._css.row},t.map((function(t,n){return c.createElement(nr.a,{key:n,className:e._css.cell},t)})))})),u>0&&c.createElement(cr.a,{style:{height:this._rowHeight*u}},c.createElement(nr.a,{colSpan:6})))),c.createElement(sr.a,{component:"div",count:n.length,rowsPerPage:o,page:l,onChangePage:this._handleChangePage,onChangeRowsPerPage:this._handleChangeRowsPerPage}))}},{key:"_isSmall",value:function(){return!!this.props.maxDimension&&this.props.maxDimension<this._shrinkThreshold}},{key:"_stableSort",value:function(e){var t=e.map((function(e,t){return[e,t]})),n=this._getSorting(this.state.order,this.state.orderBy);return t.sort((function(e,t){var r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t.map((function(e){return e[0]}))}},{key:"_desc",value:function(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}},{key:"_getSorting",value:function(e,t){var n=this;return e===Jn.DESC?function(e,r){return n._desc(e,r,t)}:function(e,r){return-n._desc(e,r,t)}}}]),n}(qn),hr=n(77),fr=(n(716),Object(W.stylesheet)({axis:{fontSize:_e,fontWeight:"bolder"},crosshair:{backgroundColor:"#1d2744",borderRadius:5,boxShadow:"1px 1px 5px #aaa",padding:10},crosshairLabel:{fontWeight:"bold",whiteSpace:"nowrap"},root:{margin:"auto"}})),mr=["#4285f4","#efb4a3","#684e91","#d74419","#7fa6c4","#ffdc10","#d7194d","#6b2f49","#f9e27c","#633a70","#5ec4ec"],vr=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={hoveredValues:new Array(r.props.configs.length).fill(""),lastDrawLocation:null},r}return Object(i.a)(n,[{key:"getDisplayName",value:function(){return"ROC Curve"}},{key:"isAggregatable",value:function(){return!0}},{key:"render",value:function(){var e=this,t=this.props.maxDimension||800,n=.65*t,r=t<600,a=this.props.configs.map((function(e){return e.data})),i=a.length,s=this.props.configs.map((function(e,t){return"threshold (Series #".concat(t,")")})),o=Array.from(Array(100).keys()).map((function(e){return{x:e/100,y:e/100}})),l=this.state,u=l.hoveredValues,p=l.lastDrawLocation;return c.createElement("div",null,c.createElement(hr.h,{width:t,height:n,animation:!r,classes:{root:fr.root},onMouseLeave:function(){return e.setState({hoveredValues:new Array(i).fill("")})},xDomain:p&&[p.left,p.right]},c.createElement(hr.f,null),c.createElement(hr.d,null),c.createElement(hr.g,{title:"fpr",className:fr.axis}),c.createElement(hr.i,{title:"tpr",className:fr.axis}),c.createElement(hr.e,{color:J,strokeWidth:1,data:o,strokeStyle:"dashed"}),a.map((function(t,n){return c.createElement(hr.e,{key:n,color:mr[n]||mr[mr.length-1],strokeWidth:2,data:t,onNearestX:function(t){return e._lineHovered(n,t)},curve:"curveBasis"})})),!r&&c.createElement(hr.c,{onBrushEnd:function(t){return e.setState({lastDrawLocation:t})},enableY:!1,onDrag:function(t){return e.setState({lastDrawLocation:{left:(p?p.left:0)-(t.right-t.left),right:(p?p.right:0)-(t.right-t.left)}})}}),!r&&c.createElement(hr.a,{values:u},c.createElement("div",{className:fr.crosshair},u.map((function(e,t){return c.createElement("div",{key:t,className:fr.crosshairLabel},"".concat(s[t],": ").concat(e.label))}))))),c.createElement("div",{className:Fe.flex},a.length>1&&c.createElement("div",{style:{flexGrow:1}},c.createElement(hr.b,{items:a.map((function(e,t){return{color:mr[t],title:"Series #"+(t+1)}})),orientation:"horizontal"})),p&&c.createElement("span",null,"Click to reset zoom")))}},{key:"_lineHovered",value:function(e,t){var n=this.state.hoveredValues;n[e]=t,this.setState({hoveredValues:n})}}]),n}(qn),br=Object(W.stylesheet)({icon:{height:20,marginRight:4,width:20},root:{cursor:"pointer",marginBottom:2,position:"relative",transition:"padding 0.3s"},rootBusy:{cursor:"default",paddingRight:35},spinner:{opacity:0,position:"absolute",right:"0.8em",transition:"all 0.3s"},spinnerBusy:{opacity:1}}),gr=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.busy,r=e.className,a=e.disabled,i=e.icon,s=e.outlined,o=Object(F.a)(e,["title","busy","className","disabled","icon","outlined"]);return(c.createElement(Jt.a,Object.assign({},o,{color:s?"primary":"secondary",className:Object(W.classes)(br.root,n&&br.rootBusy,r),disabled:n||a}),!!i&&c.createElement(this.props.icon,{className:br.icon}),c.createElement("span",null,t),!0===n&&c.createElement(A.a,{size:15,className:Object(W.classes)(br.spinner,n&&br.spinnerBusy)})))}}]),n}(c.Component),Er="http://localhost".replace(/\/+$/,""),yr=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Er,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:et;Object(a.a)(this,e),this.basePath=n,this.fetch=r,this.configuration=void 0,t&&(this.configuration=t,this.basePath=t.basePath||this.basePath)},xr=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,r)).field=e,i.name=void 0,i}return n}(Object(Qe.a)(Error));!function(e){e[e.UNKNOWNRELATIONSHIP="UNKNOWN_RELATIONSHIP"]="UNKNOWNRELATIONSHIP",e[e.OWNER="OWNER"]="OWNER",e[e.CREATOR="CREATOR"]="CREATOR"}(lr||(lr={})),function(e){e[e.UNKNOWNRESOURCETYPE="UNKNOWN_RESOURCE_TYPE"]="UNKNOWNRESOURCETYPE",e[e.EXPERIMENT="EXPERIMENT"]="EXPERIMENT",e[e.JOB="JOB"]="JOB",e[e.PIPELINE="PIPELINE"]="PIPELINE",e[e.PIPELINEVERSION="PIPELINE_VERSION"]="PIPELINEVERSION",e[e.NAMESPACE="NAMESPACE"]="NAMESPACE"}(ur||(ur={})),function(e){e[e.UNSPECIFIED="STORAGESTATE_UNSPECIFIED"]="UNSPECIFIED",e[e.AVAILABLE="STORAGESTATE_AVAILABLE"]="AVAILABLE",e[e.ARCHIVED="STORAGESTATE_ARCHIVED"]="ARCHIVED"}(pr||(pr={}));var wr,Or,kr,Nr=function(e){return{archiveExperiment:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new xr("id","Required parameter id was null or undefined when calling archiveExperiment.");var r="/apis/v1beta1/experiments/{id}:archive".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},createExperiment:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new xr("body","Required parameter body was null or undefined when calling createExperiment.");var r="/apis/v1beta1/experiments",a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}s["Content-Type"]="application/json",a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers);var l=!0;return i.body=l?JSON.stringify(t||{}):t||"",{url:Ze.format(a),options:i}},deleteExperiment:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new xr("id","Required parameter id was null or undefined when calling deleteExperiment.");var r="/apis/v1beta1/experiments/{id}".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"DELETE"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},getExperiment:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new xr("id","Required parameter id was null or undefined when calling getExperiment.");var r="/apis/v1beta1/experiments/{id}".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"GET"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},listExperiment:function(t,n,r,a,i,s){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c="/apis/v1beta1/experiments",l=Ze.parse(c,!0),u=Object.assign({method:"GET"},o),p={},d={};if(e&&e.apiKey){var h="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;p.authorization=h}return void 0!==t&&(d.page_token=t),void 0!==n&&(d.page_size=n),void 0!==r&&(d.sort_by=r),void 0!==a&&(d.filter=a),void 0!==i&&(d["resource_reference_key.type"]=i),void 0!==s&&(d["resource_reference_key.id"]=s),l.query=Object.assign({},l.query,d,o.query),delete l.search,u.headers=Object.assign({},p,o.headers),{url:Ze.format(l),options:u}},unarchiveExperiment:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new xr("id","Required parameter id was null or undefined when calling unarchiveExperiment.");var r="/apis/v1beta1/experiments/{id}:unarchive".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}}}},Sr=function(e){return{archiveExperiment:function(t,n){var r=Nr(e).archiveExperiment(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Er;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},createExperiment:function(t,n){var r=Nr(e).createExperiment(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Er;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},deleteExperiment:function(t,n){var r=Nr(e).deleteExperiment(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Er;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},getExperiment:function(t,n){var r=Nr(e).getExperiment(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Er;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},listExperiment:function(t,n,r,a,i,s,o){var c=Nr(e).listExperiment(t,n,r,a,i,s,o);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Er;return e(t+c.url,c.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},unarchiveExperiment:function(t,n){var r=Nr(e).unarchiveExperiment(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Er;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}}}},Rr=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"archiveExperiment",value:function(e,t){return Sr(this.configuration).archiveExperiment(e,t)(this.fetch,this.basePath)}},{key:"createExperiment",value:function(e,t){return Sr(this.configuration).createExperiment(e,t)(this.fetch,this.basePath)}},{key:"deleteExperiment",value:function(e,t){return Sr(this.configuration).deleteExperiment(e,t)(this.fetch,this.basePath)}},{key:"getExperiment",value:function(e,t){return Sr(this.configuration).getExperiment(e,t)(this.fetch,this.basePath)}},{key:"listExperiment",value:function(e,t,n,r,a,i,s){return Sr(this.configuration).listExperiment(e,t,n,r,a,i,s)(this.fetch,this.basePath)}},{key:"unarchiveExperiment",value:function(e,t){return Sr(this.configuration).unarchiveExperiment(e,t)(this.fetch,this.basePath)}}]),n}(yr),_r="http://localhost".replace(/\/+$/,""),Cr=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_r,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:et;Object(a.a)(this,e),this.basePath=n,this.fetch=r,this.configuration=void 0,t&&(this.configuration=t,this.basePath=t.basePath||this.basePath)},Ir=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,r)).field=e,i.name=void 0,i}return n}(Object(Qe.a)(Error));!function(e){e[e.UNKNOWNRELATIONSHIP="UNKNOWN_RELATIONSHIP"]="UNKNOWNRELATIONSHIP",e[e.OWNER="OWNER"]="OWNER",e[e.CREATOR="CREATOR"]="CREATOR"}(wr||(wr={})),function(e){e[e.UNKNOWNRESOURCETYPE="UNKNOWN_RESOURCE_TYPE"]="UNKNOWNRESOURCETYPE",e[e.EXPERIMENT="EXPERIMENT"]="EXPERIMENT",e[e.JOB="JOB"]="JOB",e[e.PIPELINE="PIPELINE"]="PIPELINE",e[e.PIPELINEVERSION="PIPELINE_VERSION"]="PIPELINEVERSION",e[e.NAMESPACE="NAMESPACE"]="NAMESPACE"}(Or||(Or={})),function(e){e[e.UNKNOWNMODE="UNKNOWN_MODE"]="UNKNOWNMODE",e[e.ENABLED="ENABLED"]="ENABLED",e[e.DISABLED="DISABLED"]="DISABLED"}(kr||(kr={}));var Pr,jr,Tr=function(e){return{createJob:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ir("body","Required parameter body was null or undefined when calling createJob.");var r="/apis/v1beta1/jobs",a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}s["Content-Type"]="application/json",a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers);var l=!0;return i.body=l?JSON.stringify(t||{}):t||"",{url:Ze.format(a),options:i}},deleteJob:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ir("id","Required parameter id was null or undefined when calling deleteJob.");var r="/apis/v1beta1/jobs/{id}".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"DELETE"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},disableJob:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ir("id","Required parameter id was null or undefined when calling disableJob.");var r="/apis/v1beta1/jobs/{id}/disable".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},enableJob:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ir("id","Required parameter id was null or undefined when calling enableJob.");var r="/apis/v1beta1/jobs/{id}/enable".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},getJob:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ir("id","Required parameter id was null or undefined when calling getJob.");var r="/apis/v1beta1/jobs/{id}".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"GET"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},listJobs:function(t,n,r,a,i,s){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c="/apis/v1beta1/jobs",l=Ze.parse(c,!0),u=Object.assign({method:"GET"},o),p={},d={};if(e&&e.apiKey){var h="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;p.authorization=h}return void 0!==t&&(d.page_token=t),void 0!==n&&(d.page_size=n),void 0!==r&&(d.sort_by=r),void 0!==a&&(d["resource_reference_key.type"]=a),void 0!==i&&(d["resource_reference_key.id"]=i),void 0!==s&&(d.filter=s),l.query=Object.assign({},l.query,d,o.query),delete l.search,u.headers=Object.assign({},p,o.headers),{url:Ze.format(l),options:u}}}},Ar=function(e){return{createJob:function(t,n){var r=Tr(e).createJob(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_r;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},deleteJob:function(t,n){var r=Tr(e).deleteJob(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_r;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},disableJob:function(t,n){var r=Tr(e).disableJob(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_r;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},enableJob:function(t,n){var r=Tr(e).enableJob(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_r;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},getJob:function(t,n){var r=Tr(e).getJob(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_r;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},listJobs:function(t,n,r,a,i,s,o){var c=Tr(e).listJobs(t,n,r,a,i,s,o);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_r;return e(t+c.url,c.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}}}},Dr=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"createJob",value:function(e,t){return Ar(this.configuration).createJob(e,t)(this.fetch,this.basePath)}},{key:"deleteJob",value:function(e,t){return Ar(this.configuration).deleteJob(e,t)(this.fetch,this.basePath)}},{key:"disableJob",value:function(e,t){return Ar(this.configuration).disableJob(e,t)(this.fetch,this.basePath)}},{key:"enableJob",value:function(e,t){return Ar(this.configuration).enableJob(e,t)(this.fetch,this.basePath)}},{key:"getJob",value:function(e,t){return Ar(this.configuration).getJob(e,t)(this.fetch,this.basePath)}},{key:"listJobs",value:function(e,t,n,r,a,i,s){return Ar(this.configuration).listJobs(e,t,n,r,a,i,s)(this.fetch,this.basePath)}}]),n}(Cr),Lr="http://localhost".replace(/\/+$/,""),Mr=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:et;Object(a.a)(this,e),this.basePath=n,this.fetch=r,this.configuration=void 0,t&&(this.configuration=t,this.basePath=t.basePath||this.basePath)},Ur=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,r)).field=e,i.name=void 0,i}return n}(Object(Qe.a)(Error));!function(e){e[e.UNKNOWNRELATIONSHIP="UNKNOWN_RELATIONSHIP"]="UNKNOWNRELATIONSHIP",e[e.OWNER="OWNER"]="OWNER",e[e.CREATOR="CREATOR"]="CREATOR"}(Pr||(Pr={})),function(e){e[e.UNKNOWNRESOURCETYPE="UNKNOWN_RESOURCE_TYPE"]="UNKNOWNRESOURCETYPE",e[e.EXPERIMENT="EXPERIMENT"]="EXPERIMENT",e[e.JOB="JOB"]="JOB",e[e.PIPELINE="PIPELINE"]="PIPELINE",e[e.PIPELINEVERSION="PIPELINE_VERSION"]="PIPELINEVERSION",e[e.NAMESPACE="NAMESPACE"]="NAMESPACE"}(jr||(jr={}));var Fr,Vr,Br,zr,Kr,Wr=function(e){return{createPipeline:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ur("body","Required parameter body was null or undefined when calling createPipeline.");var r="/apis/v1beta1/pipelines",a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}s["Content-Type"]="application/json",a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers);var l=!0;return i.body=l?JSON.stringify(t||{}):t||"",{url:Ze.format(a),options:i}},createPipelineVersion:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ur("body","Required parameter body was null or undefined when calling createPipelineVersion.");var r="/apis/v1beta1/pipeline_versions",a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}s["Content-Type"]="application/json",a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers);var l=!0;return i.body=l?JSON.stringify(t||{}):t||"",{url:Ze.format(a),options:i}},deletePipeline:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ur("id","Required parameter id was null or undefined when calling deletePipeline.");var r="/apis/v1beta1/pipelines/{id}".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"DELETE"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},deletePipelineVersion:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ur("version_id","Required parameter version_id was null or undefined when calling deletePipelineVersion.");var r="/apis/v1beta1/pipeline_versions/{version_id}".replace("{".concat("version_id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"DELETE"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},getPipeline:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ur("id","Required parameter id was null or undefined when calling getPipeline.");var r="/apis/v1beta1/pipelines/{id}".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"GET"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},getPipelineVersion:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ur("version_id","Required parameter version_id was null or undefined when calling getPipelineVersion.");var r="/apis/v1beta1/pipeline_versions/{version_id}".replace("{".concat("version_id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"GET"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},getPipelineVersionTemplate:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ur("version_id","Required parameter version_id was null or undefined when calling getPipelineVersionTemplate.");var r="/apis/v1beta1/pipeline_versions/{version_id}/templates".replace("{".concat("version_id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"GET"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},getTemplate:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Ur("id","Required parameter id was null or undefined when calling getTemplate.");var r="/apis/v1beta1/pipelines/{id}/templates".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"GET"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},listPipelineVersions:function(t,n,r,a,i,s){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c="/apis/v1beta1/pipeline_versions",l=Ze.parse(c,!0),u=Object.assign({method:"GET"},o),p={},d={};if(e&&e.apiKey){var h="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;p.authorization=h}return void 0!==t&&(d["resource_key.type"]=t),void 0!==n&&(d["resource_key.id"]=n),void 0!==r&&(d.page_size=r),void 0!==a&&(d.page_token=a),void 0!==i&&(d.sort_by=i),void 0!==s&&(d.filter=s),l.query=Object.assign({},l.query,d,o.query),delete l.search,u.headers=Object.assign({},p,o.headers),{url:Ze.format(l),options:u}},listPipelines:function(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s="/apis/v1beta1/pipelines",o=Ze.parse(s,!0),c=Object.assign({method:"GET"},i),l={},u={};if(e&&e.apiKey){var p="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;l.authorization=p}return void 0!==t&&(u.page_token=t),void 0!==n&&(u.page_size=n),void 0!==r&&(u.sort_by=r),void 0!==a&&(u.filter=a),o.query=Object.assign({},o.query,u,i.query),delete o.search,c.headers=Object.assign({},l,i.headers),{url:Ze.format(o),options:c}}}},qr=function(e){return{createPipeline:function(t,n){var r=Wr(e).createPipeline(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},createPipelineVersion:function(t,n){var r=Wr(e).createPipelineVersion(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},deletePipeline:function(t,n){var r=Wr(e).deletePipeline(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},deletePipelineVersion:function(t,n){var r=Wr(e).deletePipelineVersion(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},getPipeline:function(t,n){var r=Wr(e).getPipeline(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},getPipelineVersion:function(t,n){var r=Wr(e).getPipelineVersion(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},getPipelineVersionTemplate:function(t,n){var r=Wr(e).getPipelineVersionTemplate(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},getTemplate:function(t,n){var r=Wr(e).getTemplate(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},listPipelineVersions:function(t,n,r,a,i,s,o){var c=Wr(e).listPipelineVersions(t,n,r,a,i,s,o);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;return e(t+c.url,c.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},listPipelines:function(t,n,r,a,i){var s=Wr(e).listPipelines(t,n,r,a,i);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lr;return e(t+s.url,s.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}}}},Hr=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"createPipeline",value:function(e,t){return qr(this.configuration).createPipeline(e,t)(this.fetch,this.basePath)}},{key:"createPipelineVersion",value:function(e,t){return qr(this.configuration).createPipelineVersion(e,t)(this.fetch,this.basePath)}},{key:"deletePipeline",value:function(e,t){return qr(this.configuration).deletePipeline(e,t)(this.fetch,this.basePath)}},{key:"deletePipelineVersion",value:function(e,t){return qr(this.configuration).deletePipelineVersion(e,t)(this.fetch,this.basePath)}},{key:"getPipeline",value:function(e,t){return qr(this.configuration).getPipeline(e,t)(this.fetch,this.basePath)}},{key:"getPipelineVersion",value:function(e,t){return qr(this.configuration).getPipelineVersion(e,t)(this.fetch,this.basePath)}},{key:"getPipelineVersionTemplate",value:function(e,t){return qr(this.configuration).getPipelineVersionTemplate(e,t)(this.fetch,this.basePath)}},{key:"getTemplate",value:function(e,t){return qr(this.configuration).getTemplate(e,t)(this.fetch,this.basePath)}},{key:"listPipelineVersions",value:function(e,t,n,r,a,i,s){return qr(this.configuration).listPipelineVersions(e,t,n,r,a,i,s)(this.fetch,this.basePath)}},{key:"listPipelines",value:function(e,t,n,r,a){return qr(this.configuration).listPipelines(e,t,n,r,a)(this.fetch,this.basePath)}}]),n}(Mr),Gr="http://localhost".replace(/\/+$/,""),Xr=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:et;Object(a.a)(this,e),this.basePath=n,this.fetch=r,this.configuration=void 0,t&&(this.configuration=t,this.basePath=t.basePath||this.basePath)},Jr=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,r)).field=e,i.name=void 0,i}return n}(Object(Qe.a)(Error));!function(e){e[e.UNKNOWNRELATIONSHIP="UNKNOWN_RELATIONSHIP"]="UNKNOWNRELATIONSHIP",e[e.OWNER="OWNER"]="OWNER",e[e.CREATOR="CREATOR"]="CREATOR"}(Fr||(Fr={})),function(e){e[e.UNKNOWNRESOURCETYPE="UNKNOWN_RESOURCE_TYPE"]="UNKNOWNRESOURCETYPE",e[e.EXPERIMENT="EXPERIMENT"]="EXPERIMENT",e[e.JOB="JOB"]="JOB",e[e.PIPELINE="PIPELINE"]="PIPELINE",e[e.PIPELINEVERSION="PIPELINE_VERSION"]="PIPELINEVERSION",e[e.NAMESPACE="NAMESPACE"]="NAMESPACE"}(Vr||(Vr={})),function(e){e[e.UNSPECIFIED="UNSPECIFIED"]="UNSPECIFIED",e[e.OK="OK"]="OK",e[e.INVALIDARGUMENT="INVALID_ARGUMENT"]="INVALIDARGUMENT",e[e.DUPLICATEREPORTING="DUPLICATE_REPORTING"]="DUPLICATEREPORTING",e[e.INTERNALERROR="INTERNAL_ERROR"]="INTERNALERROR"}(Br||(Br={})),function(e){e[e.UNSPECIFIED="UNSPECIFIED"]="UNSPECIFIED",e[e.RAW="RAW"]="RAW",e[e.PERCENTAGE="PERCENTAGE"]="PERCENTAGE"}(zr||(zr={})),function(e){e[e.AVAILABLE="STORAGESTATE_AVAILABLE"]="AVAILABLE",e[e.ARCHIVED="STORAGESTATE_ARCHIVED"]="ARCHIVED"}(Kr||(Kr={}));var Yr,$r=function(e){return{archiveRun:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Jr("id","Required parameter id was null or undefined when calling archiveRun.");var r="/apis/v1beta1/runs/{id}:archive".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},createRun:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Jr("body","Required parameter body was null or undefined when calling createRun.");var r="/apis/v1beta1/runs",a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}s["Content-Type"]="application/json",a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers);var l=!0;return i.body=l?JSON.stringify(t||{}):t||"",{url:Ze.format(a),options:i}},deleteRun:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Jr("id","Required parameter id was null or undefined when calling deleteRun.");var r="/apis/v1beta1/runs/{id}".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"DELETE"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},getRun:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Jr("run_id","Required parameter run_id was null or undefined when calling getRun.");var r="/apis/v1beta1/runs/{run_id}".replace("{".concat("run_id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"GET"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},listRuns:function(t,n,r,a,i,s){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c="/apis/v1beta1/runs",l=Ze.parse(c,!0),u=Object.assign({method:"GET"},o),p={},d={};if(e&&e.apiKey){var h="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;p.authorization=h}return void 0!==t&&(d.page_token=t),void 0!==n&&(d.page_size=n),void 0!==r&&(d.sort_by=r),void 0!==a&&(d["resource_reference_key.type"]=a),void 0!==i&&(d["resource_reference_key.id"]=i),void 0!==s&&(d.filter=s),l.query=Object.assign({},l.query,d,o.query),delete l.search,u.headers=Object.assign({},p,o.headers),{url:Ze.format(l),options:u}},readArtifact:function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(null===t||void 0===t)throw new Jr("run_id","Required parameter run_id was null or undefined when calling readArtifact.");if(null===n||void 0===n)throw new Jr("node_id","Required parameter node_id was null or undefined when calling readArtifact.");if(null===r||void 0===r)throw new Jr("artifact_name","Required parameter artifact_name was null or undefined when calling readArtifact.");var i="/apis/v1beta1/runs/{run_id}/nodes/{node_id}/artifacts/{artifact_name}:read".replace("{".concat("run_id","}"),encodeURIComponent(String(t))).replace("{".concat("node_id","}"),encodeURIComponent(String(n))).replace("{".concat("artifact_name","}"),encodeURIComponent(String(r))),s=Ze.parse(i,!0),o=Object.assign({method:"GET"},a),c={},l={};if(e&&e.apiKey){var u="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;c.authorization=u}return s.query=Object.assign({},s.query,l,a.query),delete s.search,o.headers=Object.assign({},c,a.headers),{url:Ze.format(s),options:o}},reportRunMetrics:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null===t||void 0===t)throw new Jr("run_id","Required parameter run_id was null or undefined when calling reportRunMetrics.");if(null===n||void 0===n)throw new Jr("body","Required parameter body was null or undefined when calling reportRunMetrics.");var a="/apis/v1beta1/runs/{run_id}:reportMetrics".replace("{".concat("run_id","}"),encodeURIComponent(String(t))),i=Ze.parse(a,!0),s=Object.assign({method:"POST"},r),o={},c={};if(e&&e.apiKey){var l="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;o.authorization=l}o["Content-Type"]="application/json",i.query=Object.assign({},i.query,c,r.query),delete i.search,s.headers=Object.assign({},o,r.headers);var u=!0;return s.body=u?JSON.stringify(n||{}):n||"",{url:Ze.format(i),options:s}},retryRun:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Jr("run_id","Required parameter run_id was null or undefined when calling retryRun.");var r="/apis/v1beta1/runs/{run_id}/retry".replace("{".concat("run_id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},terminateRun:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Jr("run_id","Required parameter run_id was null or undefined when calling terminateRun.");var r="/apis/v1beta1/runs/{run_id}/terminate".replace("{".concat("run_id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}},unarchiveRun:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null===t||void 0===t)throw new Jr("id","Required parameter id was null or undefined when calling unarchiveRun.");var r="/apis/v1beta1/runs/{id}:unarchive".replace("{".concat("id","}"),encodeURIComponent(String(t))),a=Ze.parse(r,!0),i=Object.assign({method:"POST"},n),s={},o={};if(e&&e.apiKey){var c="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;s.authorization=c}return a.query=Object.assign({},a.query,o,n.query),delete a.search,i.headers=Object.assign({},s,n.headers),{url:Ze.format(a),options:i}}}},Qr=function(e){return{archiveRun:function(t,n){var r=$r(e).archiveRun(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},createRun:function(t,n){var r=$r(e).createRun(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},deleteRun:function(t,n){var r=$r(e).deleteRun(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},getRun:function(t,n){var r=$r(e).getRun(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},listRuns:function(t,n,r,a,i,s,o){var c=$r(e).listRuns(t,n,r,a,i,s,o);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;return e(t+c.url,c.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},readArtifact:function(t,n,r,a){var i=$r(e).readArtifact(t,n,r,a);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;return e(t+i.url,i.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},reportRunMetrics:function(t,n,r){var a=$r(e).reportRunMetrics(t,n,r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;return e(t+a.url,a.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},retryRun:function(t,n){var r=$r(e).retryRun(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},terminateRun:function(t,n){var r=$r(e).terminateRun(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}},unarchiveRun:function(t,n){var r=$r(e).unarchiveRun(t,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;return e(t+r.url,r.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}}}},Zr=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"archiveRun",value:function(e,t){return Qr(this.configuration).archiveRun(e,t)(this.fetch,this.basePath)}},{key:"createRun",value:function(e,t){return Qr(this.configuration).createRun(e,t)(this.fetch,this.basePath)}},{key:"deleteRun",value:function(e,t){return Qr(this.configuration).deleteRun(e,t)(this.fetch,this.basePath)}},{key:"getRun",value:function(e,t){return Qr(this.configuration).getRun(e,t)(this.fetch,this.basePath)}},{key:"listRuns",value:function(e,t,n,r,a,i,s){return Qr(this.configuration).listRuns(e,t,n,r,a,i,s)(this.fetch,this.basePath)}},{key:"readArtifact",value:function(e,t,n,r){return Qr(this.configuration).readArtifact(e,t,n,r)(this.fetch,this.basePath)}},{key:"reportRunMetrics",value:function(e,t,n){return Qr(this.configuration).reportRunMetrics(e,t,n)(this.fetch,this.basePath)}},{key:"retryRun",value:function(e,t){return Qr(this.configuration).retryRun(e,t)(this.fetch,this.basePath)}},{key:"terminateRun",value:function(e,t){return Qr(this.configuration).terminateRun(e,t)(this.fetch,this.basePath)}},{key:"unarchiveRun",value:function(e,t){return Qr(this.configuration).unarchiveRun(e,t)(this.fetch,this.basePath)}}]),n}(Xr),ea="http://localhost".replace(/\/+$/,""),ta=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ea,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:et;Object(a.a)(this,e),this.basePath=n,this.fetch=r,this.configuration=void 0,t&&(this.configuration=t,this.basePath=t.basePath||this.basePath)},na=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,r)).field=e,i.name=void 0,i}return n}(Object(Qe.a)(Error));!function(e){e[e.ROCCURVE="ROC_CURVE"]="ROCCURVE",e[e.TFDV="TFDV"]="TFDV",e[e.TFMA="TFMA"]="TFMA",e[e.TABLE="TABLE"]="TABLE",e[e.CUSTOM="CUSTOM"]="CUSTOM"}(Yr||(Yr={}));var ra,aa,ia,sa,oa,ca,la=function(e){return{createVisualization:function(t,n,r){var a=function(e){return{createVisualization:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null===t||void 0===t)throw new na("namespace","Required parameter namespace was null or undefined when calling createVisualization.");if(null===n||void 0===n)throw new na("body","Required parameter body was null or undefined when calling createVisualization.");var a="/apis/v1beta1/visualizations/{namespace}".replace("{".concat("namespace","}"),encodeURIComponent(String(t))),i=Ze.parse(a,!0),s=Object.assign({method:"POST"},r),o={},c={};if(e&&e.apiKey){var l="function"===typeof e.apiKey?e.apiKey("authorization"):e.apiKey;o.authorization=l}o["Content-Type"]="application/json",i.query=Object.assign({},i.query,c,r.query),delete i.search,s.headers=Object.assign({},o,r.headers);var u=!0;return s.body=u?JSON.stringify(n||{}):n||"",{url:Ze.format(i),options:s}}}}(e).createVisualization(t,n,r);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ea;return e(t+a.url,a.options).then((function(e){if(e.status>=200&&e.status<300)return e.json();throw e}))}}}},ua=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"createVisualization",value:function(e,t,n){return la(this.configuration).createVisualization(e,t,n)(this.fetch,this.basePath)}}]),n}(ta),pa=function(e,t){return et(e,Object(Dt.a)({credentials:"same-origin"},t))},da=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"areCustomVisualizationsAllowed",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==ra){e.next=5;break}return e.next=3,this._fetch("visualizations/allowed");case 3:t=e.sent,ra="true"===t;case 5:return e.abrupt("return",ra);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildPythonVisualizationConfig",value:function(){var t=Object(h.a)(p.a.mark((function t(n,r){var a,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.visualizationServiceApi.createVisualization(r||"",n);case 2:if(!(a=t.sent).html){t.next=8;break}return i=a.html.replace("contentWindow.document.write","srcdoc="),t.abrupt("return",{htmlContent:i,type:an.WEB_APP});case 8:throw new Error("Visualization was generated successfully but generated HTML was not found.");case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getPodLogs",value:function(e,t){var n="k8s/pod/logs?podname=".concat(encodeURIComponent(e));return t&&(n+="&podnamespace=".concat(encodeURIComponent(t))),this._fetch(n)}},{key:"getPodInfo",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="k8s/pod?podname=".concat(encodeURIComponent(t),"&podnamespace=").concat(encodeURIComponent(n)),e.next=3,this._fetch(r);case 3:return a=e.sent,e.abrupt("return",JSON.parse(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPodEvents",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="k8s/pod/events?podname=".concat(encodeURIComponent(t),"&podnamespace=").concat(encodeURIComponent(n)),e.next=3,this._fetch(r);case 3:return a=e.sent,e.abrupt("return",JSON.parse(a));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBuildInfo",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchAndParse("/healthz","apis/v1beta1");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isJupyterHubAvailable",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/hub/",{credentials:"same-origin"});case 2:return t=e.sent,e.abrupt("return",!!t&&t.ok);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"readFile",value:function(e,t,n){return this._fetch(this.buildReadFileUrl(e,t,n))}},{key:"buildReadFileUrl",value:function(e,t,n){var r=e.source,a=Object(F.a)(e,["source"]);return"artifacts/get".concat(Rt(Object(Dt.a)({source:"".concat(r),namespace:t,peek:n},a)))}},{key:"buildArtifactUrl",value:function(e){var t=e.source,n=e.bucket,r=e.key;return"".concat(t,"://").concat(n,"/").concat(r)}},{key:"getTensorboardApp",value:function(e,t){return this._fetchAndParse("apps/tensorboard?logdir=".concat(encodeURIComponent(e),"&namespace=").concat(encodeURIComponent(t)))}},{key:"startTensorboardApp",value:function(e,t,n){return this._fetch("apps/tensorboard?logdir=".concat(encodeURIComponent(e),"&tfversion=").concat(encodeURIComponent(t),"&namespace=").concat(encodeURIComponent(n)),void 0,void 0,{headers:{"content-type":"application/json"},method:"POST"})}},{key:"isTensorboardPodReady",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"HEAD"});case 2:return n=e.sent,e.abrupt("return",n.ok);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTensorboardApp",value:function(e,t){return this._fetch("apps/tensorboard?logdir=".concat(encodeURIComponent(e),"&namespace=").concat(encodeURIComponent(t)),void 0,void 0,{method:"DELETE"})}},{key:"uploadPipeline",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("uploadfile",r,r.name),e.next=4,this._fetchAndParse("/pipelines/upload","apis/v1beta1","name=".concat(encodeURIComponent(t),"&description=").concat(encodeURIComponent(n)),{body:a,cache:"no-cache",method:"POST"});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"uploadPipelineVersion",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("uploadfile",r,r.name),e.next=4,this._fetchAndParse("/pipelines/upload_version","apis/v1beta1","name=".concat(encodeURIComponent(t),"&pipelineid=").concat(encodeURIComponent(n)),{body:a,cache:"no-cache",method:"POST"});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getClusterName",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._fetch("system/cluster-name"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProjectId",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._fetch("system/project-id"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_fetchAndParse",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r,a){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetch(t,n,r,a);case 2:return i=e.sent,e.prev=3,e.abrupt("return",JSON.parse(i));case 7:throw e.prev=7,e.t0=e.catch(3),new Error("Error parsing response for path: ".concat(t,"\n\n")+"Response was: ".concat(i,"\n\nError was: ").concat(JSON.stringify(e.t0)));case 10:case"end":return e.stop()}}),e,this,[[3,7]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_fetch",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r,a){var i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.assign(a||{},{credentials:"same-origin"}),e.next=3,fetch((n||"")+t+(r?"?"+r:""),a);case 3:return i=e.sent,e.next=6,i.text();case 6:if(s=e.sent,!i.ok){e.next=11;break}return e.abrupt("return",s);case 11:throw pt.error("Response for path: ".concat(t," was not 'ok'\n\nResponse was: ").concat(s)),new Error(s);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"basePath",get:function(){var e=window.location.protocol+"//"+window.location.host+window.location.pathname;return e.endsWith("/")?e.substr(0,e.length-1):e}},{key:"experimentServiceApi",get:function(){return this._experimentServiceApi||(this._experimentServiceApi=new Rr({basePath:this.basePath},void 0,pa)),this._experimentServiceApi}},{key:"jobServiceApi",get:function(){return this._jobServiceApi||(this._jobServiceApi=new Dr({basePath:this.basePath},void 0,pa)),this._jobServiceApi}},{key:"pipelineServiceApi",get:function(){return this._pipelineServiceApi||(this._pipelineServiceApi=new Hr({basePath:this.basePath},void 0,pa)),this._pipelineServiceApi}},{key:"runServiceApi",get:function(){return this._runServiceApi||(this._runServiceApi=new Zr({basePath:this.basePath},void 0,pa)),this._runServiceApi}},{key:"visualizationServiceApi",get:function(){return this._visualizationServiceApi||(this._visualizationServiceApi=new ua({basePath:this.basePath},void 0,pa)),this._visualizationServiceApi}}]),e}();da._experimentServiceApi=void 0,da._jobServiceApi=void 0,da._pipelineServiceApi=void 0,da._runServiceApi=void 0,da._visualizationServiceApi=void 0,function(e){e.CREATED_AT="created_at",e.NAME="name"}(aa||(aa={})),function(e){e.AUTHOR="id",e.CREATED_AT="created_at",e.ID="id",e.NAME="name"}(ia||(ia={})),function(e){e.CREATED_AT="created_at",e.ID="id",e.NAME="name",e.PIPELINE_ID="pipeline_id"}(sa||(sa={})),function(e){e.CREATED_AT="created_at",e.ID="id",e.NAME="name"}(oa||(oa={})),function(e){e.CREATED_AT="created_at",e.NAME="name"}(ca||(ca={}));var ha=n(74),fa=n.n(ha),ma=n(108),va=n.n(ma),ba=n(166),ga=n.n(ba),Ea=n(89),ya=n.n(Ea),xa=n(81),wa=n.n(xa),Oa=n(221),ka=n.n(Oa),Na=Object(W.stylesheet)({button:{marginBottom:20,width:150},formControl:{minWidth:120},select:{minHeight:50},shortButton:{width:50},warningText:{color:he},errorText:{color:Q}});function Sa(e){return"apis/v1beta1/_proxy/"+e.replace(/(^\w+:|^)\/\//,"")}var Ra,_a,Ca=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).timerID=void 0,r.handleVersionSelect=function(e){if("string"!==typeof e.target.value)throw new Error("Invalid event value type, expected string");r.setState({tensorflowVersion:e.target.value})},r._handleDeleteOpen=function(){r.setState({deleteDialogOpen:!0})},r._handleDeleteClose=function(){r.setState({deleteDialogOpen:!1})},r._startTensorboard=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({busy:!0,errorMessage:void 0},Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,da.startTensorboardApp(r._buildUrl(),r.state.tensorflowVersion,r._getNamespace());case 3:r.setState({busy:!1,tensorboardReady:!1},(function(){r._checkTensorboardApp()})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r.setState({busy:!1,errorMessage:(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"Unknown error"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))));case 1:case"end":return e.stop()}}),e)}))),r._deleteTensorboard=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({busy:!0,errorMessage:void 0},Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,da.deleteTensorboardApp(r._buildUrl(),r._getNamespace());case 3:r.setState({busy:!1,deleteDialogOpen:!1,podAddress:"",tensorflowVersion:"2.0.0",tensorboardReady:!1}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r.setState({busy:!1,errorMessage:(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"Unknown error"});case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))));case 1:case"end":return e.stop()}}),e)}))),r.state={busy:!1,deleteDialogOpen:!1,podAddress:"",tensorflowVersion:"2.0.0",tensorboardReady:!1,errorMessage:void 0},r}return Object(i.a)(n,[{key:"getDisplayName",value:function(){return"Tensorboard"}},{key:"isAggregatable",value:function(){return!0}},{key:"componentDidMount",value:function(){var e=this;this._checkTensorboardApp(),this.timerID=setInterval((function(){return e._checkTensorboardPodStatus()}),this.props.intervalOfCheckingTensorboardPodStatus||5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"render",value:function(){return c.createElement("div",null,this.state.errorMessage&&c.createElement("div",{className:Na.errorText},this.state.errorMessage),this.state.podAddress&&c.createElement("div",null,c.createElement("div",{className:Ve(20,"b")},"Tensorboard ".concat(this.state.tensorflowVersion," is running for this output.")),c.createElement("a",{href:Sa(this.state.podAddress),target:"_blank",rel:"noopener noreferrer",className:Fe.unstyled},c.createElement(Jt.a,{className:Object(W.classes)(Fe.buttonAction,Na.button),disabled:this.state.busy,color:"primary"},"Open Tensorboard"),this.state.tensorboardReady?"":c.createElement("div",{className:Na.warningText},"Tensorboard is starting, and you may need to wait for a few minutes.")),c.createElement("div",null,c.createElement(Jt.a,{className:Na.button,disabled:this.state.busy,id:"delete",title:"stop tensorboard and delete its instance",onClick:this._handleDeleteOpen,color:"default"},"Delete Tensorboard"),c.createElement(pn.a,{open:this.state.deleteDialogOpen,onClose:this._handleDeleteClose,"aria-labelledby":"dialog-title"},c.createElement(bn.a,{id:"dialog-title"},"Stop Tensorboard ".concat(this.state.tensorflowVersion,"?")),c.createElement(mn.a,null,c.createElement(ka.a,null,"You can stop the current running tensorboard. The tensorboard viewer will also be deleted from your workloads.")),c.createElement(hn.a,null,c.createElement(Jt.a,{className:Na.shortButton,id:"cancel",autoFocus:!0,onClick:this._handleDeleteClose,color:"primary"},"Cancel"),c.createElement(gr,{className:Object(W.classes)(Fe.buttonAction,Na.shortButton),onClick:this._deleteTensorboard,busy:this.state.busy,color:"primary",title:"Stop"}))))),!this.state.podAddress&&c.createElement("div",null,c.createElement("div",{className:Ve(30,"b")},c.createElement(ya.a,{className:Na.formControl},c.createElement(fa.a,{htmlFor:"grouped-select"},"TF Version"),c.createElement(wa.a,{className:Na.select,value:this.state.tensorflowVersion,input:c.createElement(va.a,{id:"grouped-select"}),onChange:this.handleVersionSelect},c.createElement(ga.a,null,"Tensoflow 1.x"),c.createElement(We.a,{value:"1.4.0"},"TensorFlow 1.4.0"),c.createElement(We.a,{value:"1.5.0"},"TensorFlow 1.5.0"),c.createElement(We.a,{value:"1.6.0"},"TensorFlow 1.6.0"),c.createElement(We.a,{value:"1.7.0"},"TensorFlow 1.7.0"),c.createElement(We.a,{value:"1.8.0"},"TensorFlow 1.8.0"),c.createElement(We.a,{value:"1.9.0"},"TensorFlow 1.9.0"),c.createElement(We.a,{value:"1.10.0"},"TensorFlow 1.10.0"),c.createElement(We.a,{value:"1.11.0"},"TensorFlow 1.11.0"),c.createElement(We.a,{value:"1.12.0"},"TensorFlow 1.12.0"),c.createElement(We.a,{value:"1.13.2"},"TensorFlow 1.13.2"),c.createElement(We.a,{value:"1.14.0"},"TensorFlow 1.14.0"),c.createElement(We.a,{value:"1.15.0"},"TensorFlow 1.15.0"),c.createElement(ga.a,null,"TensorFlow 2.x"),c.createElement(We.a,{value:"2.0.0"},"TensorFlow 2.0.0")))),c.createElement("div",null,c.createElement(gr,{className:Fe.buttonAction,disabled:!this.state.tensorflowVersion,onClick:this._startTensorboard,busy:this.state.busy,title:"Start ".concat(this.props.configs.length>1?"Combined ":"","Tensorboard")}))))}},{key:"_getNamespace",value:function(){var e;return(null===(e=this.props.configs[0])||void 0===e?void 0:e.namespace)||""}},{key:"_buildUrl",value:function(){var e=this.props.configs.map((function(e){return e.url})).sort();return 1===e.length?e[0]:e.map((function(e,t){return"Series".concat(t+1,":")+e})).join(",")}},{key:"_checkTensorboardPodStatus",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state.podAddress&&!this.state.tensorboardReady&&da.isTensorboardPodReady(Sa(this.state.podAddress)).then((function(e){t.setState((function(t){return{tensorboardReady:t.tensorboardReady||e}}))}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_checkTensorboardApp",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({busy:!0},Object(h.a)(p.a.mark((function e(){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,da.getTensorboardApp(t._buildUrl(),t._getNamespace());case 3:n=e.sent,r=n.podAddress,a=n.tfVersion,r?t.setState({busy:!1,podAddress:r,tensorflowVersion:a}):t.setState({busy:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t.setState({busy:!1,errorMessage:(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"Unknown error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(qn),Ia=(n(152),n(447)),Pa=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"updatePlaceholder",value:function(){var e=this.editor,t=this.props.placeholder,n=!e.session.getValue().length,r=e.renderer.placeholderNode;!n&&r?(e.renderer.scroller.removeChild(e.renderer.placeholderNode),e.renderer.placeholderNode=null):n&&!r?((r=e.renderer.placeholderNode=document.createElement("div")).innerHTML=t||"",r.className="ace_comment ace_placeholder",r.style.padding="0 9px",r.style.position="absolute",r.style.zIndex="3",e.renderer.scroller.appendChild(r)):n&&r&&(r.innerHTML=t)}}]),n}(n.n(Ia).a),ja=(n(270),n(360),n(727),n(271),function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e,r;Object(a.a)(this,n);for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(r=t.call.apply(t,[this].concat(s))).state={expanded:!(null===(e=r.props.configs[0])||void 0===e?void 0:e.collapsedInitially),arguments:"",code:"",source:""},r.handleExpansion=function(){r.setState({expanded:!0})},r}return Object(i.a)(n,[{key:"getDisplayName",value:function(){return"Visualization Creator"}},{key:"render",value:function(){var e=this,t=this.props.configs[0],n=this.state,r=n.arguments,a=n.code,i=n.source,s=n.selectedType;if(!t)return null;var o=t.allowCustomVisualizations,l=void 0!==o&&o,u=t.isBusy,p=void 0!==u&&u,d=t.onGenerate,h=i.length>0&&!!s,f=s===Yr.CUSTOM&&a.length>0,m=!p&&!!d&&(h||f),v=this.getArgumentPlaceholderForType(s);return this.state.expanded?c.createElement("div",{style:{width:this.props.maxWidth||600}},c.createElement(ya.a,{style:{width:"100%"}},c.createElement(fa.a,{htmlFor:"visualization-type-selector"},"Type"),c.createElement(wa.a,{value:s,inputProps:{id:"visualization-type-selector",name:"Visualization Type"},style:{minHeight:60,width:"100%"},onChange:function(t){e.setState({selectedType:t.target.value})},disabled:p},this.getAvailableTypes(l).map((function(e){return c.createElement(We.a,{key:e,value:Yr[e]},Yr[e])})))),c.createElement(ze,{label:"Source",variant:"outlined",value:i,disabled:p,placeholder:"File path or path pattern of data within GCS.",onChange:function(t){return e.setState({source:t.target.value})}}),s===Yr.CUSTOM&&c.createElement("div",null,c.createElement(fa.a,null,"Custom Visualization Code"),c.createElement(Pa,{placeholder:'Python code that will be run to generate visualization.<br><br>To access the source value (if provided), reference the variable "source".<br>To access any provided arguments, reference the variable "variables" (it is a dict object).',width:"100%",height:"175px",mode:"python",theme:"github",value:a,onChange:function(t){return e.setState({code:t})},editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,enableBasicAutocompletion:!0,highlightActiveLine:!0,showGutter:!0})),!!s&&c.createElement("div",null,c.createElement(fa.a,null,"Arguments (Optional)"),c.createElement(Pa,{placeholder:v,height:"".concat(14*v.split("<br>").length,"px"),width:"100%",mode:"json",theme:"github",value:r,onChange:function(t){return e.setState({arguments:t})},editorProps:{$blockScrolling:!0},highlightActiveLine:!0,showGutter:!0})),c.createElement(gr,{title:"Generate Visualization",busy:p,disabled:!m,onClick:function(){if(d&&s){var e=JSON.parse(r||"{}");s===Yr.CUSTOM&&(e.code=a.split("\n")),d(JSON.stringify(e),i,s)}}})):c.createElement(Jt.a,{variant:"text",onClick:this.handleExpansion},"create visualizations manually")}},{key:"getAvailableTypes",value:function(e){return Object.keys(Yr).map((function(e){return e.replace("_","")})).filter((function(t,n,r){return!(r.indexOf(t)!==n)&&(e||!("CUSTOM"===t))&&!("TFMA"===t)}))}},{key:"getArgumentPlaceholderForType",value:function(e){var t="Arguments, provided as JSON, to be used during visualization generation.";switch(e){case Yr.ROCCURVE:t='{\n        \t"is_generated": boolean | null,\n        \t"target_lambda": string | null,\n        \t"trueclass": string | null,\n        \t"true_score_column": string | null\n        }';break;case Yr.TFDV:t="{}";break;case Yr.TFMA:t='{\n        \t"slicing_column: string | null\n        }';break;case Yr.TABLE:t='{\n\t"headers": array\n}';break;case Yr.CUSTOM:t='{\n\t"key": any\n}'}return t.replace(new RegExp("\n","g"),"<br>").replace(new RegExp("\t","g"),"&nbsp&nbsp&nbsp&nbsp")}}]),n}(qn)),Ta=(Ra={},Object(qt.a)(Ra,an.CONFUSION_MATRIX,Hn),Object(qt.a)(Ra,an.MARKDOWN,Yn),Object(qt.a)(Ra,an.ROC,vr),Object(qt.a)(Ra,an.TABLE,dr),Object(qt.a)(Ra,an.TENSORBOARD,Ca),Object(qt.a)(Ra,an.VISUALIZATION_CREATOR,ja),Object(qt.a)(Ra,an.WEB_APP,Gn),Ra),Aa=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.configs,n=e.maxDimension;if(!t.length)return null;var r=Ta[t[0].type];return(l.a.createElement(r,{configs:t,maxDimension:n}))}}]),n}(l.a.Component),Da=Object(W.stylesheet)({dialogTitle:{color:oe,fontSize:Ce,width:"100%"},fullscreenCloseBtn:{minHeight:0,minWidth:0,padding:3},fullscreenDialog:{alignItems:"center",justifyContent:"center",minHeight:"80%",minWidth:"80%",padding:20},fullscreenViewerContainer:{alignItems:"center",boxSizing:"border-box",display:"flex",flexFlow:"column",flexGrow:1,height:"100%",justifyContent:"center",margin:20,overflow:"auto",width:"100%"},plotCard:{flexShrink:0,margin:20,minWidth:250,padding:20,width:"min-content"},plotHeader:{display:"flex",justifyContent:"space-between",overflow:"hidden",paddingBottom:10},plotTitle:{color:oe,fontSize:12,fontWeight:"bold"},popoutIcon:{fontSize:18}}),La=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={fullscreenDialogOpen:!1},r}return Object(i.a)(n,[{key:"shouldComponentUpdate",value:function(e,t){return JSON.stringify(e)!==JSON.stringify(this.props)||t.fullscreenDialogOpen!==this.state.fullscreenDialogOpen}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.configs,a=t.maxDimension,i=Object(F.a)(t,["title","configs","maxDimension"]);return r&&r.length?c.createElement("div",null,c.createElement(Vn.a,Object.assign({},i,{className:Object(W.classes)(Da.plotCard,"plotCard")}),c.createElement("div",{className:Da.plotHeader},c.createElement("div",{className:Da.plotTitle,title:n},n),c.createElement("div",null,c.createElement(Jt.a,{onClick:function(){return e.setState({fullscreenDialogOpen:!0})},style:{padding:4,minHeight:0,minWidth:0},className:"popOutButton"},c.createElement($e.a,{title:"Pop out"},c.createElement(zn.a,{classes:{root:Da.popoutIcon}}))))),c.createElement(Aa,{configs:r,maxDimension:a})),c.createElement(pn.a,{open:!!this.state.fullscreenDialogOpen,classes:{paper:Da.fullscreenDialog},onClose:function(){return e.setState({fullscreenDialogOpen:!1})}},c.createElement("div",{className:Da.dialogTitle},c.createElement(Jt.a,{onClick:function(){return e.setState({fullscreenDialogOpen:!1})},className:Object(W.classes)(Da.fullscreenCloseBtn,"fullscreenCloseButton")},c.createElement(Un.a,null)),Ta[r[0].type].prototype.getDisplayName(),c.createElement(Ge,null),c.createElement("span",{style:{color:ne}},"(",n,")")),c.createElement("div",{className:Da.fullscreenViewerContainer},c.createElement(Aa,{configs:r})))):null}}]),n}(c.Component),Ma=n(112),Ua=n.n(Ma),Fa=n(448),Va=n.n(Fa),Ba=n(449),za=n.n(Ba),Ka=function(){function e(t){Object(a.a)(this,e),this._paramMap=void 0,this._routeProps=void 0,this._routeProps=t,this._paramMap=new URLSearchParams(t.location.search)}return Object(i.a)(e,[{key:"get",value:function(e){return this._paramMap.get(e)}},{key:"set",value:function(e,t){t?this._paramMap.set(e,t):this._paramMap.delete(e),this._update()}},{key:"push",value:function(e,t){t?this._paramMap.set(e,t):this._paramMap.delete(e),this._update(!1)}},{key:"clear",value:function(e){this._paramMap.delete(e),this._update()}},{key:"build",value:function(e){var t=e||{};return"?"+Object.keys(t).map((function(e){return e+"="+t[e]})).join("&")}},{key:"_update",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?this._routeProps.history.replace({search:this._paramMap.toString()}):this._routeProps.history.push({search:this._paramMap.toString()})}}]),e}();!function(e){e.ARCHIVE="archive",e.CLONE_RUN="cloneRun",e.CLONE_RECURRING_RUN="cloneRecurringRun",e.RETRY="retry",e.COLLAPSE="collapse",e.COMPARE="compare",e.DELETE_RUN="deleteRun",e.DISABLE_RECURRING_RUN="disableRecurringRun",e.ENABLE_RECURRING_RUN="enableRecurringRun",e.EXPAND="expand",e.NEW_EXPERIMENT="newExperiment",e.NEW_PIPELINE_VERSION="newPipelineVersion",e.NEW_RUN="newRun",e.NEW_RECURRING_RUN="newRecurringRun",e.NEW_RUN_FROM_PIPELINE_VERSION="newRunFromPipelineVersion",e.REFRESH="refresh",e.RESTORE="restore",e.TERMINATE_RUN="terminateRun",e.UPLOAD_PIPELINE="uploadPipeline"}(_a||(_a={}));var Wa=function(){function e(t,n,r){Object(a.a)(this,e),this._map=void 0,this._props=void 0,this._refresh=void 0,this._urlParser=void 0,this._props=t,this._refresh=n,this._urlParser=new Ka(t),this._map=r||{}}return Object(i.a)(e,[{key:"getToolbarActionMap",value:function(){return this._map}},{key:"archive",value:function(e,t,n,r){var a=this;return this._map[_a.ARCHIVE]={action:function(){return"run"===e?a._archiveRun(t(),n,r):a._archiveExperiments(t(),n,r)},disabled:!n,disabledTitle:n?void 0:"Select at least one resource to archive",id:"archiveBtn",title:"\u5b58\u6863",tooltip:"\u5b58\u6863"},this}},{key:"cloneRun",value:function(e,t){var n=this;return this._map[_a.CLONE_RUN]={action:function(){return n._cloneRun(e())},disabled:!t,disabledTitle:t?void 0:"Select a run to clone",id:"cloneBtn",style:{minWidth:100},title:"\u590d\u5236RUN",tooltip:"\u590d\u5236RUN"},this}},{key:"cloneRecurringRun",value:function(e,t){var n=this;return this._map[_a.CLONE_RECURRING_RUN]={action:function(){return n._cloneRun(e(),!0)},disabled:!t,disabledTitle:t?void 0:"Select a recurring run to clone",id:"cloneBtn",title:"\u590d\u5236 recurring run",tooltip:"\u590d\u5236 recurring run"},this}},{key:"retryRun",value:function(e,t,n){var r=this;return this._map[_a.RETRY]={action:function(){return r._retryRun(e(),t,n)},disabled:!t,disabledTitle:t?void 0:"Select at least one resource to retry",id:"retryBtn",title:"\u91cd\u8bd5",tooltip:"\u91cd\u8bd5"},this}},{key:"collapseSections",value:function(e){return this._map[_a.COLLAPSE]={action:e,icon:Va.a,id:"collapseBtn",title:"\u6536\u8d77",tooltip:"\u6536\u8d77\u6240\u6709\u7ae0\u8282"},this}},{key:"compareRuns",value:function(e){var t=this;return this._map[_a.COMPARE]={action:function(){return t._compareRuns(e())},disabled:!0,disabledTitle:"Select multiple runs to compare",id:"compareBtn",style:{minWidth:125},title:"\u5bf9\u6bd4 runs",tooltip:"Compare up to 10 selected runs"},this}},{key:"delete",value:function(e,t,n,r){var a=this;return this._map[_a.DELETE_RUN]={action:function(){return"pipeline"===t?a._deletePipeline(e(),r,n):"pipeline version"===t?a._deletePipelineVersion(e(),r,n):"run"===t?a._deleteRun(e(),r,n):a._deleteRecurringRun(e()[0],r,n)},disabled:!r,disabledTitle:r?void 0:"Select at least one ".concat(t," to delete"),id:"deleteBtn",title:"\u5220\u9664",tooltip:"\u5220\u9664"},this}},{key:"deletePipelinesAndPipelineVersions",value:function(e,t,n,r){var a=this;return this._map[_a.DELETE_RUN]={action:function(){a._dialogDeletePipelinesAndPipelineVersions(e(),t(),n)},disabled:!r,disabledTitle:r?void 0:"Select at least one pipeline and/or one pipeline version to delete",id:"deletePipelinesAndPipelineVersionsBtn",title:"\u5220\u9664",tooltip:"\u5220\u9664"},this}},{key:"disableRecurringRun",value:function(e){var t=this;return this._map[_a.DISABLE_RECURRING_RUN]={action:function(){return t._setRecurringRunEnabledState(e(),!1)},disabled:!0,disabledTitle:"Run schedule already disabled",id:"disableBtn",title:"\u7981\u7528",tooltip:"Disable the run's trigger"},this}},{key:"enableRecurringRun",value:function(e){var t=this;return this._map[_a.ENABLE_RECURRING_RUN]={action:function(){return t._setRecurringRunEnabledState(e(),!0)},disabled:!0,disabledTitle:"Run schedule already enabled",id:"enableBtn",title:"\u542f\u7528",tooltip:"Enable the run's trigger"},this}},{key:"expandSections",value:function(e){return this._map[_a.EXPAND]={action:e,icon:za.a,id:"expandBtn",title:"\u5c55\u5f00",tooltip:"Expand all sections"},this}},{key:"newExperiment",value:function(e){var t=this;return this._map[_a.NEW_EXPERIMENT]={action:function(){return t._createNewExperiment(e?e():"")},icon:Ua.a,id:"newExperimentBtn",outlined:!0,style:{minWidth:185},title:"\u65b0\u5efa\u5b9e\u9a8c",tooltip:"Create a new experiment"},this}},{key:"newRun",value:function(e){var t=this;return this._map[_a.NEW_RUN]={action:function(){return t._createNewRun(!1,e?e():void 0)},icon:Ua.a,id:"createNewRunBtn",outlined:!0,primary:!0,style:{minWidth:130},title:"\u65b0\u5efa\u8fd0\u884c",tooltip:"\u65b0\u5efa\u8fd0\u884c"},this}},{key:"newRunFromPipelineVersion",value:function(e,t){var n=this;return this._map[_a.NEW_RUN_FROM_PIPELINE_VERSION]={action:function(){return n._createNewRunFromPipelineVersion(e(),t())},icon:Ua.a,id:"createNewRunBtn",outlined:!0,primary:!0,style:{minWidth:130},title:"\u65b0\u5efa\u8fd0\u884c",tooltip:"\u65b0\u5efa\u8fd0\u884c"},this}},{key:"newRecurringRun",value:function(e){var t=this;return this._map[_a.NEW_RECURRING_RUN]={action:function(){return t._createNewRun(!0,e)},icon:Ua.a,id:"createNewRecurringRunBtn",outlined:!0,style:{minWidth:195},title:"\u65b0\u5efa\u5faa\u73af\u8fd0\u884c",tooltip:"\u65b0\u5efa\u5faa\u73af\u8fd0\u884c"},this}},{key:"newPipelineVersion",value:function(e,t){var n=this;return this._map[_a.NEW_PIPELINE_VERSION]={action:function(){return n._createNewPipelineVersion(t?t():"")},icon:Ua.a,id:"createPipelineVersionBtn",outlined:!0,style:{minWidth:160},title:e,tooltip:"Upload pipeline version"},this}},{key:"refresh",value:function(e){return this._map[_a.REFRESH]={action:e,id:"refreshBtn",title:"\u5237\u65b0",tooltip:"\u5237\u65b0\u5217\u8868"},this}},{key:"restore",value:function(e,t,n,r){var a=this;return this._map[_a.RESTORE]={action:function(){return"run"===e?a._restore(t(),n,r):a._restoreExperiments(t(),n,r)},disabled:!n,disabledTitle:n?void 0:"Select at least one resource to restore",id:"restoreBtn",title:"\u8fd8\u539f",tooltip:"\u8fd8\u539f"},this}},{key:"terminateRun",value:function(e,t,n){var r=this;return this._map[_a.TERMINATE_RUN]={action:function(){return r._terminateRun(e(),t,n)},disabled:!t,disabledTitle:t?void 0:"Select at least one run to terminate",id:"terminateRunBtn",title:"\u7ec8\u6b62",tooltip:"\u7ec8\u6b62\u6267\u884c\u4e2d\u7684RUN"},this}},{key:"upload",value:function(e){return this._map[_a.UPLOAD_PIPELINE]={action:e,icon:Ua.a,id:"uploadBtn",outlined:!0,style:{minWidth:160},title:"\u4e0a\u4f20 pipeline\u5de5\u4f5c\u6d41",tooltip:"\u4e0a\u4f20 pipeline\u5de5\u4f5c\u6d41"},this}},{key:"_cloneRun",value:function(e,t){if(1===e.length){var n,r,a=e[0];if(t)r={},Object(qt.a)(r,bl.cloneFromRecurringRun,a||""),Object(qt.a)(r,bl.isRecurring,"1"),n=r;else n=Object(qt.a)({},bl.cloneFromRun,a||"");var i=this._urlParser.build(n);this._props.history.push(xl.NEW_RUN+i)}}},{key:"_retryRun",value:function(e,t,n){this._dialogActionHandler(e,"\u91cd\u8bd5\u8fd0\u884c?",t,(function(e){return da.runServiceApi.retryRun(e)}),n,"Retry","run")}},{key:"_archiveRun",value:function(e,t,n){this._dialogActionHandler(e,"Run".concat(gt(e)," will be moved to the Archive section, where you can still view ")+"".concat(1===e.length?"its":"their"," details. Please note that the run will not ")+"be stopped if it's running when it's archived. Use the Restore action to restore the "+"run".concat(gt(e)," to ").concat(1===e.length?"its":"their"," original location."),t,(function(e){return da.runServiceApi.archiveRun(e)}),n,"Archive","run")}},{key:"_restore",value:function(e,t,n){this._dialogActionHandler(e,"Do you want to restore ".concat(1===e.length?"this run to its":"these runs to their"," original location?"),t,(function(e){return da.runServiceApi.unarchiveRun(e)}),n,"Restore","run")}},{key:"_restoreExperiments",value:function(e,t,n){this._dialogActionHandler(e,"Do you want to restore ".concat(1===e.length?"this experiment to its":"these experiments to their"," original location? All runs and jobs in ").concat(1===e.length?"this experiment":"these experiments"," will stay at their current locations in spite that ").concat(1===e.length?"this experiment":"these experiments"," will be moved to ").concat(1===e.length?"its":"their"," original location").concat(gt(e),"."),t,(function(e){return da.experimentServiceApi.unarchiveExperiment(e)}),n,"Restore","experiment")}},{key:"_deletePipeline",value:function(e,t,n){this._dialogActionHandler(e,"Do you want to delete ".concat(1===e.length?"this Pipeline":"these Pipelines","? This action cannot be undone."),t,(function(e){return da.pipelineServiceApi.deletePipeline(e)}),n,"Delete","pipeline")}},{key:"_deletePipelineVersion",value:function(e,t,n){this._dialogActionHandler(e,"Do you want to delete ".concat(1===e.length?"this Pipeline Version":"these Pipeline Versions","? This action cannot be undone."),t,(function(e){return da.pipelineServiceApi.deletePipelineVersion(e)}),n,"Delete","pipeline version")}},{key:"_deleteRecurringRun",value:function(e,t,n){this._dialogActionHandler([e],"Do you want to delete this recurring run config? This action cannot be undone.",t,(function(e){return da.jobServiceApi.deleteJob(e)}),n,"Delete","recurring run config")}},{key:"_terminateRun",value:function(e,t,n){this._dialogActionHandler(e,"Do you want to terminate this run? This action cannot be undone. This will terminate any running pods, but they will not be deleted.",t,(function(e){return da.runServiceApi.terminateRun(e)}),n,"Terminate","run")}},{key:"_deleteRun",value:function(e,t,n){this._dialogActionHandler(e,"Do you want to delete the selected runs? This action cannot be undone.",t,(function(e){return da.runServiceApi.deleteRun(e)}),n,"Delete","run")}},{key:"_dialogActionHandler",value:function(e,t,n,r,a,i,s){var o=this,c=function(t){return o._dialogClosed(t,e,i,s,n,r,a)};this._props.updateDialog({buttons:[{onClick:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),text:"\u53d6\u6d88"},{onClick:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),text:i}],content:t,onClose:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),title:"".concat(i," ").concat(n?"this":e.length," ").concat(s).concat(n?"":gt(e.length),"?")})}},{key:"_dialogClosed",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r,a,i,s,o){var c,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return c=[],l=[],e.next=5,Promise.all(n.map(function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(t);case 3:e.next=12;break;case 5:return e.prev=5,e.t0=e.catch(0),c.push(t),e.next=10,ft(e.t0);case 10:n=e.sent,l.push("Failed to ".concat(r.toLowerCase()," ").concat(a,": ").concat(t,' with error: "').concat(n,'"'));case 12:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()));case 5:(u=n.length-c.length)>0&&(this._props.updateSnackbar({message:"".concat(r," succeeded for ").concat(i?"this":u," ").concat(a).concat(i?"":gt(u)),open:!0}),i||this._refresh()),c.length>0&&this._props.updateDialog({buttons:[{text:"Dismiss"}],content:l.join("\n\n"),title:"Failed to ".concat(r.toLowerCase()," ").concat(i?"":c.length+" ").concat(a).concat(i?"":gt(c))}),o(c,!c.length);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i,s,o){return e.apply(this,arguments)}}()},{key:"_compareRuns",value:function(e){var t=e;if(t.length>1&&t.length<=10){var n=e.join(","),r=this._urlParser.build(Object(qt.a)({},bl.runlist,n));this._props.history.push(xl.COMPARE+r)}}},{key:"_createNewExperiment",value:function(e){var t=e?this._urlParser.build(Object(qt.a)({},bl.pipelineId,e)):"";this._props.history.push(xl.NEW_EXPERIMENT+t)}},{key:"_createNewRun",value:function(e,t){var n=this._urlParser.build(Object.assign(Object(qt.a)({},bl.experimentId,t||""),e?Object(qt.a)({},bl.isRecurring,"1"):{}));this._props.history.push(xl.NEW_RUN+n)}},{key:"_createNewRunFromPipelineVersion",value:function(e,t){var n,r="",a=this._urlParser.get(bl.fromRunId);a?r=this._urlParser.build(Object.assign(Object(qt.a)({},bl.fromRunId,a))):r=this._urlParser.build((n={},Object(qt.a)(n,bl.pipelineId,e||""),Object(qt.a)(n,bl.pipelineVersionId,t||""),n));this._props.history.push(xl.NEW_RUN+r)}},{key:"_setRecurringRunEnabledState",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r,a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=21;break}return r=this._props.toolbarProps.actions,a=n?_a.ENABLE_RECURRING_RUN:_a.DISABLE_RECURRING_RUN,r[a].busy=!0,this._props.updateToolbar({actions:r}),e.prev=5,e.next=8,n?da.jobServiceApi.enableJob(t):da.jobServiceApi.disableJob(t);case 8:this._refresh(),e.next=17;break;case 11:return e.prev=11,e.t0=e.catch(5),e.next=15,ft(e.t0);case 15:i=e.sent,this._props.updateDialog({buttons:[{text:"Dismiss"}],content:i,title:"Failed to ".concat(n?"enable":"disable"," recurring run")});case 17:return e.prev=17,r[a].busy=!1,this._props.updateToolbar({actions:r}),e.finish(17);case 21:case"end":return e.stop()}}),e,this,[[5,11,17,21]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_createNewPipelineVersion",value:function(e){var t=e?this._urlParser.build(Object(qt.a)({},bl.pipelineId,e)):"";this._props.history.push(xl.NEW_PIPELINE_VERSION+t)}},{key:"_dialogDeletePipelinesAndPipelineVersions",value:function(e,t,n){var r=this,a=this._deepCountDictionary(t),i=this._nouns(e.length,"pipeline","pipelines"),s=this._nouns(a,"pipeline version","pipeline versions"),o=""!==i&&""!==s?" and ":"";this._props.updateDialog({buttons:[{onClick:function(){var a=Object(h.a)(p.a.mark((function a(){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r._deletePipelinesAndPipelineVersions(!1,e,t,n);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),text:"\u53d6\u6d88"},{onClick:function(){var a=Object(h.a)(p.a.mark((function a(){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r._deletePipelinesAndPipelineVersions(!0,e,t,n);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),text:"\u5220\u9664"}],onClose:function(){var a=Object(h.a)(p.a.mark((function a(){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r._deletePipelinesAndPipelineVersions(!1,e,t,n);case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),title:"Delete "+i+o+s+"?"})}},{key:"_deletePipelinesAndPipelineVersions",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r,a){var i,s,o,c,l,u,f,m,v,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return i=new Set(n),s=[],o=[],e.next=7,Promise.all(n.map(function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,da.pipelineServiceApi.deletePipeline(t);case 3:e.next=13;break;case 5:return e.prev=5,e.t0=e.catch(0),s.push(t),i.delete(t),e.next=11,ft(e.t0);case 11:n=e.sent,o.push("Failed to delete pipeline: ".concat(t,' with error: "').concat(n,'"'));case 13:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()));case 7:return c=Object.fromEntries(Object.entries(r).filter((function(e){var t=Object(d.a)(e,2),n=t[0];t[1];return!i.has(n)}))),l={},e.next=11,Promise.all(Object.keys(c).map((function(e){c[e].map(function(){var t=Object(h.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l[e]=[],t.next=4,da.pipelineServiceApi.deletePipelineVersion(n);case 4:t.next=13;break;case 6:return t.prev=6,t.t0=t.catch(0),l[e].push(n),t.next=11,ft(t.t0);case 11:r=t.sent,o.push("Failed to delete pipeline version: ".concat(n,' with error: "').concat(r,'"'));case 13:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}())})));case 11:u=this._deepCountDictionary(r),f=this._deepCountDictionary(l),m=this._nouns(i.size,"pipeline","pipelines"),v=this._nouns(u-f,"pipeline version","pipeline versions"),b=""!==m&&""!==v?" and ":"",""===m&&""===v||this._props.updateSnackbar({message:"Deletion succeeded for "+m+b+v,open:!0}),(s.length>0||f>0)&&this._props.updateDialog({buttons:[{text:"Dismiss"}],content:o.join("\n\n"),title:"Failed to delete some pipelines and/or some pipeline versions"}),a(void 0,s),Object.keys(r).map((function(e){return a(e,l[e])})),this._refresh();case 21:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_nouns",value:function(e,t,n){return e<=0?"":1===e?"".concat(e," ")+t:"".concat(e," ")+n}},{key:"_deepCountDictionary",value:function(e){return Object.keys(e).reduce((function(t,n){return t+e[n].length}),0)}},{key:"_archiveExperiments",value:function(e,t,n){this._dialogActionHandler(e,"Experiment".concat(gt(e)," will be moved to the Archive section, where you can still view").concat(1===e.length?"its":"their"," details. All runs in this archived experiment will be archived. All jobs in this archived experiment will be disabled. Use the Restore action on the experiment details page to restore the experiment").concat(gt(e)," to ").concat(1===e.length?"its":"their"," original location."),t,(function(e){return da.experimentServiceApi.archiveExperiment(e)}),n,"Archive","experiment")}}]),e}(),qa=n(454),Ha=n.n(qa),Ga=n(139),Xa=function(e){var t=e.height,n=e.Icon,r=e.iconColor,a=e.tooltip,i=e.width;return(c.createElement($e.a,{title:a},c.createElement(n,{style:{color:r,height:t||16,width:i||16}})))},Ja=n(450),Ya=n.n(Ja),$a=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.style;return(c.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 18 18"},c.createElement("g",{transform:"translate(-450, -307)",fill:e.color,fillRule:"nonzero"},c.createElement("g",{transform:"translate(450, 266)"},c.createElement("g",{transform:"translate(0, 41)"},c.createElement("path",{d:"M9,4 C6.23857143,4 4,6.23857143 4,9 C4,11.7614286 6.23857143,14 9,14\r C11.7614286,14 14,11.7614286 14,9 C14,8.40214643 13.8950716,7.8288007\r 13.702626,7.29737398 L15.2180703,5.78192967 C15.7177126,6.74539838\r 16,7.83973264 16,9 C16,12.866 12.866,16 9,16 C5.134,16 2,12.866 2,9 C2,5.134\r 5.134,2 9,2 C10.933,2 12.683,2.7835 13.94975,4.05025 L12.7677679,5.23223214\r L9,9 L9,4 Z"}))))))}}]),n}(c.Component),Qa=n(451),Za=n.n(Qa),ei=n(452),ti=n.n(ei),ni=n(453),ri=n.n(ni),ai=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.style;return(c.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 18 18"},c.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},c.createElement("g",{transform:"translate(-1.000000, -1.000000)"},c.createElement("polygon",{points:"0 0 18 0 18 18 0 18"}),c.createElement("path",{d:"M8.9925,1.5 C4.8525,1.5 1.5,4.86 1.5,9 C1.5,13.14 4.8525,16.5 8.9925,16.5\r C13.14,16.5 16.5,13.14 16.5,9 C16.5,4.86 13.14,1.5 8.9925,1.5 Z M9,15 C5.685,15\r 3,12.315 3,9 C3,5.685 5.685,3 9,3 C12.315,3 15,5.685 15,9 C15,12.315 12.315,15 9,15 Z",fill:e.color,fillRule:"nonzero"}),c.createElement("polygon",{fill:e.color,fillRule:"nonzero",points:"6 6 12 6 12 12 6 12"})))))}}]),n}(c.Component),ii=n(233),si=n.n(ii);function oi(e,t,n,a){e=O(e,a);var i=si.a,s=ne,o="Unknown status";switch(e){case r.ERROR:i=En.a,s=Q,o="Error while running this resource";break;case r.FAILED:i=En.a,s=Q,o="Resource failed to execute";break;case r.PENDING:i=Ya.a,s=ve,o="Pending execution";break;case r.RUNNING:i=$a,s=X,o="Running";break;case r.TERMINATING:i=$a,s=X,o="Run is terminating";break;case r.SKIPPED:i=Za.a,o="Execution has been skipped for this resource";break;case r.SUCCEEDED:i=ti.a,s=ce,o="Executed successfully";break;case r.CACHED:i=ri.a,s=ce,o="Execution was skipped and outputs were taken from cache";break;case r.TERMINATED:i=ai,s=le,o="Run was manually terminated";break;case r.UNKNOWN:break;default:pt.verbose("Unknown node phase:",e)}return(c.createElement($e.a,{title:c.createElement("div",null,c.createElement("div",null,o),t&&c.createElement("div",null,"Start: ",ht(t)),n&&c.createElement("div",null,"End: ",ht(n)))},c.createElement("span",{style:{height:18}},c.createElement(i,{style:{color:s,height:18,width:18}}))))}var ci,li=64,ui=172;function pi(e){if(null===e||void 0===e?void 0:e.annotations){var t,n=e.annotations["pipelines.kubeflow.org/task_display_name"];try{t=JSON.parse(e.annotations["pipelines.kubeflow.org/component_spec"]).name}catch(r){}return n||t}}function di(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!e.match(/s3.{0,}\.amazonaws\.com\.?.{0,}/i)}!function(e){e.GCS="gcs",e.HTTP="http",e.HTTPS="https",e.MINIO="minio",e.S3="s3"}(ci||(ci={}));var hi=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"createRuntimeGraph",value:function(e){var t=this,n=new Ga.graphlib.Graph;n.setGraph({}),n.setDefaultEdgeLabel((function(){return{}}));if(!e||!e.status||!e.status.nodes||!e.metadata||!e.metadata.name)return n;var r=e.status.nodes,a=e.metadata.name||"",i=Object.keys(r).find((function(e){return r[e].name==="".concat(a,".onExit")}));i&&this.getOutboundNodes(e,a).forEach((function(e){return n.setEdge(e,i)})),Object.values(r).length>1&&delete r[a];return Object.values(r).forEach((function(r){var i=r.displayName||r.id;if(r.name==="".concat(a,".onExit")&&(i="onExit - ".concat(r.templateName)),e.spec&&e.spec.templates){var s=e.spec.templates.find((function(e){return!!e&&!!e.name&&e.name===r.templateName}));i=pi(null===s||void 0===s?void 0:s.metadata)||i}n.setNode(r.id,Object(Dt.a)({height:li,icon:oi(k(r),r.startedAt,r.finishedAt,r.message),label:i,statusColoring:w(r.phase,r.message),width:ui},r)),x(r.phase)||t.isVirtual(r)||(n.setNode(r.id+"-running-placeholder",{height:28,icon:Xa({Icon:Ha.a,height:24,iconColor:ve,tooltip:"More nodes may appear here",width:24}),isPlaceholder:!0,width:28}),n.setEdge(r.id,r.id+"-running-placeholder",{color:ve,isPlaceholder:!0}))})),Object.keys(r).forEach((function(e){r[e].children&&r[e].children.forEach((function(t){r[t]&&n.setEdge(e,t)}))})),Object.keys(r).forEach((function(e){!r[e].boundaryID||!r[r[e].boundaryID]||n.inEdges(e)&&n.inEdges(e).length||r[e].boundaryID===a||n.setEdge(r[e].boundaryID,e)})),n.nodes().forEach((function(e){if(r[e]&&t.isVirtual(r[e])){var a=(n.inEdges(e)||[]).map((function(e){return e.v}));a.forEach((function(t){return n.removeEdge(t,e)})),(n.outEdges(e)||[]).forEach((function(e){n.removeEdge(e.v,e.w),a.forEach((function(t){return n.setEdge(t,e.w)}))})),n.removeNode(e)}})),n}},{key:"getParameters",value:function(e){return e&&e.spec&&e.spec.arguments&&e.spec.arguments.parameters||[]}},{key:"getNodeInputOutputParams",value:function(e,t){var n=[],r=[];if(!t||!e||!e.status||!e.status.nodes||!e.status.nodes[t])return{inputParams:n,outputParams:r};var a=e.status.nodes[t],i=a.inputs,s=a.outputs;return i&&i.parameters&&(n=i.parameters.map((function(e){return[e.name,e.value||""]}))),s&&s.parameters&&(r=s.parameters.map((function(e){return[e.name,e.value||""]}))),{inputParams:n,outputParams:r}}},{key:"getNodeInputOutputArtifacts",value:function(e,t){var n=[],r=[];if(!t||!e||!e.status||!e.status.nodes||!e.status.nodes[t])return{inputArtifacts:n,outputArtifacts:r};var a=e.status.nodes[t],i=a.inputs,s=a.outputs;return i&&i.artifacts&&(n=i.artifacts.map((function(e){return[e.name,e.s3]}))),s&&s.artifacts&&(r=s.artifacts.map((function(e){return[e.name,e.s3]}))),{inputArtifacts:n,outputArtifacts:r}}},{key:"getNodeVolumeMounts",value:function(e,t){if(!e||!e.status||!e.status.nodes||!e.status.nodes[t]||!e.spec||!e.spec.templates)return[];var n=e.status.nodes[t],r=e.spec.templates.find((function(e){return!!e&&!!e.name&&e.name===n.templateName})),a=[];return r&&r.container&&r.container.volumeMounts&&(a=r.container.volumeMounts.map((function(e){return[e.mountPath,e.name]}))),a}},{key:"getNodeManifest",value:function(e,t){if(!e||!e.status||!e.status.nodes||!e.status.nodes[t]||!e.spec||!e.spec.templates)return[];var n=e.status.nodes[t],r=e.spec.templates.find((function(e){return!!e&&!!e.name&&e.name===n.templateName})),a=[];return r&&r.resource&&r.resource.action&&r.resource.manifest&&(a=[[r.resource.action,r.resource.manifest]]),a}},{key:"loadNodeOutputPaths",value:function(e){var t=[];return e&&e.outputs&&(e.outputs.artifacts||[]).filter((function(e){return"mlpipeline-ui-metadata"===e.name&&!!e.s3})).forEach((function(e){return t.push({bucket:e.s3.bucket,key:e.s3.key,source:di(e.s3.endpoint)?ci.S3:ci.MINIO})})),t}},{key:"loadAllOutputPaths",value:function(e){return this.loadAllOutputPathsWithStepNames(e).map((function(e){return e.path}))}},{key:"loadAllOutputPathsWithStepNames",value:function(e){var t=this,n=[];return e&&e.status&&e.status.nodes&&Object.keys(e.status.nodes).forEach((function(r){return t.loadNodeOutputPaths(e.status.nodes[r]).map((function(t){return n.push({stepName:e.status.nodes[r].displayName,path:t})}))})),n}},{key:"parseStoragePath",value:function(e){if(e.startsWith("gs://")){var t=e.substr("gs://".length).split("/");return{bucket:t[0],key:t.slice(1).join("/"),source:ci.GCS}}if(e.startsWith("minio://")){var n=e.substr("minio://".length).split("/");return{bucket:n[0],key:n.slice(1).join("/"),source:ci.MINIO}}if(e.startsWith("s3://")){var r=e.substr("s3://".length).split("/");return{bucket:r[0],key:r.slice(1).join("/"),source:ci.S3}}if(e.startsWith("http://")){var a=e.substr("http://".length).split("/");return{bucket:a[0],key:a.slice(1).join("/"),source:ci.HTTP}}if(e.startsWith("https://")){var i=e.substr("https://".length).split("/");return{bucket:i[0],key:i.slice(1).join("/"),source:ci.HTTPS}}throw new Error("Unsupported storage path: "+e)}},{key:"getOutboundNodes",value:function(e,t){var n=[];if(!e||!e.status||!e.status.nodes)return n;var r=e.status.nodes[t];if(!r)return n;if("Pod"===r.type)return[r.id];var a,i=Object(Sn.a)(r.outboundNodes||[]);try{for(i.s();!(a=i.n()).done;){var s=a.value,o=e.status.nodes[s];o&&"Pod"===o.type?n.push(s):n=n.concat(this.getOutboundNodes(e,s))}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"isVirtual",value:function(e){return("StepGroup"===e.type||"DAG"===e.type||"TaskGroup"===e.type)&&!!e.boundaryID}},{key:"getWorkflowError",value:function(e){return e&&e.status&&e.status.message&&(e.status.phase===r.ERROR||e.status.phase===r.FAILED)?e.status.message:""}}]),e}();function fi(e){if(!e)return[];try{var t=JSON.parse(e.workflow_manifest);return hi.getParameters(t)}catch(n){return pt.error("Failed to parse runtime workflow manifest",n),[]}}function mi(e){return vi(e)[0]||null}function vi(e){return(e&&e.resource_references||[]).filter((function(e){return e.key&&e.key.type&&e.key.type===Vr.EXPERIMENT||!1}))}function bi(e){return e.reduce((function(e,t){return t&&t.metrics?(t.metrics.forEach((function(t){if(t.name&&void 0!==t.number_value&&!isNaN(t.number_value)){var n=e.get(t.name);n||(n={count:0,maxValue:Number.MIN_VALUE,minValue:Number.MAX_VALUE,name:t.name},e.set(n.name,n)),n.count++,n.minValue=Math.min(n.minValue,t.number_value),n.maxValue=Math.max(n.maxValue,t.number_value)}})),e):e}),new Map)}var gi={extractMetricMetadata:function(e){var t=Array.from(bi(e).values());return Object(f.orderBy)(t,["count","name"],["desc","asc"])},getAllExperimentReferences:vi,getFirstExperimentReference:mi,getFirstExperimentReferenceId:function(e){var t=mi(e);return t&&t.key&&t.key.id||null},getFirstExperimentReferenceName:function(e){var t=mi(e);return t&&t.name||null},getNamespaceReferenceName:function(e){var t=e&&e.resource_references&&e.resource_references.find((function(e){return e.relationship===Fr.OWNER&&e.key&&e.key.type===Vr.NAMESPACE}));return t&&t.key&&t.key.id},getParametersFromRun:function(e){return fi(e.pipeline_runtime)},getParametersFromRuntime:fi,getPipelineId:function(e){return e&&e.pipeline_spec&&e.pipeline_spec.pipeline_id||null},getPipelineIdFromApiPipelineVersion:function(e){return e&&e.resource_references&&e.resource_references.some((function(e){return e.key&&e.key.type&&e.key.id&&e.key.type===Vr.PIPELINE}))?e.resource_references.find((function(e){return e.key&&e.key.type&&e.key.id&&e.key.type===Vr.PIPELINE})).key.id:void 0},getPipelineName:function(e){return e&&e.pipeline_spec&&e.pipeline_spec.pipeline_name||null},getPipelineVersionId:function(e){return e&&e.resource_references&&e.resource_references.some((function(e){return e.key&&e.key.type&&e.key.type===Vr.PIPELINEVERSION}))?e.resource_references.find((function(e){return e.key&&e.key.type&&e.key.type===Vr.PIPELINEVERSION})).key.id:null},getRecurringRunId:function(e){if(!e)return"";var t,n=Object(Sn.a)(e.resource_references||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.key&&r.key.type===Vr.JOB)return r.key.id||""}}catch(a){n.e(a)}finally{n.f()}return""},getWorkflowManifest:function(e){return e&&e.pipeline_spec&&e.pipeline_spec.workflow_manifest||null},runsToMetricMetadataMap:bi};var Ei={getMetricDisplayString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return e&&void 0!==e.number_value?e.format===zr.PERCENTAGE?(100*e.number_value).toFixed(t)+"%":e.number_value.toFixed(t):""}},yi=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"getParamsCompareProps",value:function(e,t){e.length!==t.length&&pt.error("Numbers of passed in runs and workflows do not match");var n=Object(f.chain)(Object(f.flatten)(t.map((function(e){return hi.getParameters(e)})))).countBy((function(e){return e.name})).map((function(e,t){return{name:t,count:e}})).orderBy("count","desc").map((function(e){return e.name})).value();return{rows:n.map((function(e){return t.map((function(t){var n=hi.getParameters(t).find((function(t){return t.name===e}));return n&&n.value||""}))})),xLabels:e.map((function(e){return e.run.name})),yLabels:n}}},{key:"multiRunMetricsCompareProps",value:function(e){var t=gi.runsToMetricMetadataMap(e),n=Array.from(t.keys());return{rows:n.map((function(t){return e.map((function(e){return Ei.getMetricDisplayString((e.metrics||[]).find((function(e){return e.name===t})))}))})),xLabels:e.map((function(e){return e.name})),yLabels:n}}},{key:"singleRunToMetricsCompareProps",value:function(e,t){var n=[],r=[],a=[];if(e){var i=new Map,s=new Set;(e.metrics||[]).forEach((function(e){if(e.name&&e.node_id&&void 0!==e.number_value&&!isNaN(e.number_value)){var t=i.get(e.name)||new Map;t.set(e.node_id,Ei.getMetricDisplayString(e)),i.set(e.name,t),s.add(e.node_id)}})),r=Array.from(i.keys()),n=Array.from(s.keys()).map((function(e){return a.push(t&&t.status.nodes[e].displayName||e),r.map((function(t){return i.get(t).get(e)||""}))}))}return{rows:n,xLabels:r,yLabels:a}}}]),e}(),xi=n(239),wi=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"load",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r,a,i,s,o,c=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,e.next=4,da.readFile(t,n);case 4:if(!(a=e.sent)){e.next=16;break}if(e.prev=6,void 0!==(r=JSON.parse(a).outputs)){e.next=10;break}throw new Error('"outputs" field required by not found on metadata file');case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(6),pt.error("Could not parse metadata file at: ".concat(t.key,". Error: ").concat(e.t0)),e.abrupt("return",[]);case 16:e.next=24;break;case 18:return e.prev=18,e.t1=e.catch(1),e.next=22,ft(e.t1);case 22:i=e.sent,pt.error("Error loading run outputs:",i);case 24:return s=function(){var e=Object(h.a)(p.a.mark((function e(t,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ji(t,r,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.next=27,Promise.all(r.map(function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===an.CONFUSION_MATRIX?3:e.t0===an.MARKDOWN?6:e.t0===an.TABLE?9:e.t0===an.TENSORBOARD?12:e.t0===an.WEB_APP?15:e.t0===an.ROC?18:21;break;case 3:return e.next=5,c.buildConfusionMatrixConfig(t,s);case 5:return e.abrupt("return",e.sent);case 6:return e.next=8,c.buildMarkdownViewerConfig(t,s);case 8:return e.abrupt("return",e.sent);case 9:return e.next=11,c.buildPagedTableConfig(t,s);case 11:return e.abrupt("return",e.sent);case 12:return e.next=14,c.buildTensorboardConfig(t,n);case 14:return e.abrupt("return",e.sent);case 15:return e.next=17,c.buildHtmlViewerConfig(t,s);case 17:return e.abrupt("return",e.sent);case 18:return e.next=20,c.buildRocCurveConfig(t,s);case 20:return e.abrupt("return",e.sent);case 21:return pt.error("Unknown plot type: "+t.type),e.abrupt("return",null);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 27:return o=e.sent,e.abrupt("return",o.filter((function(e){return!!e})));case 29:case"end":return e.stop()}}),e,null,[[1,18],[6,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"buildConfusionMatrixConfig",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r,a,i,s,o,c,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.source){e.next=2;break}throw new Error('Malformed metadata, property "source" is required.');case 2:if(t.labels){e.next=4;break}throw new Error('Malformed metadata, property "labels" is required.');case 4:if(t.schema){e.next=6;break}throw new Error('Malformed metadata, property "schema" missing.');case 6:if(Array.isArray(t.schema)){e.next=8;break}throw new Error('"schema" must be an array of {"name": string, "type": string} objects');case 8:return e.next=10,n(t.source,t.storage);case 10:if(r=e.sent,a=Object(xi.a)(r.trim()),i=t.labels,s={},o=0,i.forEach((function(e){s[e]=o++})),Math.pow(i.length,2)===a.length){e.next=18;break}throw new Error("Data dimensions ".concat(a.length," do not match the number of labels passed ").concat(i.length));case 18:return c=Array.from(Array(i.length),(function(){return new Array(i.length)})),a.forEach((function(e){var t=Object(d.a)(e,3),n=t[0],r=t[1],a=t[2],i=s[n.trim()],o=s[r.trim()];c[i][o]=Number.parseInt(a,10)})),l=t.schema.map((function(e){if(!e.name)throw new Error('Each item in the "schema" array must contain a "name" field');return e.name})),u=[l[0],l[1]],e.abrupt("return",{axes:u,data:c,labels:i,type:an.CONFUSION_MATRIX});case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"buildPagedTableConfig",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r,a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.source){e.next=2;break}throw new Error('Malformed metadata, property "source" is required.');case 2:if(t.header){e.next=4;break}throw new Error('Malformed metadata, property "header" is required.');case 4:if(t.format){e.next=6;break}throw new Error('Malformed metadata, property "format" is required.');case 6:return r=[],a=t.header||[],e.next=10,n(t.source,t.storage);case 10:i=e.sent,e.t0=t.format,e.next="csv"===e.t0?14:16;break;case 14:return r=Object(xi.a)(i.trim()).map((function(e){return e.map((function(e){return e.trim()}))})),e.abrupt("break",17);case 16:throw new Error("Unsupported table format: "+t.format);case 17:return e.abrupt("return",{data:r,labels:a,type:an.TABLE});case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"buildTensorboardConfig",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.source){e.next=2;break}throw new Error('Malformed metadata, property "source" is required.');case 2:if(n){e.next=4;break}throw new Error("Namespace is required.");case 4:return hi.parseStoragePath(t.source),e.abrupt("return",{type:an.TENSORBOARD,url:t.source,namespace:n});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"buildHtmlViewerConfig",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.source){e.next=2;break}throw new Error('Malformed metadata, property "source" is required.');case 2:return e.next=4,n(t.source,t.storage);case 4:return e.t0=e.sent,e.t1=an.WEB_APP,e.abrupt("return",{htmlContent:e.t0,type:e.t1});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"buildTFXArtifactViewerConfig",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,i,s,o,c,l,u,f,m,v;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.namespace,r=t.execution,a=t.reportProgress,(i=void 0===a?function(){return null}:a)(10),e.next=4,Promise.all([Ni(),Oi(r)]);case 4:if(s=e.sent,o=Object(d.a)(s,2),c=o[0],l=o[1],0!==c.length&&0!==l.length){e.next=10;break}return e.abrupt("return",[]);case 10:return i(70),u=[],Ri("ExampleStatistics",c,l).forEach((function(e){var t=e+"/eval/stats_tfrecord",r=e+"/train/stats_tfrecord";u=u.concat([t,r].map(function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ii(t,n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))})),f=Ri("Schema",c,l),u=u.concat(f.map((function(e){return _i({script:["import tensorflow_data_validation as tfdv","schema = tfdv.load_schema_text('".concat(e+="/schema.pbtxt","')"),"tfdv.display_schema(schema)"],namespace:n})}))),m=Ri("ExampleAnomalies",c,l),u=u.concat(m.map((function(e){return _i({script:["import tensorflow_data_validation as tfdv","anomalies = tfdv.load_anomalies_text('".concat(e+="/anomalies.pbtxt","')"),"tfdv.display_anomalies(anomalies)"],namespace:n})}))),v=Ri("ModelEvaluation",c,l),u=u.concat(v.map((function(e){return _i({script:["import io","import json","import tensorflow as tf","import tensorflow_model_analysis as tfma","from ipywidgets.embed import embed_minimal_html","from IPython.core.display import display, HTML","config_file=tf.io.gfile.GFile('".concat(e+"/eval_config.json","', 'r')"),"config=json.loads(config_file.read())","featureKeys=list(filter(lambda x: 'featureKeys' in x, config['evalConfig']['slicingSpecs']))","columns=[] if len(featureKeys) == 0 else featureKeys[0]['featureKeys']","slicing_spec = tfma.slicer.SingleSliceSpec(columns=columns)","eval_result = tfma.load_eval_result('".concat(e,"')"),"slicing_metrics_view = tfma.view.render_slicing_metrics(eval_result, slicing_spec=slicing_spec)","view = io.StringIO()","embed_minimal_html(view, views=[slicing_metrics_view], title='Slicing Metrics')","display(HTML(view.getvalue()))"],namespace:n})}))),e.abrupt("return",Promise.all(u));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"buildMarkdownViewerConfig",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.source){e.next=2;break}throw new Error('Malformed metadata, property "source" is required.');case 2:return e.next=4,n(t.source,t.storage);case 4:return e.t0=e.sent,e.t1=an.MARKDOWN,e.abrupt("return",{markdownContent:e.t0,type:e.t1});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"buildRocCurveConfig",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r,a,i,s,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.source){e.next=2;break}throw new Error('Malformed metadata, property "source" is required.');case 2:if(t.schema){e.next=4;break}throw new Error('Malformed metadata, property "schema" is required.');case 4:if(Array.isArray(t.schema)){e.next=6;break}throw new Error('Malformed schema, must be an array of {"name": string, "type": string}');case 6:return e.next=8,n(t.source,t.storage);case 8:if(r=e.sent,a=Object(xi.a)(r.trim()),-1!==(i=t.schema.findIndex((function(e){return"fpr"===e.name})))){e.next=13;break}throw new Error('Malformed schema, expected to find a column named "fpr"');case 13:if(-1!==(s=t.schema.findIndex((function(e){return"tpr"===e.name})))){e.next=16;break}throw new Error('Malformed schema, expected to find a column named "tpr"');case 16:if(-1!==(o=t.schema.findIndex((function(e){return e.name.startsWith("threshold")})))){e.next=19;break}throw new Error('Malformed schema, expected to find a column named "threshold"');case 19:return c=a.map((function(e){return{label:e[o].trim(),x:+e[i],y:+e[s]}})),e.abrupt("return",{data:c,type:an.ROC});case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Oi(e){return ki.apply(this,arguments)}function ki(){return(ki=Object(h.a)(p.a.mark((function e(t){var n,r,a,i,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getId()){e.next=3;break}throw new Error("Execution must have an ID");case 3:return(r=new Mt.GetEventsByExecutionIDsRequest).addExecutionIds(n),e.prev=5,e.next=8,Mt.Api.getInstance().metadataStoreService.getEventsByExecutionIDs(r);case 8:a=e.sent,e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(5),e.t0.message="Failed to getExecutionsByExecutionIDs: "+e.t0.message,e.t0;case 15:return i=a.getEventsList().filter((function(e){return e.getType()===Mt.Event.Type.OUTPUT&&e.getArtifactId()})).map((function(e){return e.getArtifactId()})),(s=new Mt.GetArtifactsByIDRequest).setArtifactIdsList(i),e.prev=18,e.next=21,Mt.Api.getInstance().metadataStoreService.getArtifactsByID(s);case 21:o=e.sent,e.next=28;break;case 24:throw e.prev=24,e.t1=e.catch(18),e.t1.message="Failed to getArtifactsByID: "+e.t1.message,e.t1;case 28:return e.abrupt("return",o.getArtifactsList());case 29:case"end":return e.stop()}}),e,null,[[5,11],[18,24]])})))).apply(this,arguments)}function Ni(){return Si.apply(this,arguments)}function Si(){return(Si=Object(h.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Mt.GetArtifactTypesRequest,e.prev=1,e.next=4,Mt.Api.getInstance().metadataStoreService.getArtifactTypes(t);case 4:n=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.message="Failed to getArtifactTypes: "+e.t0.message,e.t0;case 11:return e.abrupt("return",n.getArtifactTypesList());case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function Ri(e,t,n){var r=t.filter((function(t){return t.getName()===e})).map((function(e){return e.getId()}));return n.filter((function(e){return r.includes(e.getTypeId())})).map((function(e){return e.getUri()})).filter((function(e){return e}))}function _i(e){return Ci.apply(this,arguments)}function Ci(){return(Ci=Object(h.a)(p.a.mark((function e(t){var n,r,a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.script,r=t.namespace,a={arguments:JSON.stringify({code:n}),source:"",type:Yr.CUSTOM},e.next=4,da.buildPythonVisualizationConfig(a,r);case 4:if((i=e.sent).htmlContent){e.next=7;break}throw new Error("Failed to build artifact viewer");case 7:return e.abrupt("return",{htmlContent:i.htmlContent,type:an.WEB_APP});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ii(e,t){return Pi.apply(this,arguments)}function Pi(){return(Pi=Object(h.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={source:t,type:Yr.TFDV},e.next=3,da.buildPythonVisualizationConfig(r,n);case 3:if((a=e.sent).htmlContent){e.next=6;break}throw new Error("Failed to build artifact viewer, no value in visualization.htmlContent");case 6:return e.abrupt("return",{htmlContent:a.htmlContent,type:an.WEB_APP});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ji(e,t,n){return Ti.apply(this,arguments)}function Ti(){return(Ti=Object(h.a)(p.a.mark((function e(t,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("inline"!==n){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,da.readFile(hi.parseStoragePath(t),r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ai,Di=Object(W.stylesheet)({metricContainer:{background:"#f6f7f9",marginLeft:6,marginRight:10},metricFill:{background:"#cbf0f8",boxSizing:"border-box",color:"#202124",fontFamily:"Roboto",fontSize:13,textIndent:6}}),Li=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.metric,n=e.metadata;if(!t||void 0===t.number_value)return c.createElement("div",null);var r=Ei.getMetricDisplayString(t),a="";if(t.format===zr.PERCENTAGE)a="calc(".concat(r,")");else{if(!n)return c.createElement("div",null);if(0===n.maxValue&&0===n.minValue)return c.createElement("div",{style:{paddingLeft:6}},r);if(t.number_value-n.minValue<0)return pt.error("Metric ".concat(n.name,"'s value:")+" (".concat(t.number_value,") was lower than the supposed minimum of")+" (".concat(n.minValue,")")),c.createElement("div",{style:{paddingLeft:6}},r);if(n.maxValue-t.number_value<0)return pt.error("Metric ".concat(n.name,"'s value:")+" (".concat(t.number_value,") was greater than the supposed maximum of")+" (".concat(n.maxValue,")")),c.createElement("div",{style:{paddingLeft:6}},r);var i=(t.number_value-n.minValue)/(n.maxValue-n.minValue)*100;a="calc(".concat(i,"%)")}return(c.createElement("div",{className:Di.metricContainer},c.createElement("div",{className:Di.metricFill,style:{width:a}},r)))}}]),n}(c.PureComponent),Mi=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._tableRef=c.createRef(),r._nameCustomRenderer=function(e){return c.createElement($e.a,{title:e.value||"",enterDelay:300,placement:"top-start"},c.createElement(Ut.a,{className:Fe.link,onClick:function(e){return e.stopPropagation()},to:xl.RUN_DETAILS.replace(":"+gl.runId,e.id)},e.value))},r._pipelineVersionCustomRenderer=function(e){if(!e.value||!e.value.usePlaceholder&&!e.value.pipelineId)return c.createElement("div",null,"-");var t=new Ka(r.props).build(Object(qt.a)({},bl.fromRunId,e.id)),n=e.value.usePlaceholder?xl.PIPELINE_DETAILS_NO_VERSION.replace(":"+gl.pipelineId+"?","")+t:e.value.versionId?xl.PIPELINE_DETAILS.replace(":"+gl.pipelineId,e.value.pipelineId||"").replace(":"+gl.pipelineVersionId,e.value.versionId||""):xl.PIPELINE_DETAILS_NO_VERSION.replace(":"+gl.pipelineId,e.value.pipelineId||"");return e.value.usePlaceholder?c.createElement(Ut.a,{className:Fe.link,onClick:function(e){return e.stopPropagation()},to:n},"[View pipeline]"):c.createElement($e.a,{title:e.value.displayName||"",enterDelay:300,placement:"top-start"},c.createElement(Ut.a,{className:Fe.link,onClick:function(e){return e.stopPropagation()},to:n},e.value.displayName))},r._recurringRunCustomRenderer=function(e){if(!e.value||!e.value.id)return c.createElement("div",null,"-");var t=xl.RECURRING_RUN.replace(":"+gl.runId,e.value.id||"");return(c.createElement(Ut.a,{className:Fe.link,onClick:function(e){return e.stopPropagation()},to:t},e.value.displayName||"[View config]"))},r._experimentCustomRenderer=function(e){return e.value&&e.value.id?c.createElement(Ut.a,{className:Fe.link,onClick:function(e){return e.stopPropagation()},to:xl.EXPERIMENT_DETAILS.replace(":"+gl.experimentId,e.value.id)},e.value.displayName):c.createElement("div",null,"-")},r._statusCustomRenderer=function(e){return oi(e.value)},r._metricBufferCustomRenderer=function(e){return c.createElement("div",{style:{borderLeft:"1px solid ".concat(Y),padding:"20px 0"}})},r._metricCustomRenderer=function(e){var t=e.value;return t?c.createElement(Li,{metric:t.metric,metadata:t.metadata}):c.createElement("div",null)},r.state={metrics:[],runs:[]},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state.metrics.slice(0,2),n=[{customRenderer:this._nameCustomRenderer,flex:1.5,label:"\u8fd0\u884c\u540d\u79f0",sortKey:aa.NAME},{customRenderer:this._statusCustomRenderer,flex:.5,label:"\u72b6\u6001"},{label:"\u65f6\u957f",flex:.5},{customRenderer:this._pipelineVersionCustomRenderer,label:"Pipeline \u7248\u672c",flex:1},{customRenderer:this._recurringRunCustomRenderer,label:"\u5faa\u73af Run",flex:.5},{label:"\u5f00\u59cb\u65f6\u95f4",flex:1,sortKey:aa.CREATED_AT}];this.props.hideExperimentColumn||n.splice(3,0,{customRenderer:this._experimentCustomRenderer,flex:1,label:"\u5b9e\u9a8c"}),t.length&&!this.props.hideMetricMetadata&&(n.push({customRenderer:this._metricBufferCustomRenderer,flex:.1,label:""}),n.push.apply(n,Object(Kn.a)(t.map((function(t){return{customRenderer:e._metricCustomRenderer,flex:.5,label:t.name}})))));var r=this.state.runs.map((function(n){var r,a,i=t.map((function(e){var t={metadata:e};if(n.run.metrics){var r=n.run.metrics.find((function(t){return t.name===e.name}));r&&void 0!==r.number_value&&(t.metric=r)}return t})),s={error:n.error,id:n.run.id,otherFields:[n.run.name,n.run.status||"-",(r=n.run,r&&r.created_at&&r.finished_at&&x(r.status)?vt(new Date(r.created_at),new Date(r.finished_at)):"-"),n.pipelineVersion,n.recurringRun,ht(n.run.created_at)]};(e.props.hideExperimentColumn||s.otherFields.splice(3,0,n.experiment),i.length&&!e.props.hideMetricMetadata)&&(s.otherFields.push(""),(a=s.otherFields).push.apply(a,Object(Kn.a)(i)));return s}));return(c.createElement("div",null,c.createElement(ct,{columns:n,rows:r,selectedIds:this.props.selectedIds,initialSortColumn:aa.CREATED_AT,ref:this._tableRef,filterLabel:"\u8fc7\u6ee4 runs",updateSelection:this.props.onSelectionChange,reload:this._loadRuns.bind(this),disablePaging:this.props.disablePaging,disableSorting:this.props.disableSorting,disableSelection:this.props.disableSelection,noFilterBox:this.props.noFilterBox,emptyMessage:"No"+"".concat(this.props.storageState===Kr.ARCHIVED?" archived":" available")+" runs found"+"".concat(this.props.experimentIdMask?" for this experiment":this.props.namespaceMask?" for this namespace":"",".")})))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._tableRef.current){e.next=3;break}return e.next=3,this._tableRef.current.reload();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_loadRuns",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,i,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],r="",!Array.isArray(this.props.runIdListMask)){e.next=8;break}return n=this.props.runIdListMask.map((function(e){return{run:{id:e}}})),e.next=6,this._getAndSetRuns(n);case 6:e.next=28;break;case 8:if(this.props.storageState)try{(a=JSON.parse(decodeURIComponent(t.filter||'{"predicates": []}'))).predicates=(a.predicates||[]).concat([{key:"storage_state",op:this.props.storageState===Kr.ARCHIVED?Be.EQUALS:Be.NOTEQUALS,string_value:Kr.ARCHIVED.toString()}]),t.filter=encodeURIComponent(JSON.stringify(a))}catch(c){pt.error("Could not parse request filter: ",t.filter)}return e.prev=9,i={},this.props.experimentIdMask?i={keyType:"EXPERIMENT",keyId:this.props.experimentIdMask}:this.props.namespaceMask&&(i={keyType:"NAMESPACE",keyId:this.props.namespaceMask}),e.next=14,da.runServiceApi.listRuns(t.pageToken,t.pageSize,t.sortBy,i.keyType,i.keyId,t.filter);case 14:s=e.sent,n=(s.runs||[]).map((function(e){return{run:e}})),r=s.next_page_token||"",e.next=28;break;case 19:return e.prev=19,e.t0=e.catch(9),e.t1=Error,e.next=24,ft(e.t0);case 24:return e.t2=e.sent,o=new e.t1(e.t2),this.props.onError("Error: failed to fetch runs.",o),e.abrupt("return","");case 28:return e.next=30,this._setColumns(n);case 30:return this.setState({metrics:gi.extractMetricMetadata(n.map((function(e){return e.run}))),runs:n}),e.abrupt("return",r);case 32:case"end":return e.stop()}}),e,this,[[9,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_setColumns",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.map(function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n._setRecurringRun(t),e.next=3,n._getAndSetPipelineVersionNames(t);case 3:if(n.props.hideExperimentColumn){e.next=6;break}return e.next=6,n._getAndSetExperimentNames(t);case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setRecurringRun",value:function(e){var t=gi.getRecurringRunId(e.run);t&&(e.recurringRun={id:t,displayName:t})}},{key:"_getAndSetRuns",value:function(e){return Promise.all(e.map(function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,da.runServiceApi.getRun(t.run.id);case 3:n=e.sent,t.run=n.run,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,ft(e.t0);case 11:t.error=e.sent;case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}},{key:"_getAndSetPipelineVersionNames",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,i,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=gi.getPipelineVersionId(t.run),r=gi.getPipelineId(t.run),!n){e.next=20;break}return e.prev=3,e.next=6,da.pipelineServiceApi.getPipelineVersion(n);case 6:a=e.sent,i=a.name||"",t.pipelineVersion={displayName:i,pipelineId:gi.getPipelineIdFromApiPipelineVersion(a),usePlaceholder:!1,versionId:n},e.next=18;break;case 11:return e.prev=11,e.t0=e.catch(3),e.next=15,ft(e.t0);case 15:return e.t1=e.sent,t.error="Failed to get associated pipeline version: "+e.t1,e.abrupt("return");case 18:e.next=41;break;case 20:if(!r){e.next=40;break}if(s=gi.getPipelineName(t.run)){e.next=37;break}return e.prev=23,e.next=26,da.pipelineServiceApi.getPipeline(r);case 26:o=e.sent,s=o.name||"",e.next=37;break;case 30:return e.prev=30,e.t2=e.catch(23),e.next=34,ft(e.t2);case 34:return e.t3=e.sent,t.error="Failed to get associated pipeline: "+e.t3,e.abrupt("return");case 37:t.pipelineVersion={displayName:s,pipelineId:r,usePlaceholder:!1,versionId:void 0},e.next=41;break;case 40:gi.getWorkflowManifest(t.run)&&(t.pipelineVersion={usePlaceholder:!0});case 41:case"end":return e.stop()}}),e,null,[[3,11],[23,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_getAndSetExperimentNames",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=gi.getFirstExperimentReferenceId(t.run))){e.next=19;break}if(r=gi.getFirstExperimentReferenceName(t.run)){e.next=18;break}return e.prev=4,e.next=7,da.experimentServiceApi.getExperiment(n);case 7:a=e.sent,r=a.name||"",e.next=18;break;case 11:return e.prev=11,e.t0=e.catch(4),e.next=15,ft(e.t0);case 15:return e.t1=e.sent,t.error="Failed to get associated experiment: "+e.t1,e.abrupt("return");case 18:t.experiment={displayName:r,id:n};case 19:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(c.PureComponent),Ui=Object(W.stylesheet)({outputsRow:{marginLeft:15,overflowX:"auto"}}),Fi=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={collapseSections:{},fullscreenViewerConfig:null,metricsCompareProps:{rows:[],xLabels:[],yLabels:[]},paramsCompareProps:{rows:[],xLabels:[],yLabels:[]},runs:[],selectedIds:[],viewersMap:new Map,workflowObjects:[]},r}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){var e=this;return{actions:new Wa(this.props,this.refresh.bind(this)).expandSections((function(){return e.setState({collapseSections:{}})})).collapseSections(this._collapseAllSections.bind(this)).refresh(this.refresh.bind(this)).getToolbarActionMap(),breadcrumbs:[{displayName:"Experiments",href:xl.EXPERIMENTS}],pageTitle:"Compare runs"}}},{key:"render",value:function(){var e=this,t=this.state,n=t.collapseSections,r=t.selectedIds,a=t.viewersMap,i=new Ka(this.props).get(bl.runlist),s=i?i.split(","):[],o=function(e){return a.get(e)?a.get(e).filter((function(e){return r.indexOf(e.runId)>-1})):[]};return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lrt"))},c.createElement(Tn,{sectionName:"Run overview",collapseSections:n,compareSetState:this.setStateSafe.bind(this)}),!n["Run overview"]&&c.createElement("div",{className:Fe.noShrink},c.createElement(Mi,Object.assign({onError:this.showPageError.bind(this)},this.props,{selectedIds:r,runIdListMask:s,disablePaging:!0,onSelectionChange:this._selectionChanged.bind(this)}))),c.createElement(Ge,{orientation:"vertical"}),c.createElement(Tn,{sectionName:"Parameters",collapseSections:n,compareSetState:this.setStateSafe.bind(this)}),!n.Parameters&&c.createElement("div",{className:Object(W.classes)(Fe.noShrink,Ui.outputsRow)},c.createElement(Ge,{orientation:"vertical"}),c.createElement(Ln,this.state.paramsCompareProps),c.createElement(Cn,null)),c.createElement(Tn,{sectionName:"Metrics",collapseSections:n,compareSetState:this.setStateSafe.bind(this)}),!n.Metrics&&c.createElement("div",{className:Object(W.classes)(Fe.noShrink,Ui.outputsRow)},c.createElement(Ge,{orientation:"vertical"}),c.createElement(Ln,this.state.metricsCompareProps),c.createElement(Cn,null)),c.createElement(Ge,{orientation:"vertical"}),Array.from(a.keys()).map((function(t,r){return!!o(t).length&&c.createElement("div",{key:r},c.createElement(Tn,{collapseSections:n,compareSetState:e.setStateSafe.bind(e),sectionName:Ta[t].prototype.getDisplayName()}),!n[Ta[t].prototype.getDisplayName()]&&c.createElement(c.Fragment,null,c.createElement("div",{className:Object(W.classes)(Fe.flex,Ui.outputsRow)},Ta[t].prototype.isAggregatable()&&o(t).length>1&&c.createElement(La,{configs:o(t).map((function(e){return e.config})),maxDimension:400,title:"Aggregated view"}),o(t).map((function(e,t){return c.createElement(La,{key:t,configs:[e.config],title:e.runName,maxDimension:400})})),c.createElement(Ge,null)),c.createElement(Cn,null)),c.createElement(Ge,{orientation:"vertical"}))})))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a,i,s,o,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearBanner(),t=new Ka(this.props).get(bl.runlist),n=t&&t.split(",")||[],r=[],a=[],i=[],s=null,e.next=9,Promise.all(n.map(function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,da.runServiceApi.getRun(t);case 3:n=e.sent,r.push(n),a.push(JSON.parse(n.pipeline_runtime.workflow_manifest||"{}")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),i.push(t),s=e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));case 9:if(!s){e.next=14;break}return e.next=12,this.showPageError("Error: failed loading ".concat(i.length," runs."),s);case 12:return pt.error("Failed loading ".concat(i.length," runs, last failed with the error: ").concat(s)),e.abrupt("return");case 14:return o=r.map((function(e){return e.run.id})),this.setStateSafe({runs:r,selectedIds:o,workflowObjects:a}),this._loadParameters(o),this._loadMetrics(o),c=a.map((function(e){return hi.loadAllOutputPaths(e)})),l=new Map,e.next=22,Promise.all(c.map(function(){var e=Object(h.a)(p.a.mark((function e(t,n){var i,s,o,c,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object(Sn.a)(t),e.prev=1,i.s();case 3:if((s=i.n()).done){e.next=11;break}return u=s.value,e.next=7,wi.load(u,null===(o=a[0])||void 0===o?void 0:null===(c=o.metadata)||void 0===c?void 0:c.namespace);case 7:e.sent.forEach((function(e){var t=l.get(e.type)||[];t.push({config:e,runId:r[n].run.id,runName:r[n].run.name}),l.set(e.type,t)}));case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),i.e(e.t0);case 16:return e.prev=16,i.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,13,16,19]])})));return function(t,n){return e.apply(this,arguments)}}()));case 22:this.setStateSafe({viewersMap:l});case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_selectionChanged",value:function(e){this.setState({selectedIds:e}),this._loadParameters(e),this._loadMetrics(e)}},{key:"_collapseAllSections",value:function(){var e,t=(e={},Object(qt.a)(e,"Run overview",!0),Object(qt.a)(e,"Parameters",!0),Object(qt.a)(e,"Metrics",!0),e);Array.from(this.state.viewersMap.keys()).forEach((function(e){var n=Ta[e].prototype.getDisplayName();t[n]=!0})),this.setState({collapseSections:t})}},{key:"_loadParameters",value:function(e){var t=this.state,n=t.runs,r=t.workflowObjects,a=e.map((function(e){return n.findIndex((function(t){return t.run.id===e}))})),i=n.filter((function(e,t){return a.indexOf(t)>-1})),s=r.filter((function(e,t){return a.indexOf(t)>-1})),o=yi.getParamsCompareProps(i,s);this.setState({paramsCompareProps:o})}},{key:"_loadMetrics",value:function(e){var t=this.state.runs,n=e.map((function(e){return t.findIndex((function(t){return t.run.id===e}))})),r=t.filter((function(e,t){return n.indexOf(t)>-1})).map((function(e){return e.run})),a=yi.multiRunMetricsCompareProps(r);this.setState({metricsCompareProps:a})}}]),n}(Ft),Vi=function(e){return It()?c.createElement(Rn.a,{to:xl.EXPERIMENTS}):c.createElement(Fi,e)};function Bi(e){return zi.apply(this,arguments)}function zi(){return(zi=Object(h.a)(p.a.mark((function e(t){var n,r,a,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.type,r=t.name,(a=new rn.GetContextByTypeAndNameRequest).setTypeName(n),a.setContextName(r),e.prev=4,e.next=7,Mt.Api.getInstance().metadataStoreService.getContextByTypeAndName(a);case 7:if(i=e.sent,null!=(s=i.getContext())){e.next=11;break}throw new Error("Cannot find specified context");case 11:return e.abrupt("return",s);case 14:throw e.prev=14,e.t0=e.catch(4),e.t0.message="Cannot find context with ".concat(JSON.stringify(a.toObject()),": ")+e.t0.message,e.t0;case 18:case"end":return e.stop()}}),e,null,[[4,14]])})))).apply(this,arguments)}function Ki(e){return Wi.apply(this,arguments)}function Wi(){return(Wi=Object(h.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split("-").slice(0,-1).join("_"),r=t,a="".concat(n,".").concat(r),e.next=5,Bi({name:a,type:"run"});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qi(e){return Hi.apply(this,arguments)}function Hi(){return(Hi=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bi({name:t,type:"KfpRun"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gi(e){return Xi.apply(this,arguments)}function Xi(){return(Xi=Object(h.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new rn.GetExecutionsByContextRequest).setContextId(t.getId()),e.prev=2,e.next=5,Mt.Api.getInstance().metadataStoreService.getExecutionsByContext(n);case 5:if(r=e.sent,null!=(a=r.getExecutionsList())){e.next=9;break}throw new Error("response.getExecutionsList() is empty");case 9:return e.abrupt("return",a);case 12:throw e.prev=12,e.t0=e.catch(2),e.t0.message="Cannot find executions by context ".concat(t.getId()," with name ").concat(t.getName(),": ")+e.t0.message,e.t0;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}!function(e){e.KFP_POD_NAME="kfp_pod_name"}(Ai||(Ai={}));var Ji=[Mt.ExecutionProperties,Mt.ExecutionCustomProperties],Yi=function(e){return Object(Mt.getResourcePropertyViaFallBack)(e,Ji,["RUN_ID"])||Object(Mt.getResourceProperty)(e,Mt.ExecutionCustomProperties.WORKSPACE,!0)||Object(Mt.getResourceProperty)(e,Mt.ExecutionProperties.PIPELINE_NAME)||void 0},$i=function(e){return Object(Mt.getResourceProperty)(e,Mt.ExecutionProperties.NAME)||Object(Mt.getResourceProperty)(e,Mt.ExecutionProperties.COMPONENT_ID)||Object(Mt.getResourceProperty)(e,Mt.ExecutionCustomProperties.TASK_ID,!0)||void 0},Qi=function(e){return Object(Mt.getResourceProperty)(e,Mt.ExecutionProperties.STATE)||void 0},Zi=function(e){return Object(Mt.getResourceProperty)(e,Ai.KFP_POD_NAME)||Object(Mt.getResourceProperty)(e,Ai.KFP_POD_NAME,!0)||void 0},es=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).tableRef=c.createRef(),r.api=Mt.Api.getInstance(),r.executionTypesMap=void 0,r.nameCustomRenderer=function(e){return c.createElement(Ut.a,{onClick:function(e){return e.stopPropagation()},className:Fe.link,to:wl.executionDetails(Number(e.id))},e.value)},r.state={columns:[{customRenderer:r.nameCustomRenderer,flex:2,label:"Run ID/Workspace/Pipeline",sortKey:"workspace"},{customRenderer:r.nameCustomRenderer,flex:1,label:"\u540d\u79f0",sortKey:"name"},{label:"\u72b6\u6001",flex:1,sortKey:"state"},{label:"ID",flex:1,sortKey:"id"},{label:"\u7c7b\u578b",flex:2,sortKey:"type"}],executions:[],expandedRows:new Map,rows:[]},r.reload=r.reload.bind(Object(Lt.a)(r)),r.toggleRowExpand=r.toggleRowExpand.bind(Object(Lt.a)(r)),r.getExpandedExecutionsRow=r.getExpandedExecutionsRow.bind(Object(Lt.a)(r)),r}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){return{actions:{},breadcrumbs:[],pageTitle:"\u6267\u884c\u8bb0\u5f55"}}},{key:"render",value:function(){var e=this.state,t=e.rows,n=e.columns;return(c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"))},c.createElement(ct,{ref:this.tableRef,columns:n,rows:t,disablePaging:!0,disableSelection:!0,reload:this.reload,initialSortColumn:"pipelineName",initialSortOrder:"asc",getExpandComponent:this.getExpandedExecutionsRow,toggleExpansion:this.toggleRowExpand,emptyMessage:"\u65e0\u6570\u636e."})))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tableRef.current){e.next=3;break}return e.next=3,this.tableRef.current.reload();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reload",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.executionTypesMap&&this.executionTypesMap.size){e.next=5;break}return e.next=4,this.getExecutionTypes();case 4:this.executionTypesMap=e.sent;case 5:if(this.state.executions.length){e.next=13;break}return e.next=8,this.getExecutions();case 8:n=e.sent,this.setState({executions:n}),this.clearBanner(),r=this.getRowsFromExecutions(t,n),this.setState({expandedRows:r.expandedRows,rows:r.collapsedRows});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),this.showPageError(Et(e.t0));case 18:return e.abrupt("return","");case 19:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getExecutions",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.metadataStoreService.getExecutions(new Mt.GetExecutionsRequest);case 3:return t=e.sent,e.abrupt("return",t.getExecutionsList());case 7:if(e.prev=7,e.t0=e.catch(0),5===e.t0.code){e.next=12;break}throw e.t0.message="Failed getting executions: "+e.t0.message,e.t0;case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"getExecutionTypes",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.metadataStoreService.getExecutionTypes(new Mt.GetExecutionTypesRequest);case 3:return t=e.sent,n=new Map,t.getExecutionTypesList().forEach((function(e){n.set(e.getId(),e)})),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),this.showPageError(Et(e.t0));case 12:return e.abrupt("return",new Map);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"getRowsFromExecutions",value:function(e,t){var n=this;return wt(t.map((function(e){var t=n.executionTypesMap.get(e.getTypeId()),r=t?t.getName():e.getTypeId();return{id:"".concat(e.getId()),otherFields:[Yi(e),$i(e),Qi(e),e.getId(),r]}})).filter(yt(e)).sort(xt(e,this.state.columns)))}},{key:"toggleRowExpand",value:function(e){var t=this.state.rows;t[e]&&(t[e].expandState=t[e].expandState===it.EXPANDED?it.COLLAPSED:it.EXPANDED,this.setState({rows:t}))}},{key:"getExpandedExecutionsRow",value:function(e){return Ot(this.state.expandedRows,this.state.columns)(e)}}]),n}(Ft),ts=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return(l.a.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"))},l.a.createElement(ns,{key:this.id,id:this.id,onError:this.showPageError.bind(this),onTitleUpdate:function(t){return e.props.updateToolbar({pageTitle:t})}})))}},{key:"getInitialToolbarState",value:function(){return{actions:{},breadcrumbs:[{displayName:"Executions",href:xl.EXECUTIONS}],pageTitle:"".concat(this.id," details")}}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"id",get:function(){return parseInt(this.props.match.params[gl.ID],10)}}]),n}(Ft),ns=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={},e.refresh=Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.load();case 2:case"end":return t.stop()}}),t)}))),e.load=Object(h.a)(p.a.mark((function t(){var n,r,a,i,s,o,c,l,u,h,f,m,v,b,g,E;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Mt.Api.getInstance().metadataStoreService,Object(Mt.getArtifactTypes)(n).then((function(t){e.setState({artifactTypeMap:t})})).catch((function(t){e.props.onError("Failed to fetch artifact types",t,"warning",e.refresh)})),r=e.props.id,!(isNaN(r)||r<0)){t.next=7;break}return a=new Error("Invalid execution id: ".concat(e.props.id)),e.props.onError(a.message,a,"error",e.refresh),t.abrupt("return");case 7:return(i=new Mt.GetExecutionsByIDRequest).setExecutionIdsList([r]),(s=new Mt.GetEventsByExecutionIDsRequest).setExecutionIdsList([r]),t.prev=11,t.next=14,Promise.all([n.getExecutionsByID(i),n.getEventsByExecutionIDs(s)]);case 14:if(o=t.sent,c=Object(d.a)(o,2),l=c[0],u=c[1],l.getExecutionsList().length){t.next=21;break}return e.props.onError("No execution identified by id: ".concat(e.props.id),void 0,"error",e.refresh),t.abrupt("return");case 21:if(!(l.getExecutionsList().length>1)){t.next=24;break}return e.props.onError("Found multiple executions with ID: ".concat(e.props.id),void 0,"error",e.refresh),t.abrupt("return");case 24:return h=l.getExecutionsList()[0],f=Object(Mt.getResourceProperty)(h,Mt.ExecutionProperties.COMPONENT_ID)||Object(Mt.getResourceProperty)(h,Mt.ExecutionCustomProperties.TASK_ID,!0),e.props.onTitleUpdate(f?f.toString():""),(m=new rn.GetExecutionTypesByIDRequest).setTypeIdsList([h.getTypeId()]),t.next=31,n.getExecutionTypesByID(m);case 31:if(v=t.sent,(b=v.getExecutionTypesList())&&0!==b.length){t.next=38;break}return e.props.onError("Cannot find execution type with id: ".concat(h.getTypeId()),void 0,"error",e.refresh),t.abrupt("return");case 38:if(!(b.length>1)){t.next=43;break}return e.props.onError("More than one execution type found with id: ".concat(h.getTypeId()),void 0,"error",e.refresh),t.abrupt("return");case 43:g=b[0];case 44:E=rs(u),e.setState({events:E,execution:h,executionType:g}),t.next=51;break;case 48:t.prev=48,t.t0=t.catch(11),e.props.onError(Et(t.t0),t.t0,"error",e.refresh);case 51:case"end":return t.stop()}}),t,null,[[11,48]])}))),e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.execution&&this.state.events?l.a.createElement("div",null,l.a.createElement(Zt,{resourceType:Pt.EXECUTION,typeName:this.fullTypeName,resource:this.state.execution}),l.a.createElement(is,{title:"Declared Inputs",artifactIds:this.state.events[Mt.Event.Type.DECLARED_INPUT],artifactTypeMap:this.state.artifactTypeMap}),l.a.createElement(is,{title:"Inputs",artifactIds:this.state.events[Mt.Event.Type.INPUT],artifactTypeMap:this.state.artifactTypeMap}),l.a.createElement(is,{title:"Declared Outputs",artifactIds:this.state.events[Mt.Event.Type.DECLARED_OUTPUT],artifactTypeMap:this.state.artifactTypeMap}),l.a.createElement(is,{title:"Outputs",artifactIds:this.state.events[Mt.Event.Type.OUTPUT],artifactTypeMap:this.state.artifactTypeMap})):l.a.createElement(tt.a,null)}},{key:"getInitialToolbarState",value:function(){return{actions:{},breadcrumbs:[{displayName:"Executions",href:xl.EXECUTIONS}],pageTitle:"Execution #".concat(this.props.id," details")}}},{key:"fullTypeName",get:function(){var e;return(null===(e=this.state.executionType)||void 0===e?void 0:e.getName())||""}}]),n}(c.Component);function rs(e){var t,n=(t={},Object(qt.a)(t,Mt.Event.Type.UNKNOWN,[]),Object(qt.a)(t,Mt.Event.Type.DECLARED_INPUT,[]),Object(qt.a)(t,Mt.Event.Type.INPUT,[]),Object(qt.a)(t,Mt.Event.Type.DECLARED_OUTPUT,[]),Object(qt.a)(t,Mt.Event.Type.OUTPUT,[]),Object(qt.a)(t,Mt.Event.Type.INTERNAL_INPUT,[]),Object(qt.a)(t,Mt.Event.Type.INTERNAL_OUTPUT,[]),t);return e?(e.getEventsList().forEach((function(e){var t=e.getType(),r=e.getArtifactId();null!=t&&null!=r&&n[t].push(r)})),n):n}var as,is=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={artifactDataMap:{}},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Mt.GetArtifactsByIDRequest).setArtifactIdsList(this.props.artifactIds),e.prev=2,e.next=5,Mt.Api.getInstance().metadataStoreService.getArtifactsByID(t);case 5:n=e.sent,r={},n.getArtifactsList().forEach((function(e){var t=e.getId();t?r[t]={id:t,name:Object(Mt.getResourceProperty)(e,Mt.ArtifactProperties.NAME)||Object(Mt.getResourceProperty)(e,Mt.ArtifactCustomProperties.NAME,!0)||"",typeId:e.getTypeId(),uri:e.getUri()||""}:Mt.logger.error("Artifact has empty id",e.toObject())})),this.setState({artifactDataMap:r}),e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return");case 14:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.artifactIds;return 0===r.length?null:l.a.createElement("section",null,l.a.createElement("h2",{className:Fe.header2},n),l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",{className:os.tableCell},"Artifact ID"),l.a.createElement("th",{className:os.tableCell},"Name"),l.a.createElement("th",{className:os.tableCell},"Type"),l.a.createElement("th",{className:os.tableCell},"URI"))),l.a.createElement("tbody",null,r.map((function(t){var n=e.state.artifactDataMap[t]||{},r=e.props.artifactTypeMap&&n.typeId?e.props.artifactTypeMap.get(n.typeId):null;return l.a.createElement(ss,{key:t,id:t,name:n.name||"",type:r?r.getName():void 0,uri:n.uri})})))))}}]),n}(c.Component),ss=function(e){var t=e.id,n=e.name,r=e.type,a=e.uri;return(l.a.createElement("tr",null,l.a.createElement("td",{className:os.tableCell},t?l.a.createElement(Ut.a,{className:Fe.link,to:wl.artifactDetails(t)},t):t),l.a.createElement("td",{className:os.tableCell},t?l.a.createElement(Ut.a,{className:Fe.link,to:wl.artifactDetails(t)},n):n),l.a.createElement("td",{className:os.tableCell},r),l.a.createElement("td",{className:os.tableCell},a)))},os=Object(W.stylesheet)({tableCell:{padding:6,textAlign:"left"}}),cs=n(455),ls=n.n(cs),us=Object(W.stylesheet)({actions:{display:"flex",marginRight:Te(-2)},backIcon:{fontSize:24,verticalAlign:"bottom"},backLink:{cursor:"pointer",marginRight:10,padding:3},breadcrumbs:{color:ne,fontFamily:Le,fontSize:Se,letterSpacing:.25,margin:"10px 37px"},chevron:{height:12},disabled:{color:"#aaa"},enabled:{color:Z},link:{$nest:{"&:hover":{background:re}},borderRadius:3,padding:3},pageName:{color:oe,fontSize:Pe,lineHeight:"28px"},root:{alignItems:"center",display:"flex",flexShrink:0,height:ge,justifyContent:"space-between"},topLevelToolbar:{borderBottom:"1px solid ".concat(re),paddingBottom:15,paddingLeft:20}}),ps=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=Object(Dt.a)({},this.props),t=e.actions,n=e.breadcrumbs,r=e.pageTitle,a=e.pageTitleTooltip;return t.length||n.length||r?c.createElement("div",{className:Object(W.classes)(us.root,!1!==this.props.topLevelToolbar&&us.topLevelToolbar)},c.createElement("div",{style:{minWidth:100}},c.createElement("div",{className:Object(W.classes)(us.breadcrumbs,Fe.flex)},n.map((function(e,t){return c.createElement("span",{className:Fe.flex,key:t,title:e.displayName},0!==t&&c.createElement(j.a,{className:us.chevron}),c.createElement(Ut.a,{className:Object(W.classes)(Fe.unstyled,Fe.ellipsis,us.link),to:e.href},e.displayName))}))),c.createElement("div",{className:Fe.flex},n.length>0&&c.createElement($e.a,{title:"Back",enterDelay:300},c.createElement("div",null," ",c.createElement(U.a,{className:us.backLink,disabled:this.props.history.length<2,onClick:this.props.history.goBack},c.createElement(ls.a,{className:Object(W.classes)(us.backIcon,this.props.history.length<2?us.disabled:us.enabled)})))),c.createElement("span",{className:Object(W.classes)(us.pageName,Fe.ellipsis),title:a,"data-testid":"page-title"},r))),c.createElement("div",{className:us.actions},Object.keys(t).map((function(e,n){var r=t[e];return(c.createElement($e.a,{title:r.disabled&&r.disabledTitle?r.disabledTitle:r.tooltip,enterDelay:300,key:n},c.createElement("div",{style:r.style},c.createElement(gr,{id:r.id,color:"secondary",onClick:r.action,disabled:r.disabled,title:r.title,icon:r.icon,busy:r.busy||!1,outlined:r.outlined&&!r.primary||!1,className:r.primary?Fe.buttonAction:""}))))})))):null}}]),n}(c.Component),ds=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._tableRef=c.createRef(),r._nameCustomRenderer=function(e){return c.createElement(Ut.a,{className:Fe.link,to:xl.RECURRING_RUN.replace(":"+gl.runId,e.id)},e.value)},r._enabledCustomRenderer=function(e){var t=r.state.busyIds.has(e.id);return(c.createElement(gr,{outlined:e.value,title:!0===e.value?"Enabled":"Disabled",busy:t,onClick:function(){var t=r.state.busyIds;t.add(e.id),r.setState({busyIds:t},Object(h.a)(p.a.mark((function n(){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r._setEnabledState(e.id,!e.value);case 2:return(t=r.state.busyIds).delete(e.id),r.setState({busyIds:t}),n.next=7,r.refresh();case 7:case"end":return n.stop()}}),n)}))))}}))},r.state={busyIds:new Set,runs:[],selectedIds:[],toolbarActionMap:{}},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.runs,r=t.selectedIds,a=t.toolbarActionMap,i=[{customRenderer:this._nameCustomRenderer,flex:2,label:"Run \u540d\u79f0",sortKey:sa.NAME},{label:"\u521b\u5efa\u65f6\u95f4",flex:2,sortKey:sa.CREATED_AT},{customRenderer:this._enabledCustomRenderer,label:"",flex:1}],s=n.map((function(e){return{error:e.error,id:e.id,otherFields:[e.name,ht(e.created_at),e.enabled]}}));return c.createElement(c.Fragment,null,c.createElement(ps,{actions:a,breadcrumbs:[],pageTitle:"Recurring runs"}),c.createElement(ct,{columns:i,rows:s,ref:this._tableRef,selectedIds:r,updateSelection:function(t){return e.setState({selectedIds:t})},initialSortColumn:sa.CREATED_AT,reload:this._loadRuns.bind(this),filterLabel:"\u8fc7\u6ee4\u5faa\u73af runs",disableSelection:!0,emptyMessage:"\u65e0\u6570\u636e."}))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._tableRef.current){e.next=3;break}return e.next=3,this._tableRef.current.reload();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_loadRuns",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r="",e.prev=2,e.next=5,da.jobServiceApi.listJobs(t.pageToken,t.pageSize,t.sortBy,"EXPERIMENT",this.props.experimentId,t.filter);case 5:a=e.sent,n=a.jobs||[],r=a.next_page_token||"",e.next=17;break;case 10:return e.prev=10,e.t0=e.catch(2),e.next=14,ft(e.t0);case 14:i=e.sent,this.props.updateDialog({buttons:[{text:"Dismiss"}],content:"List recurring run configs request failed with:\n"+i,title:"Error retrieving recurring run configs"}),pt.error("Could not get list of recurring runs",i);case 17:return this.setState({runs:n}),e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_setEnabledState",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n?da.jobServiceApi.enableJob(t):da.jobServiceApi.disableJob(t);case 3:e.next=12;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,ft(e.t0);case 9:r=e.sent,this.props.updateDialog({buttons:[{text:"Dismiss"}],content:"Error changing enabled state of recurring run:\n"+r,title:"Error"}),pt.error("Error changing enabled state of recurring run",r);case 12:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(c.Component),hs=Object(W.stylesheet)({card:{border:"1px solid #ddd",borderRadius:8,height:70,marginRight:24,padding:"12px 20px 13px 24px"},cardActive:{border:"1px solid ".concat(ce)},cardBtn:{$nest:{"&:hover":{backgroundColor:"initial"}},color:ue,fontSize:12,minHeight:16,paddingLeft:0},cardContent:{color:ie,fontSize:16,lineHeight:"28px"},cardRow:{borderBottom:"1px solid ".concat(re),display:"flex",flexFlow:"row",minHeight:120},cardTitle:{color:oe,display:"flex",fontSize:12,fontWeight:"bold",height:20,justifyContent:"space-between",marginBottom:6},popOutIcon:{color:ie,margin:-2,minWidth:0,padding:3},recurringRunsActive:{color:"#0d652d"},recurringRunsCard:{width:158},recurringRunsDialog:{minWidth:600},runStatsCard:{width:270}}),fs=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;Object(a.a)(this,n),(r=t.call(this,e))._runlistRef=c.createRef();var i=new Wa(r.props,r.refresh.bind(Object(Lt.a)(r)));return r.state={activeRecurringRunsCount:0,experiment:null,recurringRunsManagerOpen:!1,runListToolbarProps:{actions:i.newRun((function(){return r.props.match.params[gl.experimentId]})).newRecurringRun(r.props.match.params[gl.experimentId]).compareRuns((function(){return r.state.selectedIds})).cloneRun((function(){return r.state.selectedIds}),!1).archive("run",(function(){return r.state.selectedIds}),!1,(function(e){return r._selectionChanged(e)})).getToolbarActionMap(),breadcrumbs:[],pageTitle:"Runs",topLevelToolbar:!1},selectedIds:[],selectedTab:0},r}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){return{actions:new Wa(this.props,this.refresh.bind(this)).refresh(this.refresh.bind(this)).getToolbarActionMap(),breadcrumbs:[{displayName:"\u5b9e\u9a8c",href:xl.EXPERIMENTS}],pageTitle:this.props?this.props.match.params[gl.experimentId]:""}}},{key:"render",value:function(){var e=this,t=this.state,n=t.activeRecurringRunsCount,r=t.experiment,a=r&&r.description||"";return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lrt"))},r&&c.createElement("div",{className:Fe.page},c.createElement("div",{className:hs.cardRow},c.createElement(Vn.a,{id:"recurringRunsCard",className:Object(W.classes)(hs.card,hs.recurringRunsCard,!!n&&hs.cardActive),elevation:0},c.createElement("div",null,c.createElement("div",{className:hs.cardTitle},"Recurring run configs"),c.createElement("div",{className:Object(W.classes)(hs.cardContent,!!n&&hs.recurringRunsActive)},n+" active"),c.createElement(Jt.a,{className:hs.cardBtn,id:"manageExperimentRecurringRunsBtn",disableRipple:!0,onClick:function(){return e.setState({recurringRunsManagerOpen:!0})}},"Manage"))),c.createElement(Vn.a,{id:"experimentDescriptionCard",className:Object(W.classes)(hs.card,hs.runStatsCard),elevation:0},c.createElement("div",{className:hs.cardTitle},c.createElement("span",null,"Experiment description"),c.createElement(Jt.a,{id:"expandExperimentDescriptionBtn",onClick:function(){return e.props.updateDialog({content:a,title:"Experiment description"})},className:Object(W.classes)(hs.popOutIcon,"popOutButton")},c.createElement($e.a,{title:"Read more"},c.createElement(zn.a,{style:{fontSize:18}})))),a.split("\n").slice(0,2).map((function(e,t){return c.createElement("div",{key:t,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e)})),a.split("\n").length>2?"...":"")),c.createElement(ps,this.state.runListToolbarProps),c.createElement(Mi,Object.assign({onError:this.showPageError.bind(this),hideExperimentColumn:!0,experimentIdMask:r.id,ref:this._runlistRef,selectedIds:this.state.selectedIds,storageState:Kr.AVAILABLE,onSelectionChange:this._selectionChanged.bind(this)},this.props)),c.createElement(pn.a,{open:this.state.recurringRunsManagerOpen,classes:{paper:hs.recurringRunsDialog},onClose:this._recurringRunsManagerClosed.bind(this)},c.createElement(mn.a,null,c.createElement(ds,Object.assign({},this.props,{experimentId:this.props.match.params[gl.experimentId]}))),c.createElement(hn.a,null,c.createElement(Jt.a,{id:"closeExperimentRecurringRunManagerBtn",onClick:this._recurringRunsManagerClosed.bind(this),color:"secondary"},"Close")))))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(!this._runlistRef.current){e.next=5;break}return e.next=5,this._runlistRef.current.refresh();case 5:return e.abrupt("return");case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a,i,s,o,c,l=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearBanner(),t=this.props.match.params[gl.experimentId],e.prev=2,e.next=5,da.experimentServiceApi.getExperiment(t);case 5:return n=e.sent,r=n.name||this.props.match.params[gl.experimentId],a=new Wa(this.props,this.refresh.bind(this),this.getInitialToolbarState().actions),i=function(){return n.id?[n.id]:[]},n.storage_state===pr.ARCHIVED?a.restore("experiment",i,!0,(function(){return l.refresh()})):a.archive("experiment",i,!0,(function(){return l.refresh()})),s=a.getToolbarActionMap(),this.props.updateToolbar({actions:s,breadcrumbs:[{displayName:"\u5b9e\u9a8c",href:xl.EXPERIMENTS}],pageTitle:r,pageTitleTooltip:r}),o=-1,e.prev=13,e.next=16,da.jobServiceApi.listJobs(void 0,100,"","EXPERIMENT",t);case 16:c=e.sent,o=(c.jobs||[]).filter((function(e){return!0===e.enabled})).length,e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(13),e.next=24,this.showPageError("Error: failed to retrieve recurring runs for experiment: ".concat(t,"."),e.t0);case 24:pt.error("Error fetching recurring runs for experiment: ".concat(t),e.t0);case 25:this.setStateSafe({activeRecurringRunsCount:o,experiment:n}),e.next=33;break;case 28:return e.prev=28,e.t1=e.catch(2),e.next=32,this.showPageError("Error: failed to retrieve experiment: ".concat(t,"."),e.t1);case 32:pt.error("Error loading experiment: ".concat(t),e.t1);case 33:case"end":return e.stop()}}),e,this,[[2,28],[13,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"_selectionChanged",value:function(e){var t=this.state.runListToolbarProps.actions;t[_a.COMPARE].disabled=e.length<=1||e.length>10,t[_a.CLONE_RUN].disabled=1!==e.length,t[_a.ARCHIVE].disabled=!e.length,this.setState({runListToolbarProps:{actions:t,breadcrumbs:this.state.runListToolbarProps.breadcrumbs,pageTitle:this.state.runListToolbarProps.pageTitle,topLevelToolbar:this.state.runListToolbarProps.topLevelToolbar},selectedIds:e})}},{key:"_recurringRunsManagerClosed",value:function(){this.setState({recurringRunsManagerOpen:!1}),this.refresh()}}]),n}(Ft),ms=function(e){return It()?c.createElement(Rn.a,{to:xl.EXPERIMENTS}):c.createElement(fs,e)},vs=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._runlistRef=c.createRef(),r.state={selectedIds:[]},r}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){var e=this;return{actions:new Wa(this.props,this.refresh.bind(this)).newRun().newExperiment().compareRuns((function(){return e.state.selectedIds})).cloneRun((function(){return e.state.selectedIds}),!1).archive("run",(function(){return e.state.selectedIds}),!1,(function(t){return e._selectionChanged(t)})).refresh(this.refresh.bind(this)).getToolbarActionMap(),breadcrumbs:[],pageTitle:"Experiments"}}},{key:"render",value:function(){return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"))},c.createElement(Mi,Object.assign({onError:this.showPageError.bind(this),selectedIds:this.state.selectedIds,onSelectionChange:this._selectionChanged.bind(this),ref:this._runlistRef,storageState:Kr.AVAILABLE,hideMetricMetadata:!0,namespaceMask:this.props.namespace},this.props)))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._runlistRef.current){e.next=4;break}return this.clearBanner(),e.next=4,this._runlistRef.current.refresh();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_selectionChanged",value:function(e){var t=this.props.toolbarProps.actions;t[_a.COMPARE].disabled=e.length<=1||e.length>10,t[_a.CLONE_RUN].disabled=1!==e.length,t[_a.ARCHIVE].disabled=!e.length,this.props.updateToolbar({actions:t,breadcrumbs:this.props.toolbarProps.breadcrumbs}),this.setState({selectedIds:e})}}]),n}(Ft),bs=function(e){var t=c.useContext(_t);return(c.createElement(vs,Object.assign({key:t},e,{namespace:t})))},gs=n(140),Es=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e))._tableRef=c.createRef(),i._nameCustomRenderer=function(e){return c.createElement($e.a,{title:e.value,enterDelay:300,placement:"top-start"},c.createElement(Ut.a,{className:Fe.link,onClick:function(e){return e.stopPropagation()},to:xl.EXPERIMENT_DETAILS.replace(":"+gl.experimentId,e.id)},e.value))},i._last5RunsCustomRenderer=function(e){return c.createElement("div",{className:Fe.flex},(e.value||[]).map((function(e,t){return c.createElement("span",{key:t,style:{margin:"0 1px"}},oi(e.status||r.UNKNOWN,e.created_at))})))},i.state={displayExperiments:[],selectedIds:[],selectedTab:0},i}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){var e=this;return{actions:new Wa(this.props,this.refresh.bind(this)).newRun().newExperiment().compareRuns((function(){return e.state.selectedIds})).cloneRun((function(){return e.state.selectedIds}),!1).archive("run",(function(){return e.state.selectedIds}),!1,(function(t){return e._selectionChanged(t)})).refresh(this.refresh.bind(this)).getToolbarActionMap(),breadcrumbs:[],pageTitle:"\u5b9e\u9a8c"}}},{key:"render",value:function(){var e=[{customRenderer:this._nameCustomRenderer,flex:1,label:"\u5b9e\u9a8c\u540d\u79f0",sortKey:oa.NAME},{flex:2,label:"\u63cf\u8ff0"},{customRenderer:this._last5RunsCustomRenderer,flex:1,label:"\u6700\u8fd15\u6b21\u8fd0\u884c\u4fe1\u606f"}],t=this.state.displayExperiments.map((function(e){return{error:e.error,expandState:e.expandState,id:e.id,otherFields:[e.name,e.description,e.expandState===it.EXPANDED?[]:e.last5Runs]}}));return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"))},c.createElement(ct,{columns:e,rows:t,ref:this._tableRef,disableSelection:!0,initialSortColumn:oa.CREATED_AT,reload:this._reload.bind(this),toggleExpansion:this._toggleRowExpand.bind(this),getExpandComponent:this._getExpandedExperimentComponent.bind(this),filterLabel:"\u8fc7\u6ee4\u5b9e\u9a8c",emptyMessage:"\u65e0\u6570\u636e"}))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._tableRef.current){e.next=4;break}return this.clearBanner(),e.next=4,this._tableRef.current.reload();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_reload",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=JSON.parse(decodeURIComponent(t.filter||'{"predicates": []}'))).predicates=(a.predicates||[]).concat([{key:"storage_state",op:Be.NOTEQUALS,string_value:pr.ARCHIVED.toString()}]),t.filter=encodeURIComponent(JSON.stringify(a)),e.next=6,da.experimentServiceApi.listExperiment(t.pageToken,t.pageSize,t.sortBy,t.filter,this.props.namespace?"NAMESPACE":void 0,this.props.namespace||void 0);case 6:n=e.sent,(r=n.experiments||[]).forEach((function(e){return e.expandState=it.COLLAPSED})),e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(0),e.next=15,this.showPageError("\u63d0\u793a: \u83b7\u53d6\u5b9e\u9a8c\u4fe1\u606f\u5931\u8d25",e.t0);case 15:return e.abrupt("return","");case 16:return e.next=18,Promise.all(r.map(function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,da.runServiceApi.listRuns(void 0,5,aa.CREATED_AT+" desc","EXPERIMENT",t.id,encodeURIComponent(JSON.stringify({predicates:[{key:"storage_state",op:Be.NOTEQUALS,string_value:Kr.ARCHIVED.toString()}]})));case 3:n=e.sent,t.last5Runs=n.runs||[],e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t.error="\u83b7\u53d6\u5b9e\u9a8c\u8fd0\u884c\u6570\u636e\u5931\u8d25",pt.error("Error: \u83b7\u53d6\u5b9e\u9a8c".concat(t.name," \u8fd0\u884c\u72b6\u6001\u5931\u8d25."),e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 18:return this.setStateSafe({displayExperiments:r}),e.abrupt("return",n.next_page_token||"");case 20:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_selectionChanged",value:function(e){var t=this.props.toolbarProps.actions;t[_a.COMPARE].disabled=e.length<=1||e.length>10,t[_a.CLONE_RUN].disabled=1!==e.length,t[_a.ARCHIVE].disabled=!e.length,this.props.updateToolbar({actions:t}),this.setState({selectedIds:e})}},{key:"_toggleRowExpand",value:function(e){var t=Object(gs.a)(this.state.displayExperiments,(function(t){t[e].expandState=t[e].expandState===it.COLLAPSED?it.EXPANDED:it.COLLAPSED}));this.setState({displayExperiments:t})}},{key:"_getExpandedExperimentComponent",value:function(e){var t=this.state.displayExperiments[e];return(c.createElement(Mi,Object.assign({hideExperimentColumn:!0,experimentIdMask:t.id,onError:function(){return null}},this.props,{disablePaging:!1,selectedIds:this.state.selectedIds,noFilterBox:!0,storageState:Kr.AVAILABLE,onSelectionChange:this._selectionChanged.bind(this),disableSorting:!0})))}}]),n}(Ft),ys=function(e){var t=c.useContext(_t);return(c.createElement(Es,Object.assign({key:t},e,{namespace:t})))};!function(e){e[e.EXPERIMENTS=0]="EXPERIMENTS",e[e.RUNS=1]="RUNS"}(as||(as={}));var xs,ws=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){return{actions:{},breadcrumbs:[],pageTitle:""}}},{key:"render",value:function(){return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"t"))},c.createElement($t,{tabs:["\u6240\u6709\u5b9e\u9a8c","\u6240\u6709\u8fd0\u884c\u6570\u636e"],selectedTab:this.props.view,onSwitch:this._tabSwitched.bind(this)}),0===this.props.view&&c.createElement(ys,this.props),1===this.props.view&&c.createElement(bs,this.props))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_tabSwitched",value:function(e){this.props.history.push(e===as.EXPERIMENTS?xl.EXPERIMENTS:xl.RUNS)}}]),n}(Ft),Os=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._runlistRef=c.createRef(),r.state={selectedIds:[]},r}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){var e=this;return{actions:new Wa(this.props,this.refresh.bind(this)).restore("run",(function(){return e.state.selectedIds}),!1,this._selectionChanged.bind(this)).refresh(this.refresh.bind(this)).delete((function(){return e.state.selectedIds}),"run",this._selectionChanged.bind(this),!1).getToolbarActionMap(),breadcrumbs:[],pageTitle:"\u5b58\u6863"}}},{key:"render",value:function(){return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"))},c.createElement(Mi,Object.assign({namespaceMask:this.props.namespace,onError:this.showPageError.bind(this),selectedIds:this.state.selectedIds,onSelectionChange:this._selectionChanged.bind(this),ref:this._runlistRef,storageState:Kr.ARCHIVED},this.props)))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._runlistRef.current){e.next=4;break}return this.clearBanner(),e.next=4,this._runlistRef.current.refresh();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_selectionChanged",value:function(e){var t=this.props.toolbarProps.actions;t[_a.RESTORE].disabled=!e.length,t[_a.DELETE_RUN].disabled=!e.length,this.props.updateToolbar({actions:t,breadcrumbs:this.props.toolbarProps.breadcrumbs}),this.setState({selectedIds:e})}}]),n}(Ft),ks=function(e){var t=c.useContext(_t);return(c.createElement(Os,Object.assign({key:t},e,{namespace:t})))},Ns=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._tableRef=c.createRef(),r._nameCustomRenderer=function(e){return c.createElement($e.a,{title:e.value,enterDelay:300,placement:"top-start"},c.createElement(Ut.a,{className:Fe.link,onClick:function(e){return e.stopPropagation()},to:xl.EXPERIMENT_DETAILS.replace(":"+gl.experimentId,e.id)},e.value))},r.state={displayExperiments:[]},r}return Object(i.a)(n,[{key:"render",value:function(){var e=[{customRenderer:this._nameCustomRenderer,flex:1,label:"\u5b9e\u9a8c \u540d\u79f0",sortKey:oa.NAME},{flex:2,label:"\u63cf\u8ff0"}],t=this.state.displayExperiments.map((function(e){return{error:e.error,expandState:e.expandState,id:e.id,otherFields:[e.name,e.description]}}));return c.createElement("div",null,c.createElement(ct,{columns:e,rows:t,ref:this._tableRef,disableSelection:!0,initialSortColumn:oa.CREATED_AT,reload:this._loadExperiments.bind(this),toggleExpansion:this._toggleRowExpand.bind(this),getExpandComponent:this._getExpandedExperimentComponent.bind(this),filterLabel:"\u8fc7\u6ee4\u5b9e\u9a8c",emptyMessage:"\u65e0\u6570\u636e"}))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._tableRef.current){e.next=3;break}return e.next=3,this._tableRef.current.reload();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_loadExperiments",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,i,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",!this.props.storageState){e.next=17;break}e.prev=2,(a=JSON.parse(decodeURIComponent(t.filter||'{"predicates": []}'))).predicates=(a.predicates||[]).concat([{key:"storage_state",op:this.props.storageState===pr.ARCHIVED?Be.EQUALS:Be.NOTEQUALS,string_value:pr.ARCHIVED.toString()}]),t.filter=encodeURIComponent(JSON.stringify(a)),e.next=17;break;case 8:return e.prev=8,e.t0=e.catch(2),e.t1=Error,e.next=13,ft(e.t0);case 13:return e.t2=e.sent,i=new e.t1(e.t2),this.props.onError("Error: failed to parse request filter: ",i),e.abrupt("return","");case 17:return e.prev=17,e.next=20,da.experimentServiceApi.listExperiment(t.pageToken,t.pageSize,t.sortBy,t.filter,this.props.namespace?"NAMESPACE":void 0,this.props.namespace||void 0);case 20:s=e.sent,n=s.next_page_token||"",(r=s.experiments||[]).forEach((function(e){return e.expandState=it.COLLAPSED})),this.setState({displayExperiments:r}),e.next=36;break;case 27:return e.prev=27,e.t3=e.catch(17),e.t4=Error,e.next=32,ft(e.t3);case 32:return e.t5=e.sent,o=new e.t4(e.t5),this.props.onError("Error: failed to list experiments: ",o),e.abrupt("return","");case 36:return e.abrupt("return",n);case 37:case"end":return e.stop()}}),e,this,[[2,8],[17,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_toggleRowExpand",value:function(e){var t=Object(gs.a)(this.state.displayExperiments,(function(t){t[e].expandState=t[e].expandState===it.COLLAPSED?it.EXPANDED:it.COLLAPSED}));this.setState({displayExperiments:t})}},{key:"_getExpandedExperimentComponent",value:function(e){var t=this.state.displayExperiments[e];return(c.createElement(Mi,Object.assign({hideExperimentColumn:!0,experimentIdMask:t.id,onError:function(){return null}},this.props,{disablePaging:!1,noFilterBox:!0,storageState:this.props.storageState===pr.ARCHIVED?Kr.ARCHIVED:Kr.AVAILABLE,disableSorting:!0,disableSelection:!0})))}}]),n}(c.PureComponent),Ss=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i)))._experimentlistRef=c.createRef(),e}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){return{actions:new Wa(this.props,this.refresh.bind(this)).refresh(this.refresh.bind(this)).getToolbarActionMap(),breadcrumbs:[],pageTitle:"\u5b58\u6863"}}},{key:"render",value:function(){return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"))},c.createElement(Ns,Object.assign({onError:this.showPageError.bind(this),ref:this._experimentlistRef,storageState:pr.ARCHIVED},this.props)))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._experimentlistRef.current){e.next=4;break}return this.clearBanner(),e.next=4,this._experimentlistRef.current.refresh();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ft),Rs=function(e){var t=c.useContext(_t);return(c.createElement(Ss,Object.assign({key:t},e,{namespace:t})))};!function(e){e[e.RUNS=0]="RUNS",e[e.EXPERIMENTS=1]="EXPERIMENTS"}(xs||(xs={}));var _s,Cs,Is,Ps=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){return{actions:{},breadcrumbs:[],pageTitle:""}}},{key:"render",value:function(){return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"t"))},c.createElement($t,{tabs:["\u8fd0\u884c\u6570\u636e","\u5b9e\u9a8c"],selectedTab:this.props.view,onSwitch:this._tabSwitched.bind(this)}),this.props.view===xs.RUNS&&c.createElement(ks,this.props),this.props.view===xs.EXPERIMENTS&&c.createElement(Rs,this.props))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_tabSwitched",value:function(e){this.props.history.push(e===xs.EXPERIMENTS?xl.ARCHIVED_EXPERIMENTS:xl.ARCHIVED_RUNS)}}]),n}(Ft),js=Object(W.stylesheet)({errorMessage:{color:"red"},explanation:{fontSize:Se}}),Ts=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._experimentNameRef=c.createRef(),r.handleChange=function(e){return function(t){var n=t.target.value;r.setState(Object(qt.a)({},e,n),r._validate.bind(Object(Lt.a)(r)))}},r.state={description:"",experimentName:"",isbeingCreated:!1,validationError:""},r}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){return{actions:{},breadcrumbs:[{displayName:"\u5b9e\u9a8c",href:xl.EXPERIMENTS}],pageTitle:"\u65b0\u5efa\u5b9e\u9a8c"}}},{key:"render",value:function(){var e=this,t=this.state,n=t.description,r=t.experimentName,a=t.isbeingCreated,i=t.validationError;return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"))},c.createElement("div",{className:Object(W.classes)(Fe.scrollContainer,Ve(20,"lr"))},c.createElement("div",{className:Fe.header},"\u5b9e\u9a8c\u8be6\u60c5"),c.createElement("div",{className:js.explanation},"\u5b9e\u9a8c\u53ef\u4ee5\u770b\u505a\u662f\u4e00\u4e2a\u5305\u542b\u6240\u6709\u7ba1\u9053\u53ca\u5176\u5173\u8054\u7684\u8fd0\u884c\u6570\u636e\u7684\u7a7a\u95f4"),c.createElement(ze,{id:"experimentName",label:"\u5b9e\u9a8c\u540d\u79f0",inputRef:this._experimentNameRef,required:!0,onChange:this.handleChange("experimentName"),value:r,autoFocus:!0,variant:"outlined"}),c.createElement(ze,{id:"experimentDescription",label:"\u63cf\u8ff0(\u9009\u586b)",multiline:!0,onChange:this.handleChange("description"),value:n,variant:"outlined"}),c.createElement("div",{className:Fe.flex},c.createElement(gr,{id:"createExperimentBtn",disabled:!!i,busy:a,className:Fe.buttonAction,title:"\u4e0b\u4e00\u6b65",onClick:this._create.bind(this)}),c.createElement(Jt.a,{id:"cancelNewExperimentBtn",onClick:function(){return e.props.history.push(xl.EXPERIMENTS)}},"\u53d6\u6d88"),c.createElement("div",{className:js.errorMessage},i))))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=new Ka(this.props),(n=t.get(bl.pipelineId))&&this.setState({pipelineId:n}),this._validate();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_create",value:function(){var e=this,t={description:this.state.description,name:this.state.experimentName,resource_references:this.props.namespace?[{key:{id:this.props.namespace,type:ur.NAMESPACE},relationship:lr.OWNER}]:void 0};this.setState({isbeingCreated:!0},Object(h.a)(p.a.mark((function n(){var r,a,i,s,o;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,da.experimentServiceApi.createExperiment(t);case 3:r=n.sent,a="",a=e.state.pipelineId?new Ka(e.props).build((i={},Object(qt.a)(i,bl.experimentId,r.id||""),Object(qt.a)(i,bl.pipelineId,e.state.pipelineId),Object(qt.a)(i,bl.firstRunInExperiment,"1"),i)):new Ka(e.props).build((s={},Object(qt.a)(s,bl.experimentId,r.id||""),Object(qt.a)(s,bl.firstRunInExperiment,"1"),s)),e.props.history.push(xl.NEW_RUN+a),e.props.updateSnackbar({autoHideDuration:1e4,message:"\u6210\u529f\u521b\u5efa\u5b9e\u9a8c: ".concat(t.name),open:!0}),n.next=19;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,ft(n.t0);case 14:return o=n.sent,n.next=17,e.showErrorDialog("\u521b\u5efa\u5b9e\u9a8c\u5931\u8d25",o);case 17:pt.error("\u521b\u5efa\u5b9e\u9a8c\u5931\u8d25:",n.t0),e.setState({isbeingCreated:!1});case 19:case"end":return n.stop()}}),n,null,[[0,10]])}))))}},{key:"_validate",value:function(){var e=this.state.experimentName;try{if(!e)throw new Error("\u8bf7\u586b\u5199\u5b9e\u9a8c\u540d\u79f0 ");this.setState({validationError:""})}catch(t){this.setState({validationError:t.message})}}}]),n}(Ft),As=function(e){var t=c.useContext(_t);return(c.createElement(Ts,Object.assign({},e,{namespace:t})))},Ds=n(47),Ls=n.n(Ds),Ms=n(62),Us=n.n(Ms),Fs=Object(W.stylesheet)({button:{margin:0,padding:"3px 5px"},key:{color:oe,flex:"0 0 50%",fontWeight:"bold",maxWidth:300},nonEditableInput:{color:ie},row:{borderBottom:"1px solid ".concat(Y),display:"flex",padding:"".concat(Te(-5),"px ").concat(Te(-6),"px")},textfield:{maxWidth:600}}),Vs=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handleParamChange,n=e.initialParams,r=e.titleMessage;return(c.createElement("div",null,c.createElement("div",{className:Fe.header},"Run \u53c2\u6570"),c.createElement("div",null,r),!!n.length&&c.createElement("div",null,n.map((function(e,n){return c.createElement(Bs,{key:n,id:"newRunPipelineParam".concat(n),onChange:function(e){return t(n,e)},param:e})})))))}}]),n}(c.Component),Bs=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={isEditorOpen:!1,isInJsonForm:!1,isJsonField:!1},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.onChange,a=t.param;return c.createElement(c.Fragment,null,this.state.isJsonField?c.createElement(B.a,{id:n,disabled:this.state.isEditorOpen,variant:"outlined",label:a.name,value:a.value||"",onChange:function(e){return r(e.target.value||"")},className:Object(W.classes)(Fe.textField,Fs.textfield),InputProps:{classes:{disabled:Fs.nonEditableInput},endAdornment:c.createElement(Us.a,{position:"end"},c.createElement(Jt.a,{className:Fs.button,color:"secondary",onClick:function(){if(e.state.isInJsonForm){var t=JSON.parse(a.value||"");e.state.isEditorOpen?r(JSON.stringify(t)||""):r(JSON.stringify(t,null,2)||"")}e.setState({isEditorOpen:!e.state.isEditorOpen})}},this.state.isEditorOpen?"Close Json Editor":"Open Json Editor")),readOnly:!1}}):c.createElement(B.a,{id:n,variant:"outlined",label:a.name,value:a.value||"",onChange:function(e){return r(e.target.value||"")},className:Object(W.classes)(Fe.textField,Fs.textfield)}),this.state.isJsonField&&this.state.isEditorOpen&&c.createElement("div",{className:Fs.row},c.createElement(Pa,{width:"100%",minLines:3,maxLines:20,mode:"json",theme:"github",highlightActiveLine:!0,showGutter:!0,readOnly:!1,onChange:function(e){return r(e||"")},value:a.value||""})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=!0;try{var r=JSON.parse(e.param.value||"");if(null===r||"object"!==typeof r)throw new Error("Parsed JSON was neither an array nor an object. Using default renderer")}catch(a){n=!1}return{isInJsonForm:n,isJsonField:t.isJsonField||n}}}]),n}(c.Component),zs=Vs,Ks=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._isMounted=!0,r.state={resources:[],rows:[],selectedIds:[],toolbarActionMap:e&&e.toolbarActionMap||{}},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state,t=e.rows,n=e.selectedIds,r=e.toolbarActionMap,a=this.props,i=a.columns,s=a.title,o=a.filterLabel,l=a.emptyMessage,u=a.initialSortColumn;return c.createElement(c.Fragment,null,c.createElement(ps,{actions:r,breadcrumbs:[],pageTitle:s}),c.createElement(ct,{columns:i,rows:t,selectedIds:n,useRadioButtons:!0,updateSelection:this._selectionChanged.bind(this),filterLabel:o,initialSortColumn:u,reload:this._load.bind(this),emptyMessage:l}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"setStateSafe",value:function(e,t){this._isMounted&&this.setState(e,t)}},{key:"_selectionChanged",value:function(e){if(Array.isArray(e)&&1===e.length){var t=this.state.resources.find((function(t){return t.id===e[0]}));t?(this.props.selectionChanged(t),this.setStateSafe({selectedIds:e})):pt.error("Somehow no resource was found with ID: ".concat(e[0]))}else pt.error("".concat(e.length," resources were selected somehow"),e)}},{key:"_load",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.prev=1,e.next=4,this.props.listApi(t.pageToken,t.pageSize,t.sortBy,t.filter);case 4:r=e.sent,this.setStateSafe({resources:r.resources,rows:this._resourcesToRow(r.resources)}),n=r.nextPageToken,e.next=16;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,ft(e.t0);case 13:a=e.sent,this.props.updateDialog({buttons:[{text:"Dismiss"}],content:"List request failed with:\n"+a,title:"Error retrieving resources"}),pt.error("Could not get requested list of resources",a);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_resourcesToRow",value:function(e){return e.map((function(e){return{error:e.error,id:e.id,otherFields:[e.name,e.description,ht(e.created_at)]}}))}}]),n}(c.Component),Ws=n(222),qs=n.n(Ws),Hs=n(223),Gs=n.n(Hs),Xs=n(73),Js=Object(Xs.withStyles)({tooltip:{backgroundColor:"transparent",border:"0 none",color:ie,fontSize:Re,maxWidth:220}})($e.a),Ys=function(e){var t=e.helpText;return(l.a.createElement(Js,{title:l.a.createElement(qs.a,null,l.a.createElement(Gs.a,null,t)),interactive:!0,leaveDelay:400,placement:"top"},l.a.createElement(U.a,null,l.a.createElement(si.a,null))))};!function(e){e[e.INTERVALED=0]="INTERVALED",e[e.CRON=1]="CRON"}(Cs||(Cs={})),function(e){e.MINUTE="Minute",e.HOUR="Hour",e.DAY="Day",e.WEEK="Week",e.MONTH="Month"}(Is||(Is={}));var $s=(_s={},Object(qt.a)(_s,Is.MINUTE,60),Object(qt.a)(_s,Is.HOUR,3600),Object(qt.a)(_s,Is.DAY,86400),Object(qt.a)(_s,Is.WEEK,604800),Object(qt.a)(_s,Is.MONTH,2592e3),_s),Qs=[Is.MONTH,Is.WEEK,Is.DAY,Is.HOUR,Is.MINUTE],Zs=new Map([[Cs.INTERVALED,{displayName:"Periodic"}],[Cs.CRON,{displayName:"Cron"}]]);function eo(e,t){var n=$s[e];if(!n)throw new Error("Invalid interval category: "+e);return n*t}function to(e,t,n){var r=n.every((function(e){return!!e})),a="0",i="0",s="0";e&&(a=""+e.getDate(),i=""+e.getHours(),s=""+e.getMinutes());var o="*",c="*",l="*",u="?";switch(t){case Is.MINUTE:break;case Is.HOUR:o=s;break;case Is.DAY:o=s,c=i;break;case Is.WEEK:o=s,c=i,l="?",u=r?"*":n.reduce((function(e,t,n){return t&&e.push(n),e}),[]).join(",");break;case Is.MONTH:o=s,c=i,l=a;break;default:throw new Error("Invalid interval index: "+t)}return["0",o,c,l,"*",u].join(" ").trim()}function no(e,t,n){if(e&&t&&n){var r=t.split("-"),a=Object(d.a)(r,3),i=a[0],s=a[1],o=a[2],c=n.split(":"),l=Object(d.a)(c,2),u=l[0],p=l[1],h=new Date(+i,+s-1,+o,+u,+p);if(isNaN(h))throw new Error("Invalid picker format");return h}}function ro(e,t,n,r,a,i){var s;switch(a){case Cs.INTERVALED:(s={periodic_schedule:{interval_second:eo(e,t).toString()}}).periodic_schedule.start_time=n,s.periodic_schedule.end_time=r;break;case Cs.CRON:(s={cron_schedule:{cron:i}}).cron_schedule.start_time=n,s.cron_schedule.end_time=r;break;default:throw new Error("Invalid TriggerType: ".concat(a))}return s}function ao(e){if(e.periodic_schedule){var t=e.periodic_schedule,n=parseInt(t.interval_second||"",10);if(Number.isNaN(n))throw new Error("Interval seconds is NaN: ".concat(t.interval_second," for ").concat(JSON.stringify(e)));var r=function(e){var t,n=Object(Sn.a)(Qs);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=$s[r];if(e%a===0)return{interval:r,count:e/a}}}catch(i){n.e(i)}finally{n.f()}throw new Error("Invalid seconds: "+e)}(n),a=r.interval,i=r.count;return{type:Cs.INTERVALED,intervalCategory:a,intervalValue:i,startDateTime:t.start_time?new Date(t.start_time):void 0,endDateTime:t.end_time?new Date(t.end_time):void 0}}if(e.cron_schedule){var s=e.cron_schedule,o=s.cron,c=s.start_time,l=s.end_time;return{type:Cs.CRON,cron:o||"",startDateTime:c?new Date(c):void 0,endDateTime:l?new Date(l):void 0}}throw new Error("Invalid trigger: ".concat(JSON.stringify(e)))}function io(e){return[e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2),("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)]}function so(e){if(e){if(e.cron_schedule&&e.cron_schedule.cron)return e.cron_schedule.cron;if(e.periodic_schedule&&e.periodic_schedule.interval_second){var t=e.periodic_schedule.interval_second;if("0"===t)return"Never";var n=Math.floor(+t/2592e3),r=Math.floor(+t%2592e3/604800),a=Math.floor(+t%604800/86400),i=Math.floor(+t%86400/3600),s=Math.floor(+t%3600/60),o=Math.floor(+t%60),c="Every";n&&(c+=" ".concat(n," months,")),r&&(c+=" ".concat(r," weeks,")),a&&(c+=" ".concat(a," days,")),i&&(c+=" ".concat(i," hours,")),s&&(c+=" ".concat(s," minutes,")),o&&(c+=" ".concat(o," seconds,"));var l=c.lastIndexOf(", ")+1;return l>0&&(c=c.slice(0,l)+" and"+c.slice(l)),c.slice(0,-1)}}return"-"}var oo,co=Object(W.stylesheet)({noMargin:{margin:0}}),lo=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state=function(){var t,n,r,a,i,s,o,c=e.props.initialProps||{},l=c.maxConcurrentRuns,u=c.catchup,p=c.trigger,h={};try{p&&(h=ao(p))}catch(k){pt.warn("Failed to parse original trigger: ",p),pt.warn(k)}var f=null!==(t=h.startDateTime)&&void 0!==t?t:new Date,m=null!==(n=h.endDateTime)&&void 0!==n?n:new Date(f.getFullYear(),f.getMonth(),f.getDate()+7,f.getHours(),f.getMinutes()),v=io(f),b=Object(d.a)(v,2),g=b[0],E=b[1],y=io(m),x=Object(d.a)(y,2),w=x[0],O=x[1];return{catchup:null===u||void 0===u||u,maxConcurrentRuns:l||"10",hasEndDate:!!(null===(r=h)||void 0===r?void 0:r.endDateTime),endDate:w,endTime:O,hasStartDate:!!(null===(a=h)||void 0===a?void 0:a.startDateTime),startDate:g,startTime:E,selectedDays:new Array(7).fill(!0),type:null!==(i=h.type)&&void 0!==i?i:Cs.INTERVALED,editCron:h.type===Cs.CRON,cron:h.cron||"",intervalCategory:null!==(s=h.intervalCategory)&&void 0!==s?s:Is.MINUTE,intervalValue:null!==(o=h.intervalValue)&&void 0!==o?o:1}}(),e.handleChange=function(t){return function(n){var r=n.target,a="checkbox"===r.type?r.checked:r.value;e.setState(Object(qt.a)({},t,a),e._updateTrigger)}},e._updateTrigger=function(){var t=e.state,n=t.hasStartDate,r=t.hasEndDate,a=t.startDate,i=t.startTime,s=t.endDate,o=t.endTime,c=t.editCron,l=t.intervalCategory,u=t.intervalValue,p=t.type,d=t.cron,h=t.selectedDays,f=t.catchup,m=no(n,a,i),v=no(r,s,o);e.setState({cron:c?d:to(m,l,h)},(function(){var t=ro(l,u,m,v,p,e.state.cron);e.props.onChange&&e.props.onChange({catchup:f,maxConcurrentRuns:t?e.state.maxConcurrentRuns:void 0,trigger:t})}))},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this._updateTrigger()}},{key:"render",value:function(){var e=this,t=this.state,n=t.cron,r=t.editCron,a=t.endDate,i=t.endTime,s=t.hasEndDate,o=t.hasStartDate,l=t.intervalCategory,u=t.intervalValue,p=t.maxConcurrentRuns,d=t.selectedDays,h=t.startDate,f=t.startTime,m=t.type,v=t.catchup;return c.createElement("div",null,c.createElement(ze,{select:!0,label:"\u89e6\u53d1\u5668\u7c7b\u578b",required:!0,onChange:this.handleChange("type"),value:m,variant:"outlined"},Array.from(Zs.entries()).map((function(e,t){return c.createElement(We.a,{key:t,value:e[0]},e[1].displayName)}))),c.createElement("div",null,c.createElement(ze,{label:"\u6700\u5927\u5e76\u53d1 runs",required:!0,onChange:this.handleChange("maxConcurrentRuns"),value:p,variant:"outlined"}),c.createElement("div",{className:Fe.flex},c.createElement(Ls.a,{control:c.createElement(_.a,{checked:o,color:"primary",onClick:this.handleChange("hasStartDate")}),label:"\u8bbe\u7f6e\u5f00\u59cb\u65f6\u95f4"}),c.createElement(ze,{label:"\u5f00\u59cb\u65e5\u671f",type:"date",onChange:this.handleChange("startDate"),value:h,width:160,variant:"outlined",InputLabelProps:{classes:{outlined:co.noMargin},shrink:!0},style:{visibility:o?"visible":"hidden"}}),c.createElement(Ge,null),c.createElement(ze,{label:"\u5f00\u59cb\u65f6\u95f4",type:"time",onChange:this.handleChange("startTime"),value:f,width:120,variant:"outlined",InputLabelProps:{classes:{outlined:co.noMargin},shrink:!0},style:{visibility:o?"visible":"hidden"}})),c.createElement("div",{className:Fe.flex},c.createElement(Ls.a,{control:c.createElement(_.a,{checked:s,color:"primary",onClick:this.handleChange("hasEndDate")}),label:"\u8bbe\u7f6e\u7ed3\u675f\u65f6\u95f4"}),c.createElement(ze,{label:"\u7ed3\u675f\u65e5\u671f",type:"date",onChange:this.handleChange("endDate"),value:a,width:160,style:{visibility:s?"visible":"hidden"},InputLabelProps:{classes:{outlined:co.noMargin},shrink:!0},variant:"outlined"}),c.createElement(Ge,null),c.createElement(ze,{label:"\u7ed3\u675f\u65f6\u95f4",type:"time",onChange:this.handleChange("endTime"),value:i,width:120,style:{visibility:s?"visible":"hidden"},InputLabelProps:{classes:{outlined:co.noMargin},shrink:!0},variant:"outlined"})),c.createElement("span",{className:Fe.flex},c.createElement(Ls.a,{control:c.createElement(_.a,{checked:v,color:"primary",onClick:this.handleChange("catchup")}),label:"Catchup"}),c.createElement(Ys,{helpText:c.createElement("div",null,c.createElement("p",null,"Whether the recurring run should catch up if behind schedule. Defaults to true."),c.createElement("p",null,"For example, if the recurring run is paused for a while and re-enabled afterwards. If catchup=true, the scheduler will catch up on (backfill) each missed interval. Otherwise, it only schedules the latest interval if more than one interval is ready to be scheduled."),c.createElement("p",null,"Usually, if your pipeline handles backfill internally, you should turn catchup off to avoid duplicate backfill."))})),c.createElement("span",{className:Fe.flex},"\u6bcf",m===Cs.INTERVALED&&c.createElement("div",{className:Fe.flex},c.createElement(Ge,null),c.createElement(ze,{required:!0,type:"number",onChange:this.handleChange("intervalValue"),value:u,height:30,width:65,error:u<1,variant:"outlined"})),c.createElement(Ge,null),c.createElement(ze,{required:!0,select:!0,onChange:this.handleChange("intervalCategory"),value:l,height:30,width:95,variant:"outlined"},Object.keys(Is).map((function(e,t){return c.createElement(We.a,{key:t,value:Is[e]},Is[e]+(m===Cs.INTERVALED?"s":""))}))))),m===Cs.CRON&&c.createElement("div",null,l===Is.WEEK&&c.createElement("div",null,c.createElement("span",null,"\u6bcf:"),c.createElement(Ls.a,{control:c.createElement(_.a,{checked:this._isAllDaysChecked(),color:"primary",onClick:this._toggleCheckAllDays.bind(this)}),label:"\u5168\u9009"}),c.createElement(Ge,null),["\u661f\u671f\u5929","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"].map((function(t,n){return c.createElement(Jt.a,{variant:"fab",mini:!0,key:n,onClick:function(){return e._toggleDay(n)},color:d[n]?"primary":"secondary"},t)}))),c.createElement("div",{className:Fe.flex},c.createElement(Ls.a,{control:c.createElement(_.a,{checked:r,color:"primary",onClick:this.handleChange("editCron")}),label:c.createElement("span",null,"\u4f7f\u7528CRON\u8868\u8fbe\u5f0f")})),c.createElement(ze,{label:"cron \u8868\u8fbe\u5f0f",onChange:this.handleChange("cron"),value:n,width:300,disabled:!r,variant:"outlined"}),c.createElement("div",null,"\u63d0\u793a: \u5f00\u59cb\u548c\u7ed3\u675f\u65e5\u671f/\u65f6\u95f4\u5728cron\u4e4b\u5916\u5904\u7406\u3002")))}},{key:"_isAllDaysChecked",value:function(){return this.state.selectedDays.every((function(e){return!!e}))}},{key:"_toggleCheckAllDays",value:function(){var e=this,t=this._isAllDaysChecked();this.state.selectedDays.forEach((function(n,r){n!==!t&&e._toggleDay(r)}))}},{key:"_toggleDay",value:function(e){var t=this.state.selectedDays;t[e]=!t[e];var n=to(no(this.state.hasStartDate,this.state.startDate,this.state.startTime),this.state.intervalCategory,this.state.selectedDays);this.setState({cron:n,selectedDays:t},this._updateTrigger)}}]),n}(c.Component),uo=n(237),po=Object(W.stylesheet)({link:{$nest:{"&:hover":{textDecoration:"underline"}},color:ue,textDecoration:"none"}}),ho=function(e){return l.a.createElement("a",Object.assign({},e,{className:po.link,target:"_blank",rel:"noopener"}))},fo=Object(W.stylesheet)({dropOverlay:{backgroundColor:re,border:"2px dashed #aaa",bottom:0,left:0,padding:"2.5em 0",position:"absolute",right:0,textAlign:"center",top:0,zIndex:xe},root:{width:500}});!function(e){e.LOCAL="local",e.URL="url"}(oo||(oo={}));var mo=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._dropzoneRef=c.createRef(),r.handleChange=function(e){return function(t){r.setState(Object(qt.a)({},e,t.target.value))}},r.state={busy:!1,dropzoneActive:!1,file:null,fileName:"",fileUrl:"",importMethod:oo.LOCAL,uploadPipelineDescription:"",uploadPipelineName:""},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.dropzoneActive,r=t.file,a=t.fileName,i=t.fileUrl,s=t.importMethod,o=t.uploadPipelineName,l=t.busy;return c.createElement(pn.a,{id:"uploadDialog",onClose:function(){return e._uploadDialogClosed(!1)},open:this.props.open,classes:{paper:fo.root}},c.createElement(bn.a,null,"Upload and name your pipeline"),c.createElement("div",{className:Ve(20,"lr")},c.createElement("div",{className:Object(W.classes)(Fe.flex,Ve(10,"b"))},c.createElement(Ls.a,{id:"uploadLocalFileBtn",label:"Upload a file",checked:s===oo.LOCAL,control:c.createElement(He.a,{color:"primary"}),onChange:function(){return e.setState({importMethod:oo.LOCAL})}}),c.createElement(Ls.a,{id:"uploadFromUrlBtn",label:"Import by URL",checked:s===oo.URL,control:c.createElement(He.a,{color:"primary"}),onChange:function(){return e.setState({importMethod:oo.URL})}})),s===oo.LOCAL&&c.createElement(c.Fragment,null,c.createElement(uo.a,{id:"dropZone",disableClick:!0,onDrop:this._onDrop.bind(this),onDragEnter:this._onDropzoneDragEnter.bind(this),onDragLeave:this._onDropzoneDragLeave.bind(this),style:{position:"relative"},ref:this._dropzoneRef,inputProps:{tabIndex:-1}},n&&c.createElement("div",{className:fo.dropOverlay},"Drop files.."),c.createElement("div",{className:Ve(10,"b")},"Choose a pipeline package file from your computer, and give the pipeline a unique name.",c.createElement("br",null),"You can also drag and drop the file here."),c.createElement(vo,null),c.createElement(ze,{onChange:this.handleChange("fileName"),value:a,required:!0,label:"File",variant:"outlined",InputProps:{endAdornment:c.createElement(Us.a,{position:"end"},c.createElement(Jt.a,{color:"secondary",onClick:function(){return e._dropzoneRef.current.open()},style:{padding:"3px 5px",margin:0,whiteSpace:"nowrap"}},"Choose file")),readOnly:!0}}))),s===oo.URL&&c.createElement(c.Fragment,null,c.createElement("div",{className:Ve(10,"b")},"URL must be publicly accessible."),c.createElement(vo,null),c.createElement(ze,{onChange:this.handleChange("fileUrl"),value:i,required:!0,label:"URL",variant:"outlined"})),c.createElement(ze,{id:"uploadFileName",label:"Pipeline name",onChange:this.handleChange("uploadPipelineName"),required:!0,value:o,variant:"outlined"})),c.createElement(hn.a,null,c.createElement(Jt.a,{id:"cancelUploadBtn",onClick:function(){return e._uploadDialogClosed.bind(e)(!1)}},"Cancel"),c.createElement(gr,{id:"confirmUploadBtn",onClick:function(){return e._uploadDialogClosed.bind(e)(!0)},title:"Upload",busy:l,disabled:!o||(s===oo.LOCAL?!r:!i)})))}},{key:"_onDropzoneDragEnter",value:function(){this.setState({dropzoneActive:!0})}},{key:"_onDropzoneDragLeave",value:function(){this.setState({dropzoneActive:!1})}},{key:"_onDrop",value:function(e){this.setState({dropzoneActive:!1,file:e[0],fileName:e[0].name,uploadPipelineName:e[0].name.split(".")[0]})}},{key:"_uploadDialogClosed",value:function(e){var t=this;this.setState({busy:!0},Object(h.a)(p.a.mark((function n(){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.props.onClose(e,t.state.uploadPipelineName,t.state.file,t.state.fileUrl.trim(),t.state.importMethod,t.state.uploadPipelineDescription);case 2:n.sent?t.setState({busy:!1,dropzoneActive:!1,file:null,fileName:"",fileUrl:"",importMethod:oo.LOCAL,uploadPipelineDescription:"",uploadPipelineName:""}):t.setState({busy:!1});case 4:case"end":return n.stop()}}),n)}))))}}]),n}(c.Component),vo=function(){return c.createElement("div",{className:Ve(10,"b")},"For expected file format, refer to"," ",c.createElement(ho,{href:"https://www.kubeflow.org/docs/pipelines/sdk/build-component/#compile-the-pipeline"},"Compile Pipeline Documentation"),".")};function bo(e){e.stopPropagation()}var go={overrides:{a:{component:function(e){return l.a.createElement(ho,Object.assign({},e,{onClick:bo}))}}}},Eo=Object(Dt.a)({},go,{forceInline:!0}),yo=function(e){var t=e.description,n=e.forceInline;return(l.a.createElement(Xn.a,{options:n?Eo:go},t))},xo=function(e){return l.a.createElement($e.a,{title:e.value||"",enterDelay:300,placement:"top-start"},l.a.createElement("span",null,e.value||""))},wo=Object(W.stylesheet)({nonEditableInput:{color:ie},selectorDialog:{maxWidth:1200,minWidth:680,width:"calc(100% - 120px)"}}),Oo=function(e){return c.createElement(yo,{description:e.value||"",forceInline:!0})},ko=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={catchup:!0,description:"",errorMessage:"",experimentName:"",serviceAccount:"",experimentSelectorOpen:!1,isBeingStarted:!1,isClone:!1,isFirstRunInExperiment:!1,isRecurringRun:!1,parameters:[],pipelineName:"",pipelineSelectorOpen:!1,pipelineVersionName:"",pipelineVersionSelectorOpen:!1,runName:"",uploadDialogOpen:!1,usePipelineFromRunLabel:"Using pipeline from cloned run",useWorkflowFromRun:!1},e.pipelineSelectorColumns=[{customRenderer:xo,flex:1,label:"Pipeline \u540d\u79f0",sortKey:ia.NAME},{label:"\u63cf\u8ff0",flex:2,customRenderer:Oo},{label:"\u4e0a\u4f20\u65f6\u95f4",flex:1,sortKey:ia.CREATED_AT}],e.pipelineVersionSelectorColumns=[{customRenderer:xo,flex:2,label:"\u7248\u672c\u540d\u79f0",sortKey:ca.NAME},{label:"\u63cf\u8ff0",flex:1,customRenderer:Oo},{label:"\u4e0a\u4f20\u65f6\u95f4",flex:1,sortKey:ca.CREATED_AT}],e.experimentSelectorColumns=[{customRenderer:xo,flex:1,label:"\u5b9e\u9a8c\u540d\u79f0",sortKey:oa.NAME},{label:"\u63cf\u8ff0",flex:2},{label:"\u521b\u5efa\u65f6\u95f4",flex:1,sortKey:oa.CREATED_AT}],e.handleChange=function(t){return function(n){var r=n.target.value;e.setStateSafe(Object(qt.a)({},t,r),(function(){e._validate()}))}},e}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){return{actions:{},breadcrumbs:[{displayName:"\u5b9e\u9a8c",href:xl.EXPERIMENTS}],pageTitle:"\u65b0\u5efa RUN"}}},{key:"render",value:function(){var e=this,t=this.state,n=t.workflowFromRun,r=t.description,a=t.errorMessage,i=t.experimentName,s=t.serviceAccount,o=t.experimentSelectorOpen,l=t.isClone,u=t.isFirstRunInExperiment,d=t.isRecurringRun,f=t.parameters,m=t.pipelineName,v=t.pipelineVersionName,b=t.pipelineSelectorOpen,g=t.pipelineVersionSelectorOpen,E=t.runName,y=t.unconfirmedSelectedExperiment,x=t.unconfirmedSelectedPipeline,w=t.unconfirmedSelectedPipelineVersion,O=t.usePipelineFromRunLabel,k=t.useWorkflowFromRun,N=new Ka(this.props),S=N.get(bl.cloneFromRun)||N.get(bl.fromRunId),R=S?xl.PIPELINE_DETAILS.replace(":"+gl.pipelineId+"/version/:"+gl.pipelineVersionId+"?","")+N.build(Object(qt.a)({},bl.fromRunId,S)):"",_=new Wa(this.props,this.refresh.bind(this));return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"))},c.createElement("div",{className:Fe.scrollContainer},c.createElement("div",{className:Fe.header},"Run \u8be6\u60c5"),!!n&&c.createElement("div",null,c.createElement("span",null,O),!!S&&c.createElement(Ut.a,{to:R},"[View pipeline]")),!k&&c.createElement(ze,{value:m,required:!0,label:"Pipeline",disabled:!0,variant:"outlined",InputProps:{classes:{disabled:wo.nonEditableInput},endAdornment:c.createElement(Us.a,{position:"end"},c.createElement(Jt.a,{color:"secondary",id:"choosePipelineBtn",onClick:function(){return e.setStateSafe({pipelineSelectorOpen:!0})},style:{padding:"3px 5px",margin:0}},"\u9009\u62e9")),readOnly:!0}}),!k&&c.createElement(ze,{value:v,required:!0,label:"Pipeline \u7248\u672c",disabled:!0,variant:"outlined",InputProps:{classes:{disabled:wo.nonEditableInput},endAdornment:c.createElement(Us.a,{position:"end"},c.createElement(Jt.a,{color:"secondary",id:"choosePipelineVersionBtn",onClick:function(){return e.setStateSafe({pipelineVersionSelectorOpen:!0})},style:{padding:"3px 5px",margin:0}},"\u9009\u62e9")),readOnly:!0}}),c.createElement(pn.a,{open:b,classes:{paper:wo.selectorDialog},onClose:function(){return e._pipelineSelectorClosed(!1)},PaperProps:{id:"pipelineSelectorDialog"}},c.createElement(mn.a,null,c.createElement(Ks,Object.assign({},this.props,{title:"\u9009\u62e9pipeline",filterLabel:"\u8fc7\u6ee4 pipelines",listApi:Object(h.a)(p.a.mark((function e(){var t,n,r=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(t=da.pipelineServiceApi).listPipelines.apply(t,r);case 2:return n=e.sent,e.abrupt("return",{nextPageToken:n.next_page_token||"",resources:n.pipelines||[]});case 4:case"end":return e.stop()}}),e)}))),columns:this.pipelineSelectorColumns,emptyMessage:"\u65e0\u6570\u636e.",initialSortColumn:ia.CREATED_AT,selectionChanged:function(t){return e.setStateSafe({unconfirmedSelectedPipeline:t})},toolbarActionMap:_.upload((function(){return e.setStateSafe({pipelineSelectorOpen:!1,uploadDialogOpen:!0})})).getToolbarActionMap()}))),c.createElement(hn.a,null,c.createElement(Jt.a,{id:"cancelPipelineSelectionBtn",onClick:function(){return e._pipelineSelectorClosed(!1)},color:"secondary"},"\u53d6\u6d88"),c.createElement(Jt.a,{id:"usePipelineBtn",onClick:function(){return e._pipelineSelectorClosed(!0)},color:"secondary",disabled:!x},"\u4f7f\u7528\u8be5pipeline"))),c.createElement(pn.a,{open:g,classes:{paper:wo.selectorDialog},onClose:function(){return e._pipelineVersionSelectorClosed(!1)},PaperProps:{id:"pipelineVersionSelectorDialog"}},c.createElement(mn.a,null,c.createElement(Ks,Object.assign({},this.props,{title:"\u9009\u62e9pipeline version",filterLabel:"\u8fc7\u6ee4 pipeline versions",listApi:Object(h.a)(p.a.mark((function t(){var n,r=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,da.pipelineServiceApi.listPipelineVersions("PIPELINE",e.state.pipeline?e.state.pipeline.id:"",r.length<=1?void 0:r[1],r.length<=0?void 0:r[0],r.length<=2?void 0:r[2],r.length<=3?void 0:r[3]);case 2:return n=t.sent,t.abrupt("return",{nextPageToken:n.next_page_token||"",resources:n.versions||[]});case 4:case"end":return t.stop()}}),t)}))),columns:this.pipelineVersionSelectorColumns,emptyMessage:"\u65e0\u6570\u636e.",initialSortColumn:ca.CREATED_AT,selectionChanged:function(t){return e.setStateSafe({unconfirmedSelectedPipelineVersion:t})},toolbarActionMap:_.upload((function(){return e.setStateSafe({pipelineVersionSelectorOpen:!1,uploadDialogOpen:!0})})).getToolbarActionMap()}))),c.createElement(hn.a,null,c.createElement(Jt.a,{id:"cancelPipelineVersionSelectionBtn",onClick:function(){return e._pipelineVersionSelectorClosed(!1)},color:"secondary"},"\u53d6\u6d88"),c.createElement(Jt.a,{id:"usePipelineVersionBtn",onClick:function(){return e._pipelineVersionSelectorClosed(!0)},color:"secondary",disabled:!w},"\u4f7f\u7528\u8be5pipeline version"))),c.createElement(mo,{open:this.state.uploadDialogOpen,onClose:this._uploadDialogClosed.bind(this)}),c.createElement(pn.a,{open:o,classes:{paper:wo.selectorDialog},onClose:function(){return e._experimentSelectorClosed(!1)},PaperProps:{id:"experimentSelectorDialog"}},c.createElement(mn.a,null,c.createElement(Ks,Object.assign({},this.props,{title:"\u9009\u62e9\u5b9e\u9a8c",filterLabel:"\u8fc7\u6ee4 experiments",listApi:function(){var t=Object(h.a)(p.a.mark((function t(n,r,a,i){var s,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(s=JSON.parse(decodeURIComponent(i||'{"predicates": []}'))).predicates=(s.predicates||[]).concat([{key:"storage_state",op:Be.NOTEQUALS,string_value:pr.ARCHIVED.toString()}]),t.next=4,da.experimentServiceApi.listExperiment(n,r,a,encodeURIComponent(JSON.stringify(s)),e.props.namespace?"NAMESPACE":void 0,e.props.namespace);case 4:return o=t.sent,t.abrupt("return",{nextPageToken:o.next_page_token||"",resources:o.experiments||[]});case 6:case"end":return t.stop()}}),t)})));return function(e,n,r,a){return t.apply(this,arguments)}}(),columns:this.experimentSelectorColumns,emptyMessage:"\u65e0\u6570\u636e.",initialSortColumn:oa.CREATED_AT,selectionChanged:function(t){return e.setStateSafe({unconfirmedSelectedExperiment:t})}}))),c.createElement(hn.a,null,c.createElement(Jt.a,{id:"cancelExperimentSelectionBtn",onClick:function(){return e._experimentSelectorClosed(!1)},color:"secondary"},"\u53d6\u6d88"),c.createElement(Jt.a,{id:"useExperimentBtn",onClick:function(){return e._experimentSelectorClosed(!0)},color:"secondary",disabled:!y},"\u4f7f\u7528\u8be5\u5b9e\u9a8c"))),c.createElement(ze,{label:d?"Recurring run config name":"Run name",required:!0,onChange:this.handleChange("runName"),autoFocus:!0,value:E,variant:"outlined"}),c.createElement(ze,{label:"\u63cf\u8ff0 (\u9009\u586b)",multiline:!0,onChange:this.handleChange("description"),value:r,variant:"outlined"}),c.createElement("div",null,"\u5c06\u8be5RUN\u5173\u8054\u5230\u5b9e\u9a8c"),c.createElement(ze,{value:i,required:!0,label:"\u5b9e\u9a8c",disabled:!0,variant:"outlined",InputProps:{classes:{disabled:wo.nonEditableInput},endAdornment:c.createElement(Us.a,{position:"end"},c.createElement(Jt.a,{color:"secondary",id:"chooseExperimentBtn",onClick:function(){return e.setStateSafe({experimentSelectorOpen:!0})},style:{padding:"3px 5px",margin:0}},"\u9009\u62e9")),readOnly:!0}}),c.createElement("div",null,"\u8be5RUN\u5c06\u4f1a\u4f7f\u7528\u5982\u4e0b Kubernetes service account."," ",c.createElement(Ys,{helpText:c.createElement("div",null,"Note, the service account needs"," ",c.createElement(ho,{href:"https://github.com/argoproj/argo/blob/v2.3.0/docs/workflow-rbac.md"},"minimum permissions required by argo workflows")," ","and extra permissions the specific task requires.")})),c.createElement(ze,{value:s,onChange:this.handleChange("serviceAccount"),label:"Service Account (\u53ef\u9009)",variant:"outlined"}),c.createElement("div",{className:Fe.header},"Run \u7c7b\u578b"),l&&c.createElement("span",null,d?"\u5faa\u73af":"\u4ec5\u8fd0\u884c\u4e00\u6b21"),!l&&c.createElement(c.Fragment,null,c.createElement(Ls.a,{id:"oneOffToggle",label:"\u4ec5\u8fd0\u884c\u4e00\u6b21",control:c.createElement(He.a,{color:"primary"}),onChange:function(){return e._updateRecurringRunState(!1)},checked:!d}),c.createElement(Ls.a,{id:"recurringToggle",label:"\u5faa\u73af",control:c.createElement(He.a,{color:"primary"}),onChange:function(){return e._updateRecurringRunState(!0)},checked:d})),d&&c.createElement(c.Fragment,null,c.createElement("div",{className:Fe.header},"Run \u89e6\u53d1\u5668"),c.createElement("div",null,"\u9009\u62e9\u89e6\u53d1\u65b0\u8fd0\u884c\u7684\u65b9\u6cd5"),c.createElement(lo,{initialProps:{trigger:this.state.trigger,maxConcurrentRuns:this.state.maxConcurrentRuns,catchup:this.state.catchup},onChange:function(t){var n=t.trigger,r=t.maxConcurrentRuns,a=t.catchup;return e.setStateSafe({catchup:a,maxConcurrentRuns:r,trigger:n},e._validate.bind(e))}})),c.createElement(zs,{initialParams:f,titleMessage:this._runParametersMessage(),handleParamChange:this._handleParamChange.bind(this)}),c.createElement("div",{className:Object(W.classes)(Fe.flex,Ve(20,"tb"))},c.createElement(gr,{id:"startNewRunBtn",disabled:!!a,busy:this.state.isBeingStarted,className:Fe.buttonAction,title:"\u542f\u52a8",onClick:this._start.bind(this)}),c.createElement(Jt.a,{id:"exitNewRunPageBtn",onClick:function(){e.props.history.push(e.state.experiment?xl.EXPERIMENT_DETAILS.replace(":"+gl.experimentId,e.state.experiment.id):xl.RUNS)}},u?"\u8df3\u8fc7":"\u53d6\u6d88"),c.createElement("div",{className:Object(W.classes)(Ve(20,"r")),style:{color:"red"}},a),this._areParametersMissing()&&c.createElement("div",{id:"missing-parameters-message",style:{color:"orange"}},"Some parameters are missing values"))))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a,i,s,o,c,l,u,d,h,f,m,v,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.clearBanner(),t=new Ka(this.props),n=t.get(bl.experimentId),r=t.get(bl.cloneFromRun),a=t.get(bl.cloneFromRecurringRun),i=t.get(bl.fromRunId),!r){e.next=23;break}return e.prev=7,e.next=10,da.runServiceApi.getRun(r);case 10:return s=e.sent,e.next=13,this._prepareFormFromClone(s.run,s.pipeline_runtime);case 13:n||(n=gi.getFirstExperimentReferenceId(s.run)),e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(7),e.next=20,this.showPageError("Error: failed to retrieve original run: ".concat(r,"."),e.t0);case 20:pt.error("Failed to retrieve original run: ".concat(r),e.t0);case 21:e.next=78;break;case 23:if(!a){e.next=41;break}return e.prev=24,e.next=27,da.jobServiceApi.getJob(a);case 27:return o=e.sent,e.next=30,this._prepareFormFromClone(o);case 30:this.setStateSafe({trigger:o.trigger,maxConcurrentRuns:o.max_concurrency,catchup:!o.no_catchup}),n||(n=gi.getFirstExperimentReferenceId(o)),e.next=39;break;case 34:return e.prev=34,e.t1=e.catch(24),e.next=38,this.showPageError("Error: failed to retrieve original recurring run: ".concat(r,"."),e.t1);case 38:pt.error("Failed to retrieve original recurring run: ".concat(r),e.t1);case 39:e.next=78;break;case 41:if(!i){e.next=45;break}this._prepareFormFromEmbeddedPipeline(i),e.next=78;break;case 45:if(!(c=t.get(bl.pipelineId))){e.next=78;break}return e.prev=47,e.next=50,da.pipelineServiceApi.getPipeline(c);case 50:if(l=e.sent,this.setStateSafe({parameters:l.parameters||[],pipeline:l,pipelineName:l&&l.name||""}),!(u=t.get(bl.pipelineVersionId)||l.default_version&&l.default_version.id)){e.next=69;break}return e.prev=54,e.next=57,da.pipelineServiceApi.getPipelineVersion(u);case 57:d=e.sent,this.setStateSafe({parameters:d.parameters||[],pipelineVersion:d,pipelineVersionName:d&&d.name||"",runName:this._getRunNameFromPipelineVersion(d&&d.name||"")}),e.next=67;break;case 61:return e.prev=61,e.t2=e.catch(54),t.clear(bl.pipelineVersionId),e.next=66,this.showPageError("Error: failed to retrieve pipeline version: ".concat(u,"."),e.t2);case 66:pt.error("Failed to retrieve pipeline version: ".concat(u),e.t2);case 67:e.next=70;break;case 69:this.setStateSafe({runName:this._getRunNameFromPipelineVersion(l&&l.name||"")});case 70:e.next=78;break;case 72:return e.prev=72,e.t3=e.catch(47),t.clear(bl.pipelineId),e.next=77,this.showPageError("Error: failed to retrieve pipeline: ".concat(c,"."),e.t3);case 77:pt.error("Failed to retrieve pipeline: ".concat(c),e.t3);case 78:if(f="",m=[{displayName:"\u5b9e\u9a8c",href:xl.EXPERIMENTS}],!n){e.next=94;break}return e.prev=81,e.next=84,da.experimentServiceApi.getExperiment(n);case 84:h=e.sent,f=h.name||"",m.push({displayName:f,href:xl.EXPERIMENT_DETAILS.replace(":"+gl.experimentId,n)}),e.next=94;break;case 89:return e.prev=89,e.t4=e.catch(81),e.next=93,this.showPageError("Error: failed to retrieve associated experiment: ".concat(n,"."),e.t4);case 93:pt.error("Failed to retrieve associated experiment: ".concat(n),e.t4);case 94:v="1"===t.get(bl.isRecurring),b="".concat(r?"Clone":"Start",v?" a recurring run":" a run"),this.props.updateToolbar({actions:this.props.toolbarProps.actions,breadcrumbs:m,pageTitle:b}),this.setStateSafe({experiment:h,experimentName:f,isFirstRunInExperiment:"1"===t.get(bl.firstRunInExperiment),isRecurringRun:v}),this._validate();case 100:case"end":return e.stop()}}),e,this,[[7,16],[24,34],[47,72],[54,61],[81,89]])})));return function(){return e.apply(this,arguments)}}()},{key:"_experimentSelectorClosed",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state.experiment,t&&this.state.unconfirmedSelectedExperiment&&(n=this.state.unconfirmedSelectedExperiment),this.setStateSafe({experiment:n,experimentName:n&&n.name||"",experimentSelectorOpen:!1});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_pipelineSelectorClosed",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,i,s=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.parameters,a=n.pipeline,i=n.pipelineVersion,!t||!this.state.unconfirmedSelectedPipeline){e.next=8;break}if(!(a=this.state.unconfirmedSelectedPipeline).default_version){e.next=8;break}return e.next=6,da.pipelineServiceApi.getPipelineVersion(a.default_version.id);case 6:i=e.sent,r=i.parameters||[];case 8:this.setStateSafe({parameters:r,pipeline:a,pipelineName:a&&a.name||"",pipelineSelectorOpen:!1,pipelineVersion:i,pipelineVersionName:i&&i.name||""},(function(){return s._validate()}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_pipelineVersionSelectorClosed",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state,r=n.parameters,a=n.pipelineVersion,t&&this.state.unconfirmedSelectedPipelineVersion&&(a=this.state.unconfirmedSelectedPipelineVersion,r=a.parameters||[]),this.setStateSafe({parameters:r,pipelineVersion:a,pipelineVersionName:a&&a.name||"",pipelineVersionSelectorOpen:!1},(function(){return i._validate()}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateRecurringRunState",value:function(e){this.props.updateToolbar({pageTitle:e?"Start a recurring run":"Start a new run"}),this.setStateSafe({isRecurringRun:e})}},{key:"_handleParamChange",value:function(e,t){var n=this.state.parameters;n[e].value=t,this.setStateSafe({parameters:n})}},{key:"_uploadDialogClosed",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r,a,i,s){var o,c,l=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&(i!==oo.LOCAL||r)&&(i!==oo.URL||a)){e.next=3;break}return this.setStateSafe({pipelineSelectorOpen:!0,uploadDialogOpen:!1}),e.abrupt("return",!1);case 3:if(e.prev=3,i!==oo.LOCAL){e.next=10;break}return e.next=7,da.uploadPipeline(n,s||"",r);case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,da.pipelineServiceApi.createPipeline({name:n,url:{pipeline_url:a}});case 12:e.t0=e.sent;case 13:return o=e.t0,this.setStateSafe({pipeline:o,pipelineName:o&&o.name||"",pipelineSelectorOpen:!1,uploadDialogOpen:!1},(function(){return l._validate()})),e.abrupt("return",!0);case 18:return e.prev=18,e.t1=e.catch(3),e.next=22,ft(e.t1);case 22:return c=e.sent,this.showErrorDialog("Failed to upload pipeline",c),e.abrupt("return",!1);case 25:case"end":return e.stop()}}),e,this,[[3,18]])})));return function(t,n,r,a,i,s){return e.apply(this,arguments)}}()},{key:"_prepareFormFromEmbeddedPipeline",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,da.runServiceApi.getRun(t);case 3:r=e.sent,n=gi.getWorkflowManifest(r.run),e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,this.showPageError("Error: failed to retrieve the specified run: ".concat(t,"."),e.t0);case 11:return pt.error("Failed to retrieve the specified run: ".concat(t),e.t0),e.abrupt("return");case 13:if(n){e.next=17;break}return e.next=16,this.showPageError("Error: somehow the run provided in the query params: ".concat(t," had no embedded pipeline."));case 16:return e.abrupt("return");case 17:e.prev=17,a=JSON.parse(n),i=gi.getParametersFromRun(r),this.setStateSafe({parameters:i,usePipelineFromRunLabel:"Using pipeline from previous page",useWorkflowFromRun:!0,workflowFromRun:a}),e.next=29;break;case 23:return e.prev=23,e.t1=e.catch(17),e.next=27,this.showPageError("Error: failed to parse the embedded pipeline's spec: ".concat(n,"."),e.t1);case 27:return pt.error("Failed to parse the embedded pipeline's spec from run: ".concat(t),e.t1),e.abrupt("return");case 29:this._validate();case 30:case"end":return e.stop()}}),e,this,[[0,7],[17,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_prepareFormFromClone",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r,a,i,s,o,c,l,u,d,h,f,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return pt.error("Could not get cloned run details"),e.abrupt("return");case 3:if(s=!1,o="",c="",l="",u=t.service_account||"",d=gi.getPipelineId(t),h=gi.getPipelineVersionId(t),f=gi.getWorkflowManifest(t),!h){e.next=30;break}return e.prev=12,e.next=15,da.pipelineServiceApi.getPipelineVersion(h);case 15:return a=e.sent,l=a&&a.name?a.name:"",e.next=19,da.pipelineServiceApi.getPipeline(gi.getPipelineIdFromApiPipelineVersion(a));case 19:r=e.sent,c=r.name||"",e.next=28;break;case 23:return e.prev=23,e.t0=e.catch(12),e.next=27,this.showPageError("Error: failed to find a pipeline version corresponding to that of the original run:"+" ".concat(t.id,"."),e.t0);case 27:return e.abrupt("return");case 28:e.next=63;break;case 30:if(!d){e.next=45;break}return e.prev=31,e.next=34,da.pipelineServiceApi.getPipeline(d);case 34:r=e.sent,c=r.name||"",e.next=43;break;case 38:return e.prev=38,e.t1=e.catch(31),e.next=42,this.showPageError("Error: failed to find a pipeline corresponding to that of the original run:"+" ".concat(t.id,"."),e.t1);case 42:return e.abrupt("return");case 43:e.next=63;break;case 45:if(!f){e.next=60;break}e.prev=46,i=JSON.parse(f),c=i.metadata.name||"",e.next=56;break;case 51:return e.prev=51,e.t2=e.catch(46),e.next=55,this.showPageError("Error: failed to read the clone run's pipeline definition.",e.t2);case 55:return e.abrupt("return");case 56:s=!0,o="Using pipeline from cloned run",e.next=63;break;case 60:return e.next=62,this.showPageError("Could not find the cloned run's pipeline definition.");case 62:return e.abrupt("return");case 63:if(t.pipeline_spec&&t.pipeline_spec.workflow_manifest){e.next=67;break}return e.next=66,this.showPageError("Error: run ".concat(t.id," had no workflow manifest"));case 66:return e.abrupt("return");case 67:if(!n){e.next=73;break}return e.next=70,gi.getParametersFromRuntime(n);case 70:e.t3=e.sent,e.next=74;break;case 73:e.t3=t.pipeline_spec.parameters||[];case 74:m=e.t3,this.setStateSafe({isClone:!0,parameters:m,pipeline:r,pipelineName:c,pipelineVersion:a,pipelineVersionName:l,runName:this._getCloneName(t.name),usePipelineFromRunLabel:o,useWorkflowFromRun:s,workflowFromRun:i,serviceAccount:u}),this._validate();case 77:case"end":return e.stop()}}),e,this,[[12,23],[31,38],[46,51]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_runParametersMessage",value:function(){return this.state.pipeline||this.state.workflowFromRun?this.state.parameters.length?"\u8be5pipeline\u9700\u8981\u53c2\u6570":"\u8be5pipeline \u6ca1\u6709\u53c2\u6570":"\u9009\u62e9pipeline\u4ee5\u67e5\u770b\u53c2\u6570"}},{key:"_start",value:function(){var e=this;if(!this.state.pipelineVersion&&!this.state.workflowFromRun)return this.showErrorDialog("Run \u521b\u5efa\u5931\u8d25","\u6ca1\u6709pipeline version\uff0c\u65e0\u6cd5\u542f\u52a8\u8fd0\u884c"),void pt.error("Cannot start run without pipeline version");var t=[];this.state.experiment&&t.push({key:{id:this.state.experiment.id,type:Vr.EXPERIMENT},relationship:Fr.OWNER}),this.state.pipelineVersion&&t.push({key:{id:this.state.pipelineVersion.id,type:Vr.PIPELINEVERSION},relationship:Fr.CREATOR});var n={description:this.state.description,name:this.state.runName,pipeline_spec:{parameters:(this.state.parameters||[]).map((function(e){return e.value=(e.value||"").trim(),e})),workflow_manifest:this.state.useWorkflowFromRun?JSON.stringify(this.state.workflowFromRun):void 0},resource_references:t,service_account:this.state.serviceAccount};this.state.isRecurringRun&&(n=Object.assign(n,{enabled:!0,max_concurrency:this.state.maxConcurrentRuns||"1",no_catchup:!this.state.catchup,trigger:this.state.trigger})),this.setStateSafe({isBeingStarted:!0},Object(h.a)(p.a.mark((function t(){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e.state.isRecurringRun){t.next=6;break}return t.next=4,da.jobServiceApi.createJob(n);case 4:t.next=8;break;case 6:return t.next=8,da.runServiceApi.createRun(n);case 8:t.next=18;break;case 10:return t.prev=10,t.t0=t.catch(0),t.next=14,ft(t.t0);case 14:return r=t.sent,e.showErrorDialog("Run creation failed",r),pt.error("Error creating Run:",t.t0),t.abrupt("return");case 18:return t.prev=18,e.setStateSafe({isBeingStarted:!1}),t.finish(18);case 21:e.state.experiment?e.props.history.push(xl.EXPERIMENT_DETAILS.replace(":"+gl.experimentId,e.state.experiment.id)):e.props.history.push(xl.RUNS),e.props.updateSnackbar({message:"Successfully started new Run: ".concat(n.name),open:!0});case 23:case"end":return t.stop()}}),t,null,[[0,10,18,21]])}))))}},{key:"_getCloneName",value:function(e){var t=e.match(/Clone(?: \(([0-9]*)\))? of (.*)/);if(t){var n=t[1]?+t[1]:1;return"Clone (".concat(n+1,") of ").concat(t[2])}return"Clone of "+e}},{key:"_generateRandomString",value:function(e){var t=0;function n(){var e=Math.trunc((t+16*Math.random())%16);return t=Math.floor(t/16),e.toString(16)}for(var r="",a=0;a<e;++a)r+=n();return r}},{key:"_getRunNameFromPipelineVersion",value:function(e){return"Run of "+e+" ("+this._generateRandomString(5)+")"}},{key:"_validate",value:function(){var e,t=this.state,n=t.pipelineVersion,r=t.workflowFromRun,a=t.maxConcurrentRuns,i=t.runName,s=t.trigger;try{if(!n&&!r)throw new Error(" pipeline version \u5fc5\u987b\u9009\u62e9");if(!i)throw new Error("Run \u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a");if(s&&(!!s.cron_schedule||!!s.periodic_schedule)){var o=s.cron_schedule?s.cron_schedule.start_time:s.periodic_schedule.start_time,c=s.cron_schedule?s.cron_schedule.end_time:s.periodic_schedule.end_time;if(o&&c&&o>c)throw new Error("\u622a\u81f3\u65f6\u95f4\u4e0d\u80fd\u65e9\u4e8e\u5f00\u59cb\u65f6\u95f4");if(void 0!==a&&(e=a,isNaN(Number.parseInt(e,10))||!(+e>0)))throw new Error("\u6700\u5927\u5e76\u53d1RUN\u5fc5\u987b\u4e3a\u6b63\u6574\u6570")}this.setStateSafe({errorMessage:""})}catch(l){this.setStateSafe({errorMessage:l.message})}}},{key:"_areParametersMissing",value:function(){return this.state.parameters.some((function(e){return!e.value}))}}]),n}(Ft),No=function(e){var t=c.useContext(_t);return(c.createElement(ko,Object.assign({},e,{namespace:t})))},So=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){return{actions:{},breadcrumbs:[],pageTitle:""}}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.createElement("div",{style:{margin:"100px auto",textAlign:"center"}},c.createElement("div",{style:{color:"#aaa",fontSize:50,fontWeight:"bold"}},"404"),c.createElement("div",{style:{fontSize:16}},"Page Not Found: ",this.props.location.pathname))}}]),n}(Ft),Ro=n(142),_o=function e(){Object(a.a)(this,e),this.args=void 0,this.command=void 0,this.condition=void 0,this.image=void 0,this.inputs=void 0,this.nodeType=void 0,this.outputs=void 0,this.volumeMounts=void 0,this.resource=void 0,this.args=[],this.command=[],this.condition="",this.image="",this.inputs=[[]],this.nodeType="unknown",this.outputs=[[]],this.volumeMounts=[[]],this.resource=[[]]};function Co(e,t){return t&&(t.container||t.resource)?(t.container?(e.nodeType="container",e.args=t.container.args||[],e.command=t.container.command||[],e.image=t.container.image||"",e.volumeMounts=(t.container.volumeMounts||[]).map((function(e){return[e.mountPath,e.name]}))):(e.nodeType="resource",t.resource&&t.resource.action&&t.resource.manifest?e.resource=[[t.resource.action,t.resource.manifest]]:e.resource=[[]]),t.inputs&&(e.inputs=(t.inputs.parameters||[]).map((function(e){return[e.name,e.value||""]}))),t.outputs&&(e.outputs=(t.outputs.parameters||[]).map((function(e){var t="";return e.value?t=e.value:e.valueFrom&&(t=e.valueFrom.jqFilter||e.valueFrom.jsonPath||e.valueFrom.parameter||e.valueFrom.path||""),[e.name,t]}))),e):e}function Io(e){var t=new Ga.graphlib.Graph;if(t.setGraph({}),t.setDefaultEdgeLabel((function(){return{}})),!e.spec||!e.spec.templates)throw new Error("Could not generate graph. Provided Pipeline had no components.");var n,r=e.spec.templates,a=new Map,i=Object(Sn.a)(r.filter((function(e){return!!e&&!!e.name})));try{for(i.s();!(n=i.n()).done;){var s=n.value;if(s.name===e.spec.onExit){var o=new _o;Co(o,s),t.setNode(s.name,{bgColor:re,height:li,info:o,label:"onExit - "+s.name,width:ui})}s.container?a.set(s.name,{nodeType:"container",template:s}):s.resource?a.set(s.name,{nodeType:"resource",template:s}):s.dag?a.set(s.name,{nodeType:"dag",template:s}):pt.verbose("Template: ".concat(s.name," was neither a Container/Resource nor a DAG"))}}catch(l){i.e(l)}finally{i.f()}if(function e(t,n,r,a,i){var s=r.get(n);s&&"dag"===s.nodeType&&(a.set(n,i||"/"+n),(s.template.dag.tasks||[]).forEach((function(n){var s=i+"/"+n.name;if(n.name.startsWith("exit-handler"))e(t,n.template,r,a,"");else if(a.has(n.name))t.setEdge(i,a.get(n.name));else{i&&!n.dependencies&&t.setEdge(i,s);var o=new _o;n.when&&(o.condition=n.when);var c=r.get(n.template),l=n.template;if(c)if("dag"===c.nodeType)e(t,n.template,r,a,s);else{if("container"!==c.nodeType&&"resource"!==c.nodeType)throw new Error("Unknown nodetype: ".concat(c.nodeType," on workflow template: ").concat(c.template));l=pi(c.template.metadata)||l,Co(o,c.template)}t.setNode(s,{bgColor:n.when?"cornsilk":void 0,height:li,info:o,label:l,width:ui}),(n.dependencies||[]).forEach((function(e){return t.setEdge(i+"/"+e,s)}))}})))}(t,e.spec.entrypoint,a,new Map,""),0===t.nodeCount()){var c=r.find((function(t){return t.name===e.spec.entrypoint}));c&&t.setNode(c.name,{height:li,label:c.name,width:ui})}return t}var Po=Object(W.stylesheet)({arrowHead:{borderColor:te+" transparent transparent transparent",borderStyle:"solid",borderWidth:"7px 6px 0 6px",content:"''",position:"absolute"},icon:{padding:"5px 7px 0px 7px"},label:{color:oe,flexGrow:1,fontFamily:Le,fontSize:13,fontWeight:500,lineHeight:"16px",overflow:"hidden",padding:10,textOverflow:"ellipsis",whiteSpace:"nowrap"},line:{position:"absolute"},node:{$nest:{"&:hover":{borderColor:ue}},backgroundColor:G,border:"solid 1px #d6d6d6",borderRadius:3,boxSizing:"content-box",color:"#124aa4",cursor:"pointer",display:"flex",fontSize:_e,margin:10,position:"absolute",zIndex:we},nodeSelected:{border:"solid 2px ".concat(ue)},placeholderNode:{margin:10,position:"absolute",transform:"translate(71px, 14px)"},root:{backgroundColor:ee,borderLeft:"solid 1px "+Y,flexGrow:1,overflow:"auto",position:"relative"}}),jo=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={hasError:!1},e}return Object(i.a)(n,[{key:"componentDidCatch",value:function(e){var t="There was an error rendering the graph.",n="".concat(t," This is likely a bug in Kubeflow Pipelines. Error message: '").concat(e.message,"'.");this.props.onError&&this.props.onError(t,n),this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?c.createElement("div",{className:Po.root}):this.props.children}}]),n}(c.Component),To=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).LEFT_OFFSET=100,r.TOP_OFFSET=44,r.EDGE_THICKNESS=2,r.EDGE_X_BUFFER=Math.round(ui/6),r.state={},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props.graph;if(!t.nodes().length)return null;Ga.layout(t);var n=[];t.edges().forEach((function(r){var a=t.edge(r),i=[];if(a.points.length>1)for(var s=1;s<a.points.length;s++){var o=a.points[s-1].x,c=a.points[s-1].y,l=a.points[s].x,u=a.points[s].y,p=c<=u;if(1===s){var d=t.node(r.v);if(!d)throw new Error("Graph definition is invalid. Cannot get node by '".concat(r.v,"'."));c=p?d.y+d.height/2-3:d.y-d.height/2,o=e._ensureXIsWithinNode(d,o)}var h=s===a.points.length-1;if(h){var f=t.node(r.w);f.isPlaceholder||(u=p?f.y-e.TOP_OFFSET+5:f.y+f.height/2+3,l=e._ensureXIsWithinNode(f,l))}if(h&&o!==l){var m=(c+u)/2;e._addDiagonalSegment(i,o,c,l,m),p?i.push({angle:270,length:u-m,x1:l-5,x2:l,y1:m+4,y2:u}):i.push({angle:90,length:m-u,x1:l-5,x2:l,y1:m-4,y2:u})}else e._addDiagonalSegment(i,o,c,l,u)}n.push({color:a.color,from:r.v,isPlaceholder:a.isPlaceholder,segments:i,to:r.w})}));var r=this.state.hoveredNode,a=this.props.selectedNodeId||r;return c.createElement("div",{className:Po.root},t.nodes().map((function(e){return Object.assign(t.node(e),{id:e})})).map((function(t,n){return c.createElement("div",{className:Object(W.classes)(t.isPlaceholder?Po.placeholderNode:Po.node,"graphNode",t.id===e.props.selectedNodeId?Po.nodeSelected:""),key:n,onMouseEnter:function(){e.props.selectedNodeId||e.setState({hoveredNode:t.id})},onMouseLeave:function(){e.state.hoveredNode===t.id&&e.setState({hoveredNode:void 0})},onClick:function(){return!t.isPlaceholder&&e.props.onClick&&e.props.onClick(t.id)},style:{backgroundColor:t.bgColor,left:t.x,maxHeight:t.height,minHeight:t.height,top:t.y,transition:"left 0.5s, top 0.5s",width:t.width}},!t.isPlaceholder&&c.createElement($e.a,{title:t.label,enterDelay:300},c.createElement("div",{className:Po.label},t.label)),c.createElement("div",{className:Po.icon,style:{background:t.statusColoring}},t.icon))})),n.map((function(t,n){var r=e._getEdgeColor(t,a),i=t.segments[t.segments.length-1];return c.createElement("div",{key:n},t.segments.map((function(t,n){return c.createElement("div",{className:Po.line,key:n,style:{backgroundColor:r,height:e.EDGE_THICKNESS,left:t.x1+e.LEFT_OFFSET,top:t.y1+e.TOP_OFFSET,transform:"rotate(".concat(t.angle,"deg)"),transition:"left 0.5s, top 0.5s",width:t.length}})})),!t.isPlaceholder&&void 0!==i.x2&&void 0!==i.y2&&c.createElement("div",{className:Po.arrowHead,style:{borderTopColor:r,left:i.x2+e.LEFT_OFFSET-6,top:i.y2+e.TOP_OFFSET-3,transform:"rotate(".concat(i.angle+90,"deg)")}}))})))}},{key:"_addDiagonalSegment",value:function(e,t,n,r,a){var i=(t+r)/2,s=Math.sqrt(Math.pow(t-r,2)+Math.pow(n-a,2))+.5,o=i-s/2,c=(n+a)/2,l=180*Math.atan2(n-a,t-r)/Math.PI;e.push({angle:l,length:s,x1:o,x2:r,y1:c,y2:a})}},{key:"_ensureXIsWithinNode",value:function(e,t){var n=e.x+e.width-this.LEFT_OFFSET-this.EDGE_X_BUFFER;if(n<=t)return n;var r=e.x-this.LEFT_OFFSET+this.EDGE_X_BUFFER;return r>=t?r:t}},{key:"_getEdgeColor",value:function(e,t){if(t){if(e.from===t)return ue;if(e.to===t)return pe}return e.isPlaceholder?ve:te}}]),n}(c.Component),Ao=function(e){return c.createElement(jo,{onError:e.onError},c.createElement(To,e))};Ao.displayName="EnhancedGraph";var Do=Ao,Lo=n(234),Mo=n.n(Lo),Uo=n(457),Fo=n(164),Vo=n.n(Fo),Bo=Object(W.stylesheet)({closeButton:{color:ne,margin:15,minHeight:0,minWidth:0,padding:0},nodeName:{flexGrow:1,textAlign:"center"},sidepane:{backgroundColor:G,borderLeft:"solid 1px #ddd",bottom:0,display:"flex",flexFlow:"column",position:"absolute !important",right:0,top:0,zIndex:Ne}}),zo=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isBusy,n=e.isOpen,r=e.onClose,a=e.title;return(c.createElement(Vo.a,{in:n,direction:"left"},c.createElement(Uo.a,{className:Bo.sidepane,defaultSize:{width:"70%"},maxWidth:"90%",minWidth:100,enable:{bottom:!1,bottomLeft:!1,bottomRight:!1,left:!0,right:!1,top:!1,topLeft:!1,topRight:!1}},n&&c.createElement("div",{className:Fe.page},c.createElement("div",{className:Fe.flex},c.createElement(Jt.a,{className:Bo.closeButton,onClick:r},c.createElement(Un.a,null)),c.createElement("div",{className:Bo.nodeName},a)),c.createElement("div",{className:Fe.page},!0===t&&c.createElement(A.a,{size:30,className:Fe.absoluteCenter}),c.createElement("div",{className:Fe.page},this.props.children))))))}}]),n}(c.Component),Ko=Object(W.stylesheet)({key:{color:oe,flex:"0 0 50%",fontWeight:"bold",maxWidth:300},row:{borderBottom:"1px solid ".concat(Y),display:"flex",padding:"".concat(Te(-5),"px ").concat(Te(-6),"px")},valueJson:{flexGrow:1},valueText:{flexGrow:1,overflow:"hidden",overflowWrap:"break-word"}});var Wo=function(e){var t=e.fields,n=e.title,r=e.valueComponent,a=e.valueComponentProps;return(c.createElement(c.Fragment,null,!!n&&c.createElement("div",{className:Fe.header},n),c.createElement("div",null,t.map((function(e,t){var n=Object(d.a)(e,2),i=n[0],s=n[1];if("string"===typeof s)try{var o=JSON.parse(s);if(null===o||"object"!==typeof o)throw new Error("Parsed JSON was neither an array nor an object. Using default renderer");return(c.createElement("div",{key:t,className:Ko.row},c.createElement("span",{className:Ko.key},i),c.createElement(Pa,{width:"100%",minLines:3,maxLines:20,mode:"json",theme:"github",highlightActiveLine:!0,showGutter:!0,readOnly:!0,value:JSON.stringify(o,null,2)||""})))}catch(l){}return(c.createElement("div",{key:t,className:Ko.row},c.createElement("span",{className:Ko.key},i),c.createElement("span",{className:Ko.valueText},r&&s?c.createElement(r,Object.assign({value:s},a)):"".concat(s||""))))})))))},qo=Object(W.stylesheet)({fontSizeTitle:{fontSize:Ie},taskTitle:{fontSize:Ie,fontWeight:"bold",paddingTop:20}}),Ho=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.nodeInfo;return(c.createElement("div",null,"container"===e.nodeType&&c.createElement("div",null,c.createElement(Wo,{title:"Input parameters",fields:e.inputs}),c.createElement(Wo,{title:"Output parameters",fields:e.outputs}),c.createElement("div",{className:Object(W.classes)(Fe.header,qo.fontSizeTitle)},"Arguments"),e.args.map((function(e,t){return c.createElement("div",{key:t,style:{fontFamily:"monospace"}},e)})),c.createElement("div",{className:Object(W.classes)(Fe.header,qo.fontSizeTitle)},"Command"),e.command.map((function(e,t){return c.createElement("div",{key:t,style:{fontFamily:"monospace"}},e)})),c.createElement("div",{className:Object(W.classes)(Fe.header,qo.fontSizeTitle)},"Image"),c.createElement("div",{style:{fontFamily:"monospace"}},e.image),c.createElement(Wo,{title:"Volume Mounts",fields:e.volumeMounts})),"resource"===e.nodeType&&c.createElement("div",null,c.createElement(Wo,{title:"Input parameters",fields:e.inputs}),c.createElement(Wo,{title:"Output parameters",fields:e.outputs}),c.createElement(Wo,{title:"Manifest",fields:e.resource})),!!e.condition&&c.createElement("div",null,c.createElement("div",{className:qo.taskTitle},"Condition"),c.createElement("div",null,"Run when: ",e.condition))))}}]),n}(c.Component),Go=(n(927),Object(W.stylesheet)({containerCss:{$nest:{"& .CodeMirror":{height:"100%",width:"80%"},"& .CodeMirror-gutters":{backgroundColor:"#f7f7f7"}},background:"#f7f7f7",height:"100%"},footer:{background:ee,display:"flex",padding:"0 0 20px 20px"},footerInfoOffset:{marginLeft:540},infoSpan:{color:ae,fontFamily:Le,fontSize:Se,letterSpacing:"0.21px",lineHeight:"24px",paddingLeft:6},summaryCard:{bottom:20,left:20,padding:10,position:"absolute",width:500,zIndex:ke},summaryKey:{color:oe,marginTop:10}})),Xo=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={graph:null,pipeline:null,selectedNodeId:"",selectedNodeInfo:null,selectedTab:0,summaryShown:!0,versions:[]},r}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){var e=this,t=new Wa(this.props,this.refresh.bind(this)),n=new Ka(this.props).get(bl.fromRunId),r=this.props.match.params[gl.pipelineId],a=this.props.match.params[gl.pipelineVersionId];return t.newRunFromPipelineVersion((function(){return r||""}),(function(){return a||""})).newPipelineVersion("Upload version",(function(){return r||""})),n?{actions:t.getToolbarActionMap(),breadcrumbs:[{displayName:n,href:xl.RUN_DETAILS.replace(":"+gl.runId,n)}],pageTitle:"Pipeline details"}:(t.newExperiment((function(){return e.state.pipeline?e.state.pipeline.id:r||""})).delete((function(){return a?[a]:[]}),"pipeline version",this._deleteCallback.bind(this),!0),{actions:t.getToolbarActionMap(),breadcrumbs:[{displayName:"Pipelines",href:xl.PIPELINES}],pageTitle:this.props.match.params[gl.pipelineId]})}},{key:"render",value:function(){var e=this,t=this.state,n=t.pipeline,r=t.selectedNodeId,a=t.selectedTab,i=t.selectedVersion,s=t.summaryShown,o=t.templateString,l=t.versions,u=null;return this.state.graph&&this.state.graph.node(r)&&(u=this.state.graph.node(r).info,r&&!u&&pt.error("Node with ID: ".concat(r," was not found in the graph"))),c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"t"))},c.createElement("div",{className:Fe.page},c.createElement($t,{selectedTab:a,onSwitch:function(t){return e.setStateSafe({selectedTab:t})},tabs:["Graph","YAML"]}),c.createElement("div",{className:Fe.page},0===a&&c.createElement("div",{className:Fe.page},this.state.graph&&c.createElement("div",{className:Fe.page,style:{position:"relative",overflow:"hidden"}},!!n&&s&&c.createElement(Vn.a,{className:Go.summaryCard},c.createElement("div",{style:{alignItems:"baseline",display:"flex",justifyContent:"space-between"}},c.createElement("div",{className:Fe.header},"Summary"),c.createElement(Jt.a,{onClick:function(){return e.setStateSafe({summaryShown:!1})},color:"secondary"},"Hide")),c.createElement("div",{className:Go.summaryKey},"ID"),c.createElement("div",null,n.id||"Unable to obtain Pipeline ID"),l.length&&c.createElement(c.Fragment,null,c.createElement("form",{autoComplete:"off"},c.createElement(ya.a,null,c.createElement(fa.a,null,"Version"),c.createElement(wa.a,{value:i?i.id:n.default_version.id,onChange:function(t){return e.handleVersionSelected(t.target.value)},inputProps:{id:"version-selector",name:"selectedVersion"}},l.map((function(e,t){return c.createElement(We.a,{key:e.id,value:e.id},e.name)}))))),c.createElement("div",{className:Go.summaryKey},c.createElement("a",{href:this._createVersionUrl(),target:"_blank",rel:"noopener noreferrer"},"Version source"))),c.createElement("div",{className:Go.summaryKey},"Uploaded on"),c.createElement("div",null,ht(n.created_at)),c.createElement("div",{className:Go.summaryKey},"Description"),c.createElement(yo,{description:n.description||""})),c.createElement(Do,{graph:this.state.graph,selectedNodeId:r,onClick:function(t){return e.setStateSafe({selectedNodeId:t})},onError:function(t,n){return e.props.updateBanner({message:t,additionalInfo:n,mode:"error"})}}),c.createElement(zo,{isOpen:!!r,title:r,onClose:function(){return e.setStateSafe({selectedNodeId:""})}},c.createElement("div",{className:Fe.page},!u&&c.createElement("div",{className:Fe.absoluteCenter},"Unable to retrieve node info"),!!u&&c.createElement("div",{className:Ve(20,"lr")},c.createElement(Ho,{nodeInfo:u})))),c.createElement("div",{className:Go.footer},!s&&c.createElement(Jt.a,{onClick:function(){return e.setStateSafe({summaryShown:!s})},color:"secondary"},"Show summary"),c.createElement("div",{className:Object(W.classes)(Fe.flex,s&&!!n&&Go.footerInfoOffset)},c.createElement(Mo.a,{className:Fe.infoIcon}),c.createElement("span",{className:Go.infoSpan},"Static pipeline graph")))),!this.state.graph&&c.createElement("span",{style:{margin:"40px auto"}},"No graph to show")),1===a&&!!o&&c.createElement("div",{className:Go.containerCss},c.createElement(Pa,{value:o||"",height:"100%",width:"100%",mode:"yaml",theme:"github",editorProps:{$blockScrolling:!0},readOnly:!0,highlightActiveLine:!0,showGutter:!0})))))}},{key:"handleVersionSelected",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.pipeline){e.next=14;break}return n=(this.state.versions||[]).find((function(e){return e.id===t})),e.next=4,this._getTemplateString(this.state.pipeline.id,t);case 4:return r=e.sent,this.props.history.replace({pathname:"/pipelines/details/".concat(this.state.pipeline.id,"/version/").concat(t)}),e.t0=this,e.next=9,this._createGraph(r);case 9:e.t1=e.sent,e.t2=n,e.t3=r,e.t4={graph:e.t1,selectedVersion:e.t2,templateString:e.t3},e.t0.setStateSafe.call(e.t0,e.t4);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.load());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a,i,s,o,c,l,u,d,h,f,m,v,b;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.clearBanner(),t=new Ka(this.props).get(bl.fromRunId),n=null,r=null,a="",i=[],s=this.props.toolbarProps.actions,o="",l=[],!t){e.next=49;break}return e.prev=10,e.next=13,da.runServiceApi.getRun(t);case 13:u=e.sent,e.prev=14,d=JSON.parse(gi.getWorkflowManifest(u.run)||"{}"),e.prev=16,a=Ro.safeDump(d),e.next=25;break;case 20:return e.prev=20,e.t0=e.catch(16),e.next=24,this.showPageError("Failed to parse pipeline spec from run with ID: ".concat(u.run.id,"."),e.t0);case 24:pt.error("Failed to convert pipeline spec YAML from run with ID: ".concat(u.run.id,"."),e.t0);case 25:e.next=32;break;case 27:return e.prev=27,e.t1=e.catch(14),e.next=31,this.showPageError("Failed to parse pipeline spec from run with ID: ".concat(u.run.id,"."),e.t1);case 31:pt.error("Failed to parse pipeline spec JSON from run with ID: ".concat(u.run.id,"."),e.t1);case 32:if(!(h=gi.getFirstExperimentReferenceId(u.run))){e.next=37;break}return e.next=36,da.experimentServiceApi.getExperiment(h);case 36:f=e.sent;case 37:f?i.push({displayName:"Experiments",href:xl.EXPERIMENTS},{displayName:f.name,href:xl.EXPERIMENT_DETAILS.replace(":"+gl.experimentId,f.id)}):i.push({displayName:"All runs",href:xl.RUNS}),i.push({displayName:u.run.name,href:xl.RUN_DETAILS.replace(":"+gl.runId,t)}),o="Pipeline details",e.next=47;break;case 42:return e.prev=42,e.t2=e.catch(10),e.next=46,this.showPageError("Cannot retrieve run details.",e.t2);case 46:pt.error("Cannot retrieve run details.",e.t2);case 47:e.next=104;break;case 49:return m=this.props.match.params[gl.pipelineId],e.prev=50,e.next=53,da.pipelineServiceApi.getPipeline(m);case 53:n=e.sent,e.next=62;break;case 56:return e.prev=56,e.t3=e.catch(50),e.next=60,this.showPageError("Cannot retrieve pipeline details.",e.t3);case 60:return pt.error("Cannot retrieve pipeline details.",e.t3),e.abrupt("return");case 62:if(v=this.props.match.params[gl.pipelineVersionId],e.prev=63,!v){e.next=68;break}return e.next=67,da.pipelineServiceApi.getPipelineVersion(v);case 67:r=e.sent;case 68:e.next=76;break;case 70:return e.prev=70,e.t4=e.catch(63),e.next=74,this.showPageError("Cannot retrieve pipeline version.",e.t4);case 74:return pt.error("Cannot retrieve pipeline version.",e.t4),e.abrupt("return");case 76:if(c=v?r:n.default_version){e.next=84;break}o=n.name,(b=this.props.toolbarProps.actions)[_a.DELETE_RUN].disabled=!0,this.props.updateToolbar({actions:b}),e.next=103;break;case 84:return o=n.name.concat(" (",c.name,")"),e.prev=85,e.next=88,da.pipelineServiceApi.listPipelineVersions("PIPELINE",m,50,void 0,"created_at desc");case 88:if(e.t5=e.sent.versions,e.t5){e.next=91;break}e.t5=[];case 91:l=e.t5,e.next=100;break;case 94:return e.prev=94,e.t6=e.catch(85),e.next=98,this.showPageError("Cannot retrieve pipeline versions.",e.t6);case 98:return pt.error("Cannot retrieve pipeline versions.",e.t6),e.abrupt("return");case 100:return e.next=102,this._getTemplateString(m,v);case 102:a=e.sent;case 103:i=[{displayName:"Pipelines",href:xl.PIPELINES}];case 104:return this.props.updateToolbar({breadcrumbs:i,actions:s,pageTitle:o}),e.t7=this,e.next=108,this._createGraph(a);case 108:e.t8=e.sent,e.t9=n,e.t10=c,e.t11=a,e.t12=l,e.t13={graph:e.t8,pipeline:e.t9,selectedVersion:e.t10,templateString:e.t11,versions:e.t12},e.t7.setStateSafe.call(e.t7,e.t13);case 115:case"end":return e.stop()}}),e,this,[[10,42],[14,27],[16,20],[50,56],[63,70],[85,94]])})));return function(){return e.apply(this,arguments)}}()},{key:"_getTemplateString",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=7;break}return e.next=4,da.pipelineServiceApi.getPipelineVersionTemplate(n);case 4:r=e.sent,e.next=10;break;case 7:return e.next=9,da.pipelineServiceApi.getTemplate(t);case 9:r=e.sent;case 10:return e.abrupt("return",r.template||"");case 13:return e.prev=13,e.t0=e.catch(0),e.next=17,this.showPageError("Cannot retrieve pipeline template.",e.t0);case 17:pt.error("Cannot retrieve pipeline details.",e.t0);case 18:return e.abrupt("return","");case 19:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_createGraph",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return e.prev=1,n=Ro.safeLoad(t),e.abrupt("return",Io(n));case 6:return e.prev=6,e.t0=e.catch(1),e.next=10,this.showPageError("Error: failed to generate Pipeline graph.",e.t0);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_createVersionUrl",value:function(){return this.state.selectedVersion.code_source_url}},{key:"_deleteCallback",value:function(e,t){if(t){var n=this.props.toolbarProps.breadcrumbs,r=n.length?n[n.length-1].href:xl.PIPELINES;this.props.history.push(r)}}}]),n}(Ft),Jo=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._tableRef=c.createRef(),r._nameCustomRenderer=function(e){return r.props.pipelineId?c.createElement(Ut.a,{className:Fe.link,onClick:function(e){return e.stopPropagation()},to:xl.PIPELINE_DETAILS.replace(":"+gl.pipelineId,r.props.pipelineId).replace(":"+gl.pipelineVersionId,e.id)},e.value):c.createElement(Ut.a,{className:Fe.link,onClick:function(e){return e.stopPropagation()},to:xl.PIPELINE_DETAILS.replace(":"+gl.pipelineVersionId,e.id)},e.value)},r.state={pipelineVersions:[]},r}return Object(i.a)(n,[{key:"render",value:function(){var e=[{customRenderer:this._nameCustomRenderer,flex:2,label:"\u7248\u672c\u540d\u79f0",sortKey:ca.NAME},{label:"\u4e0a\u4f20\u65f6\u95f4",flex:1,sortKey:ca.CREATED_AT}],t=this.state.pipelineVersions.map((function(e){return{id:e.id,otherFields:[e.name,ht(e.created_at)]}}));return c.createElement("div",null,c.createElement(ct,{columns:e,rows:t,selectedIds:this.props.selectedIds,initialSortColumn:ca.CREATED_AT,ref:this._tableRef,updateSelection:this.props.onSelectionChange,reload:this._loadPipelineVersions.bind(this),disablePaging:this.props.disablePaging,disableSorting:this.props.disableSorting,disableSelection:this.props.disableSelection,noFilterBox:this.props.noFilterBox,emptyMessage:"\u65e0\u6570\u636e."}))}},{key:"_loadPipelineVersions",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!this.props.pipelineId){e.next=18;break}return e.prev=2,e.next=5,da.pipelineServiceApi.listPipelineVersions("PIPELINE",this.props.pipelineId,t.pageSize,t.pageToken,t.sortBy);case 5:n=e.sent,e.next=17;break;case 8:return e.prev=8,e.t0=e.catch(2),e.t1=Error,e.next=13,ft(e.t0);case 13:return e.t2=e.sent,r=new e.t1(e.t2),this.props.onError("Error: failed to fetch runs.",r),e.abrupt("return","");case 17:this.setState({pipelineVersions:n.versions||[]});case 18:return e.abrupt("return",n&&n.next_page_token||"");case 19:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(c.PureComponent),Yo=function(e){return c.createElement(yo,{description:e.value||"",forceInline:!0})},$o=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e))._tableRef=c.createRef(),r._nameCustomRenderer=function(e){return c.createElement($e.a,{title:e.value||"",enterDelay:300,placement:"top-start"},c.createElement(Ut.a,{onClick:function(e){return e.stopPropagation()},className:Fe.link,to:xl.PIPELINE_DETAILS_NO_VERSION.replace(":"+gl.pipelineId,e.id)},e.value||""))},r.state={displayPipelines:[],selectedIds:[],uploadDialogOpen:!1,selectedVersionIds:{}},r}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){var e=this;return{actions:new Wa(this.props,this.refresh.bind(this)).newPipelineVersion("\u4e0a\u4f20 pipeline").refresh(this.refresh.bind(this)).deletePipelinesAndPipelineVersions((function(){return e.state.selectedIds}),(function(){return e.state.selectedVersionIds}),(function(t,n){return e._selectionChanged(t,n)}),!1).getToolbarActionMap(),breadcrumbs:[],pageTitle:"Pipelines \u5de5\u4f5c\u6d41"}}},{key:"render",value:function(){var e=[{customRenderer:this._nameCustomRenderer,flex:1,label:"Pipeline \u5de5\u4f5c\u6d41\u540d\u79f0 ",sortKey:ia.NAME},{label:"\u63cf\u8ff0",flex:3,customRenderer:Yo},{label:"\u4e0a\u4f20\u65f6\u95f4",sortKey:ia.CREATED_AT,flex:1}],t=this.state.displayPipelines.map((function(e){return{expandState:e.expandState,id:e.id,otherFields:[e.name,e.description,ht(e.created_at)]}}));return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"))},c.createElement(ct,{ref:this._tableRef,columns:e,rows:t,initialSortColumn:ia.CREATED_AT,updateSelection:this._selectionChanged.bind(this,void 0),selectedIds:this.state.selectedIds,reload:this._reload.bind(this),toggleExpansion:this._toggleRowExpand.bind(this),getExpandComponent:this._getExpandedPipelineComponent.bind(this),filterLabel:"\u8fc7\u6ee4 pipelines",emptyMessage:"\u65e0\u6570\u636e"}),c.createElement(mo,{open:this.state.uploadDialogOpen,onClose:this._uploadDialogClosed.bind(this)}))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._tableRef.current){e.next=3;break}return e.next=3,this._tableRef.current.reload();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_toggleRowExpand",value:function(e){var t=Object(gs.a)(this.state.displayPipelines,(function(t){t[e].expandState=t[e].expandState===it.COLLAPSED?it.EXPANDED:it.COLLAPSED}));this.setState({displayPipelines:t})}},{key:"_getExpandedPipelineComponent",value:function(e){var t=this.state.displayPipelines[e];return(c.createElement(Jo,Object.assign({pipelineId:t.id,onError:function(){return null}},this.props,{selectedIds:this.state.selectedVersionIds[t.id]||[],noFilterBox:!0,onSelectionChange:this._selectionChanged.bind(this,t.id),disableSorting:!1,disablePaging:!1})))}},{key:"_reload",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,da.pipelineServiceApi.listPipelines(t.pageToken,t.pageSize,t.sortBy,t.filter);case 4:n=e.sent,(n.pipelines||[]).forEach((function(e){return e.expandState=it.COLLAPSED})),this.clearBanner(),e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,this.showPageError("\u64cd\u4f5c\u5931\u8d25: \u8fde\u63a5pipeline\u5931\u8d25.",e.t0);case 14:return this.setStateSafe({displayPipelines:n&&n.pipelines||[]}),e.abrupt("return",n&&n.next_page_token||"");case 16:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_selectionChanged",value:function(e,t){if(e){this.setStateSafe({selectedVersionIds:Object(Dt.a)({},this.state.selectedVersionIds,{},Object(qt.a)({},e,t))});var n=this.props.toolbarProps.actions;n[_a.DELETE_RUN].disabled=this.state.selectedIds.length<1&&t.length<1,this.props.updateToolbar({actions:n})}else{this.setStateSafe({selectedIds:t});var r=this._deepCountDictionary(this.state.selectedVersionIds),a=this.props.toolbarProps.actions;a[_a.DELETE_RUN].disabled=t.length<1&&r<1,this.props.updateToolbar({actions:a})}}},{key:"_uploadDialogClosed",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r,a,i,s){var o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&(i!==oo.LOCAL||r)&&(i!==oo.URL||a)){e.next=3;break}return this.setStateSafe({uploadDialogOpen:!1}),e.abrupt("return",!1);case 3:if(e.prev=3,i!==oo.LOCAL){e.next=9;break}return e.next=7,da.uploadPipeline(n,s||"",r);case 7:e.next=11;break;case 9:return e.next=11,da.pipelineServiceApi.createPipeline({name:n,url:{pipeline_url:a}});case 11:return this.setStateSafe({uploadDialogOpen:!1}),this.refresh(),e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(3),e.next=20,ft(e.t0);case 20:return o=e.sent,this.showErrorDialog("\u4e0a\u4f20pipeline\u5931\u8d25",o),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,this,[[3,16]])})));return function(t,n,r,a,i,s){return e.apply(this,arguments)}}()},{key:"_deepCountDictionary",value:function(e){return Object.keys(e).reduce((function(t,n){return t+e[n].length}),0)}}]),n}(Ft),Qo=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={run:null},r}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){var e=this;return{actions:new Wa(this.props,this.refresh.bind(this)).cloneRecurringRun((function(){return e.state.run?[e.state.run.id]:[]}),!0).refresh(this.refresh.bind(this)).enableRecurringRun((function(){return e.state.run?e.state.run.id:""})).disableRecurringRun((function(){return e.state.run?e.state.run.id:""})).delete((function(){return e.state.run?[e.state.run.id]:[]}),"recurring run config",this._deleteCallback.bind(this),!0).getToolbarActionMap(),breadcrumbs:[],pageTitle:""}}},{key:"render",value:function(){var e,t,n=this.state.run,r=[],a=[],i=[];return n&&n.pipeline_spec&&(r=[["Description",n.description],["Created at",ht(n.created_at)]],a=(n.pipeline_spec.parameters||[]).map((function(e){return[e.name||"",e.value||""]})),n.trigger&&(i=[["Enabled",(e=n.trigger,t=n.enabled,e?t?"Yes":"No":"-")],["Trigger",so(n.trigger)]],n.max_concurrency&&i.push(["Max. concurrent runs",n.max_concurrency]),i.push(["Catchup","".concat(!n.no_catchup)]),n.trigger.cron_schedule&&n.trigger.cron_schedule.start_time?i.push(["Start time",ht(n.trigger.cron_schedule.start_time)]):n.trigger.periodic_schedule&&n.trigger.periodic_schedule.start_time&&i.push(["Start time",ht(n.trigger.periodic_schedule.start_time)]),n.trigger.cron_schedule&&n.trigger.cron_schedule.end_time?i.push(["End time",ht(n.trigger.cron_schedule.end_time)]):n.trigger.periodic_schedule&&n.trigger.periodic_schedule.end_time&&i.push(["End time",ht(n.trigger.periodic_schedule.end_time)]))),c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"))},n&&c.createElement("div",{className:Fe.page},c.createElement(Wo,{title:"Recurring run details",fields:r}),!!i.length&&c.createElement(Wo,{title:"Run trigger",fields:i}),!!a.length&&c.createElement(Wo,{title:"Run parameters",fields:a})))}},{key:"componentDidMount",value:function(){return this.load()}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a,i,s,o,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearBanner(),t=this.props.match.params[gl.runId],e.prev=2,e.next=5,da.jobServiceApi.getJob(t);case 5:n=e.sent,e.next=16;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,ft(e.t0);case 12:return r=e.sent,e.next=15,this.showPageError("Error: failed to retrieve recurring run: ".concat(t,"."),new Error(r));case 15:return e.abrupt("return");case 16:if(!(a=gi.getFirstExperimentReferenceId(n))){e.next=31;break}return e.prev=18,e.next=21,da.experimentServiceApi.getExperiment(a);case 21:i=e.sent,e.next=31;break;case 24:return e.prev=24,e.t1=e.catch(18),e.next=28,ft(e.t1);case 28:return s=e.sent,e.next=31,this.showPageError("Error: failed to retrieve this recurring run's experiment.",new Error(s),"warning");case 31:o=[],i?o.push({displayName:"Experiments",href:xl.EXPERIMENTS},{displayName:i.name,href:xl.EXPERIMENT_DETAILS.replace(":"+gl.experimentId,i.id)}):o.push({displayName:"All runs",href:xl.RUNS}),c=n?n.name:t,(l=this.props.toolbarProps.actions)[_a.ENABLE_RECURRING_RUN].disabled=!!n.enabled,l[_a.DISABLE_RECURRING_RUN].disabled=!n.enabled,this.props.updateToolbar({actions:l,breadcrumbs:o,pageTitle:c}),this.setState({run:n});case 39:case"end":return e.stop()}}),e,this,[[2,8],[18,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"_deleteCallback",value:function(e,t){if(t){var n=this.props.toolbarProps.breadcrumbs,r=n.length?n[n.length-1].href:xl.EXPERIMENTS;this.props.history.push(r)}}}]),n}(Ft),Zo=l.a.createContext({}),ec=function(e){var t=Object(c.useState)({}),n=Object(d.a)(t,2),r=n[0],a=n[1];return Object(c.useEffect)((function(){da.getClusterName().then((function(e){return a((function(t){return Object(Dt.a)({},t,{clusterName:e})}))})).catch((function(e){return pt.warn(dt(e,"Failed getting GKE cluster name"))})),da.getProjectId().then((function(e){return a((function(t){return Object(Dt.a)({},t,{projectId:e})}))})).catch((function(e){return pt.warn(dt(e,"Failed getting GKE project ID"))}))}),[]),l.a.createElement(Zo.Provider,Object.assign({value:r},e))},tc=n(310),nc=Object(W.stylesheet)({a:{$nest:{"&:hover":{color:"#bcdeff"},"&:visited":{color:"#bc9fff"}},color:"#96cbfe"},line:{$nest:{"&:hover":{backgroundColor:"#333"}},display:"flex"},number:{color:"#999",flex:"40px 0 0",paddingRight:10,textAlign:"right",userSelect:"none"},root:{backgroundColor:"#222",color:"#fff",fontFamily:Ae,fontSize:Se,overflow:"auto !important",whiteSpace:"pre"}}),rc={overflow:"visible"},ac=function(e){e.direction;var t=e.cellCount,n=(e.scrollDirection,e.overscanCellsCount),r=e.startIndex,a=e.stopIndex;return{overscanStartIndex:Math.max(0,r-n),overscanStopIndex:Math.min(t-1,a+n)}},ic=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={followNewLogs:!0},e._rootRef=c.createRef(),e.handleScroll=function(t){var n=t.scrollHeight-t.scrollTop-t.clientHeight<=20;n!==e.state.followNewLogs&&e.setState({followNewLogs:n})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e._scrollToEnd()}))}},{key:"componentDidUpdate",value:function(){this.state.followNewLogs&&this._scrollToEnd()}},{key:"render",value:function(){var e=this;return(c.createElement(tc.a,null,(function(t){var n=t.height,r=t.width;return(c.createElement(tc.b,{id:"logViewer",containerStyle:rc,width:r,height:n,rowCount:e.props.logLines.length,rowHeight:15,className:nc.root,ref:e._rootRef,overscanIndicesGetter:ac,overscanRowCount:400,rowRenderer:e._rowRenderer.bind(e),onScroll:e.handleScroll}))})))}},{key:"_scrollToEnd",value:function(){var e=this._rootRef.current;e&&e.scrollToRow(this.props.logLines.length+1)}},{key:"_rowRenderer",value:function(e){var t=e.style,n=e.key,r=e.index,a=this.props.logLines[r];return c.createElement("div",{key:n,className:nc.line,style:t},c.createElement(sc,{index:r,line:a}))}}]),n}(c.Component),sc=c.memo((function(e){var t=e.index,n=e.line;return(c.createElement(c.Fragment,null,c.createElement("span",{className:nc.number,style:oc(n)},t+1),c.createElement("span",{className:nc.line,style:oc(n)},function(e){var t=/(\b(https?):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,n=0,r=t.exec(e),a=[];for(;r;)a.push(c.createElement("span",null,e.substr(n,r.index))),a.push(c.createElement("a",{href:r[0],target:"_blank",rel:"noopener noreferrer",className:nc.a},r[0])),n=r.index+r[0].length,r=t.exec(e);return a.push(c.createElement("span",null,e.substr(n))),a}(n).map((function(e,t){return c.createElement("span",{key:t},e)})))))}));function oc(e){var t=e.toLowerCase();return t.indexOf("error")>-1||t.indexOf("fail")>-1?{backgroundColor:"#700000",color:"white"}:t.indexOf("warn")>-1?{backgroundColor:"#545400",color:"white"}:{}}var cc=ic;function lc(e,t){return uc.apply(this,arguments)}function uc(){return(uc=Object(h.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,da.getPodInfo(t,n);case 2:return r=e.sent,e.abrupt("return",Ro.safeDump(vc(r),{skipInvalid:!0}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pc=function(e){var t=e.name,n=e.namespace;return(l.a.createElement(mc,{name:t,namespace:n,errorMessage:"Failed to retrieve pod info. Possible reasons include cluster autoscaling, pod preemption or pod cleaned up by time to live configuration",getYaml:lc}))};function dc(e,t){return hc.apply(this,arguments)}function hc(){return(hc=Object(h.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,da.getPodEvents(t,n);case 2:return r=e.sent,e.abrupt("return",Ro.safeDump(r,{skipInvalid:!0}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fc=function(e){var t=e.name,n=e.namespace;return(l.a.createElement(mc,{name:t,namespace:n,errorMessage:"Failed to retrieve pod events. Possible reasons include cluster autoscaling, pod preemption or pod cleaned up by time to live configuration",getYaml:dc}))},mc=function(e){var t=e.name,n=e.namespace,r=e.getYaml,a=e.errorMessage,i=l.a.useState(void 0),s=Object(d.a)(i,2),o=s[0],c=s[1],u=l.a.useState(void 0),f=Object(d.a)(u,2),m=f[0],v=f[1],b=l.a.useState(0),g=Object(d.a)(b,2),E=g[0],y=g[1];return l.a.useEffect((function(){var e=!1;function i(){return(i=Object(h.a)(p.a.mark((function i(){var s;return p.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c(void 0),v(void 0),i.prev=2,i.next=5,r(t,n);case 5:s=i.sent,e||c(s),i.next=19;break;case 9:if(i.prev=9,i.t0=i.catch(2),e){i.next=19;break}return i.t1=v,i.t2=a,i.next=16,Et(i.t0);case 16:i.t3=i.sent,i.t4={message:i.t2,additionalInfo:i.t3},(0,i.t1)(i.t4);case 19:case"end":return i.stop()}}),i,null,[[2,9]])})))).apply(this,arguments)}return function(){i.apply(this,arguments)}(),function(){e=!0}}),[t,n,E,r,a]),l.a.createElement(l.a.Fragment,null,m&&l.a.createElement(Nn,{message:m.message,mode:"warning",additionalInfo:m.additionalInfo,refresh:function(){return y((function(e){return e+1}))}}),!m&&o&&l.a.createElement(Pa,{value:o||"",height:"100%",width:"100%",mode:"yaml",theme:"github",editorProps:{$blockScrolling:!0},readOnly:!0,highlightActiveLine:!0,showGutter:!0}))};function vc(e){var t=Object(Dt.a)({},e);return e.spec&&(delete t.spec,t.spec=e.spec),t}var bc=Object(W.stylesheet)({root:{width:"100%"},preview:{maxHeight:250,overflowY:"auto",padding:3,backgroundColor:re}});function gc(){return(gc=Object(h.a)(p.a.mark((function e(t,n,r,a){var i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,da.readFile(t,n,r+1);case 2:if(!((i=e.sent).length<=r)||a){e.next=5;break}return e.abrupt("return",i);case 5:return i=i.slice(0,r),a&&(i=i.split("\n").slice(0,a).join("\n").trim()),e.abrupt("return","".concat(i,"\n..."));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ec,yc=function(e){var t=e.value,n=e.namespace,r=e.maxbytes,a=void 0===r?255:r,i=e.maxlines,s=c.useState(void 0),o=Object(d.a)(s,2),l=o[0],u=o[1],p=function(e){if(e&&"string"!==typeof e){var t=e.key,n=e.bucket,r=e.endpoint;if(n&&t)return{source:di(r)?ci.S3:ci.MINIO,bucket:n,key:t}}}(t);if(c.useEffect((function(){var e=!1;return p&&function(e,t,n,r){return gc.apply(this,arguments)}(p,n,a,i).then((function(t){return!e&&u(t)}),(function(e){return console.error(e)})),function(){e=!0}}),[p,n,a,i]),!p)return null===t||void 0===t||"object"===typeof t?null:c.createElement(c.Fragment,null,"".concat(t));var h=da.buildArtifactUrl(p),f=da.buildReadFileUrl(p,n);return c.createElement("div",{className:bc.root},c.createElement(ho,{href:f,title:h},h),l&&c.createElement("div",{className:bc.preview},c.createElement("small",null,c.createElement("pre",null,l))))};!function(e){e[e.INPUT_OUTPUT=0]="INPUT_OUTPUT",e[e.VISUALIZATIONS=1]="VISUALIZATIONS",e[e.ML_METADATA=2]="ML_METADATA",e[e.VOLUMES=3]="VOLUMES",e[e.LOGS=4]="LOGS",e[e.POD=5]="POD",e[e.EVENTS=6]="EVENTS",e[e.MANIFEST=7]="MANIFEST"}(Ec||(Ec={}));var xc,wc=Object(W.stylesheet)({footer:{background:ee,display:"flex",padding:"0 0 20px 20px"},graphPane:{backgroundColor:ee,overflow:"hidden",position:"relative"},infoSpan:{color:ae,fontFamily:Le,fontSize:Se,letterSpacing:"0.21px",lineHeight:"24px",paddingLeft:6},link:{color:"#77abda"},outputTitle:{color:oe,fontSize:Ie,fontWeight:"bold",paddingLeft:20}}),Oc=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={allArtifactConfigs:[],allowCustomVisualizations:!1,generatedVisualizations:[],isGeneratingVisualization:!1,logsBannerAdditionalInfo:"",logsBannerMessage:"",logsBannerMode:"error",runFinished:!1,selectedNodeDetails:null,selectedTab:0,sidepanelBannerMode:"warning",sidepanelBusy:!1,sidepanelSelectedTab:Ec.INPUT_OUTPUT,mlmdRunContext:void 0,mlmdExecutions:void 0},e.AUTO_REFRESH_INTERVAL=5e3,e._interval=void 0,e.onBlurHandler=function(){e._stopAutoRefresh()},e.onFocusHandler=Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._startAutoRefresh();case 2:case"end":return t.stop()}}),t)}))),e.handleError=function(){var t=Object(h.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.showPageError(Et(n),n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){var e=this,t=new Wa(this.props,this.refresh.bind(this)),n=this.props.match.params[gl.runId];return{actions:t.retryRun((function(){return e.state.runMetadata?[e.state.runMetadata.id]:n?[n]:[]}),!0,(function(){return e.retry()})).cloneRun((function(){return e.state.runMetadata?[e.state.runMetadata.id]:n?[n]:[]}),!0).terminateRun((function(){return e.state.runMetadata?[e.state.runMetadata.id]:n?[n]:[]}),!0,(function(){return e.refresh()})).getToolbarActionMap(),breadcrumbs:[{displayName:"Experiments",href:xl.EXPERIMENTS}],pageTitle:this.props.runId}}},{key:"render",value:function(){var e,t,n,a,i,s,o,l=this,u=this.state,p=u.allArtifactConfigs,d=u.allowCustomVisualizations,h=u.graph,f=u.isGeneratingVisualization,m=u.runFinished,v=u.runMetadata,b=u.selectedTab,g=u.sidepanelBannerMode,E=u.selectedNodeDetails,y=u.sidepanelSelectedTab,x=u.workflow,w=u.mlmdExecutions,O=this.props.gkeMetadata,k=O.projectId,N=O.clusterName,S=(null===E||void 0===E?void 0:E.id)||"",R=null===x||void 0===x?void 0:null===(e=x.metadata)||void 0===e?void 0:e.namespace,_="";k&&N&&E&&E.id&&(_="https://console.cloud.google.com/logs/viewer?project=".concat(k,'&interval=NO_LIMIT&advancedFilter=resource.type%3D"k8s_container"%0Aresource.labels.cluster_name:"').concat(N,'"%0Aresource.labels.pod_name:"').concat(E.id,'"'));var C=hi.getParameters(x),I=hi.getNodeInputOutputParams(x,S),P=I.inputParams,j=I.outputParams,T=hi.getNodeInputOutputArtifacts(x,S),D=T.inputArtifacts,L=T.outputArtifacts,M=null===w||void 0===w?void 0:w.find((function(e){return Zi(e)===S})),U=v&&v.metrics&&v.metrics.length>0,F={allowCustomVisualizations:d,isBusy:f,onGenerate:function(e,t,n){l._onGenerate(e,t,n,R||"")},type:an.VISUALIZATION_CREATOR,collapsedInitially:!0};return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"t"))},!!x&&c.createElement("div",{className:Fe.page},c.createElement($t,{selectedTab:b,tabs:["Graph","Run output","Config"],onSwitch:function(e){return l.setStateSafe({selectedTab:e})}}),c.createElement("div",{className:Fe.page},0===b&&c.createElement("div",{className:Object(W.classes)(Fe.page,wc.graphPane)},h&&c.createElement("div",{className:Fe.page},c.createElement(Do,{graph:h,selectedNodeId:S,onClick:function(e){return l._selectNode(e)},onError:function(e,t){return l.props.updateBanner({message:e,additionalInfo:t,mode:"error"})}}),c.createElement(zo,{isBusy:this.state.sidepanelBusy,isOpen:!!E,onClose:function(){return l.setStateSafe({selectedNodeDetails:null})},title:S},!!E&&c.createElement(c.Fragment,null,!!E.phaseMessage&&c.createElement(Nn,{mode:g,message:E.phaseMessage}),c.createElement("div",{className:Fe.page},c.createElement($t,{tabs:["Input/Output","Visualizations","ML Metadata","Volumes","Logs","Pod","Events"].concat(Object(Kn.a)(hi.getNodeManifest(x,S).length>0?["Manifest"]:[])),selectedTab:y,onSwitch:this._loadSidePaneTab.bind(this)}),c.createElement("div",{"data-testid":"run-details-node-details",className:Fe.page},y===Ec.VISUALIZATIONS&&this.state.selectedNodeDetails&&this.state.workflow&&c.createElement(Sc,{execution:M,nodeId:S,nodeStatus:this.state.workflow&&this.state.workflow.status?this.state.workflow.status.nodes[this.state.selectedNodeDetails.id]:void 0,namespace:null===(t=this.state.workflow)||void 0===t?void 0:null===(n=t.metadata)||void 0===n?void 0:n.namespace,visualizationCreatorConfig:F,generatedVisualizations:this.state.generatedVisualizations.filter((function(e){return e.nodeId===E.id})),onError:this.handleError}),y===Ec.INPUT_OUTPUT&&c.createElement("div",{className:Ve(20)},c.createElement(Wo,{key:"input-parameters-".concat(S),title:"Input parameters",fields:P}),c.createElement(Wo,{key:"input-artifacts-".concat(S),title:"Input artifacts",fields:D,valueComponent:yc,valueComponentProps:{namespace:null===(a=this.state.workflow)||void 0===a?void 0:null===(i=a.metadata)||void 0===i?void 0:i.namespace}}),c.createElement(Wo,{key:"output-parameters-".concat(S),title:"Output parameters",fields:j}),c.createElement(Wo,{key:"output-artifacts-".concat(S),title:"Output artifacts",fields:L,valueComponent:yc,valueComponentProps:{namespace:null===(s=this.state.workflow)||void 0===s?void 0:null===(o=s.metadata)||void 0===o?void 0:o.namespace}})),y===Ec.ML_METADATA&&c.createElement("div",{className:Ve(20)},M&&c.createElement(c.Fragment,null,c.createElement("div",null,"This step corresponds to execution"," ",c.createElement(Ut.a,{className:Fe.link,to:wl.executionDetails(M.getId())},'"',$i(M),'".')),c.createElement(ns,{key:M.getId(),id:M.getId(),onError:function(e){console.warn(e)},onTitleUpdate:function(){return null}})),!M&&c.createElement("div",null,"Corresponding ML Metadata not found.")),y===Ec.VOLUMES&&c.createElement("div",{className:Ve(20)},c.createElement(Wo,{title:"Volume Mounts",fields:hi.getNodeVolumeMounts(x,S)})),y===Ec.MANIFEST&&c.createElement("div",{className:Ve(20)},c.createElement(Wo,{title:"Resource Manifest",fields:hi.getNodeManifest(x,S)})),y===Ec.POD&&E.phase!==r.SKIPPED&&c.createElement("div",{className:Fe.page},S&&R&&c.createElement(pc,{name:S,namespace:R})),y===Ec.EVENTS&&E.phase!==r.SKIPPED&&c.createElement("div",{className:Fe.page},S&&R&&c.createElement(fc,{name:S,namespace:R})),y===Ec.LOGS&&E.phase!==r.SKIPPED&&c.createElement("div",{className:Fe.page},this.state.logsBannerMessage&&c.createElement(c.Fragment,null,c.createElement(Nn,{message:this.state.logsBannerMessage,mode:this.state.logsBannerMode,additionalInfo:this.state.logsBannerAdditionalInfo,showTroubleshootingGuideLink:!1,refresh:this._loadSelectedNodeLogs.bind(this)})),_&&c.createElement("div",{className:Ve(12)},"Logs can also be viewed in"," ",c.createElement("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:Object(W.classes)(wc.link,Fe.unstyled)},"Stackdriver Kubernetes Monitoring"),"."),!this.state.logsBannerMessage&&this.state.selectedNodeDetails&&c.createElement("div",{className:Fe.pageOverflowHidden},c.createElement(cc,{logLines:(this.state.selectedNodeDetails.logs||"").split("\n")}))))))),c.createElement("div",{className:wc.footer},c.createElement("div",{className:Fe.flex},c.createElement(Mo.a,{className:Fe.infoIcon}),c.createElement("span",{className:wc.infoSpan},"Runtime execution graph. Only steps that are currently running or have already completed are shown.")))),!h&&c.createElement("div",null,m&&c.createElement("span",{style:{margin:"40px auto"}},"No graph to show"),!m&&c.createElement(A.a,{size:30,className:Fe.absoluteCenter}))),1===b&&c.createElement("div",{className:Ve()},U&&c.createElement("div",null,c.createElement("div",{className:wc.outputTitle},"Metrics"),c.createElement("div",{className:Ve(20,"lt")},c.createElement(Ln,yi.singleRunToMetricsCompareProps(v,x)))),!U&&c.createElement("span",null,"No metrics found for this run."),c.createElement(Ge,{orientation:"vertical"}),c.createElement(Cn,null),p.map((function(e,t){return c.createElement("div",{key:t},c.createElement(La,{key:t,configs:[e.config],title:e.stepName,maxDimension:400}),c.createElement(Ge,{orientation:"vertical"}),c.createElement(Cn,null))})),!p.length&&c.createElement("span",null,"No output artifacts found for this run.")),2===b&&c.createElement("div",{className:Ve()},c.createElement(Wo,{title:"Run details",fields:this._getDetailsFields(x,v)}),C&&!!C.length&&c.createElement("div",null,c.createElement(Wo,{title:"Run parameters",fields:C.map((function(e){return[e.name,e.value||""]}))}))))))}},{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("focus",this.onFocusHandler),window.addEventListener("blur",this.onBlurHandler),e.next=4,this._startAutoRefresh();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._stopAutoRefresh(),window.removeEventListener("focus",this.onFocusHandler),window.removeEventListener("blur",this.onBlurHandler),this.clearBanner()}},{key:"retry",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,this.setStateSafe({runFinished:!1}),e.next=4,this._startAutoRefresh();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,a,i,s,o,l,u,d,h,f,m,v,b,g,E,y,w,O=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.clearBanner(),t=this.props.match.params[gl.runId],e.prev=2,e.next=5,da.areCustomVisualizationsAllowed();case 5:n=e.sent,this.setState({allowCustomVisualizations:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.showPageError("Error: Unable to enable custom visualizations.",e.t0);case 12:return e.prev=12,e.next=15,da.runServiceApi.getRun(t);case 15:if(i=e.sent,!(s=gi.getFirstExperimentReferenceId(i.run))){e.next=21;break}return e.next=20,da.experimentServiceApi.getExperiment(s);case 20:o=e.sent;case 21:if(l=i.run,u=this.state.runFinished,x(l.status)&&(this._stopAutoRefresh(),u=!0),d=JSON.parse(i.pipeline_runtime.workflow_manifest||"{}"),(h=hi.getWorkflowError(d))&&("terminated"===h?this.props.updateBanner({additionalInfo:"This run's workflow included the following message: ".concat(h),message:"This run was terminated",mode:"warning",refresh:void 0}):this.showPageError("Error: found errors when executing run: ".concat(t,"."),new Error(h))),!(null===(a=d.metadata)||void 0===a?void 0:a.name)){e.next=49;break}return e.prev=28,e.prev=29,e.next=32,Ki(d.metadata.name);case 32:f=e.sent,e.next=41;break;case 35:return e.prev=35,e.t1=e.catch(29),pt.warn("Cannot find tfx run context (this is expected for non tfx runs)",e.t1),e.next=40,qi(d.metadata.name);case 40:f=e.sent;case 41:return e.next=43,Gi(f);case 43:m=e.sent,e.next=49;break;case 46:e.prev=46,e.t2=e.catch(28),pt.warn(e.t2);case 49:v=d&&d.status&&d.status.nodes?hi.createRuntimeGraph(d):void 0,b=[],l.storage_state===Kr.ARCHIVED?b.push({displayName:"Archive",href:xl.ARCHIVED_RUNS}):o?b.push({displayName:"Experiments",href:xl.EXPERIMENTS},{displayName:o.name,href:xl.EXPERIMENT_DETAILS.replace(":"+gl.experimentId,o.id)}):b.push({displayName:"All runs",href:xl.RUNS}),g=c.createElement("div",{className:Fe.flex},oi(l.status,i.run.created_at),c.createElement("span",{style:{marginLeft:10}},l.name)),E=new Wa(this.props,this.refresh.bind(this),this.getInitialToolbarState().actions),y=function(){return l?[l.id]:[]},l.storage_state===Kr.ARCHIVED?E.restore("run",y,!0,(function(){return O.refresh()})):E.archive("run",y,!0,(function(){return O.refresh()})),(w=E.getToolbarActionMap())[_a.TERMINATE_RUN].disabled=l.status===r.TERMINATING||u,w[_a.RETRY].disabled=l.status!==r.FAILED&&l.status!==r.ERROR,this.props.updateToolbar({actions:w,breadcrumbs:b,pageTitle:g,pageTitleTooltip:l.name}),this.setStateSafe({experiment:o,graph:v,runFinished:u,runMetadata:l,workflow:d,mlmdRunContext:f,mlmdExecutions:m}),e.next=68;break;case 63:return e.prev=63,e.t3=e.catch(12),e.next=67,this.showPageError("Error: failed to retrieve run: ".concat(t,"."),e.t3);case 67:pt.error("Error loading run:",t,e.t3);case 68:return e.next=70,this._loadSidePaneTab(this.state.sidepanelSelectedTab);case 70:return e.next=72,this._loadAllOutputs();case 72:case"end":return e.stop()}}),e,this,[[2,9],[12,63],[28,46],[29,35]])})));return function(){return e.apply(this,arguments)}}()},{key:"_startAutoRefresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.runFinished){e.next=3;break}return e.next=3,this.refresh();case 3:this.state.runFinished||void 0!==this._interval||(this._interval=setInterval((function(){return t.refresh()}),this.AUTO_REFRESH_INTERVAL));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_stopAutoRefresh",value:function(){void 0!==this._interval&&(clearInterval(this._interval),this._interval=void 0)}},{key:"_loadAllOutputs",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.workflow){e.next=3;break}return e.abrupt("return");case 3:return n=hi.loadAllOutputPathsWithStepNames(t),e.next=6,Promise.all(n.map((function(e){var n,r=e.stepName,a=e.path;return wi.load(a,null===t||void 0===t?void 0:null===(n=t.metadata)||void 0===n?void 0:n.namespace).then((function(e){return e.map((function(e){return{config:e,stepName:r}}))}))})));case 6:r=e.sent,a=Object(f.flatten)(r),this.setStateSafe({allArtifactConfigs:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getDetailsFields",value:function(e,t){return e.status?[["Status",e.status.phase],["Description",t?t.description:""],["Created at",e.metadata?ht(e.metadata.creationTimestamp):"-"],["Started at",ht(e.status.startedAt)],["Finished at",ht(e.status.finishedAt)],["Duration",bt(e)]]:[]}},{key:"_selectNode",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setStateSafe({selectedNodeDetails:{id:t}},Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._loadSidePaneTab(n.state.sidepanelSelectedTab);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadSidePaneTab",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,a,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.workflow,a=this.state.selectedNodeDetails,i="warning",!(n&&n.status&&n.status.nodes&&a)){e.next=25;break}if(!(s=n.status.nodes[a.id])){e.next=15;break}a.phaseMessage=s&&s.message?"This step is in ".concat(s.phase," state with this message: ")+s.message:void 0,a.phase=s.phase,e.t0=s.phase,e.next=e.t0===r.ERROR?11:e.t0===r.FAILED?11:13;break;case 11:return i="error",e.abrupt("break",15);case 13:return i="info",e.abrupt("break",15);case 15:this.setStateSafe({selectedNodeDetails:a,sidepanelSelectedTab:t,sidepanelBannerMode:i}),e.t1=t,e.next=e.t1===Ec.LOGS?19:25;break;case 19:if(s.phase===r.PENDING||s.phase===r.SKIPPED){e.next=24;break}return e.next=22,this._loadSelectedNodeLogs();case 22:e.next=25;break;case 24:this.setStateSafe({logsBannerAdditionalInfo:"",logsBannerMessage:""});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_loadSelectedNodeLogs",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a,i,s,o,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.state.selectedNodeDetails,a=null===(t=this.state.workflow)||void 0===t?void 0:null===(n=t.metadata)||void 0===n?void 0:n.namespace,r&&a){e.next=4;break}return e.abrupt("return");case 4:return this.setStateSafe({sidepanelBusy:!0}),i="",s="",o="",e.prev=8,e.next=11,da.getPodLogs(r.id,a);case 11:r.logs=e.sent,e.next=22;break;case 14:return e.prev=14,e.t0=e.catch(8),e.next=18,ft(e.t0);case 18:c=e.sent,i="Failed to retrieve pod logs.","pod not found"===c?(i+=this.props.gkeMetadata.projectId?" Use Stackdriver Kubernetes Monitoring to view them.":"",o="info",s="Possible reasons include pod garbage collection, cluster autoscaling and pod preemption. "):o="error",s+="Error response: "+c;case 22:this.setStateSafe({sidepanelBusy:!1,logsBannerAdditionalInfo:s,logsBannerMessage:i,logsBannerMode:o,selectedNodeDetails:r});case 23:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"_onGenerate",value:function(){var e=Object(h.a)(p.a.mark((function e(t,n,r,a){var i,s,o,c,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(i=this.state.selectedNodeDetails?this.state.selectedNodeDetails.id:"").length){e.next=4;break}return this.showPageError("Unable to generate visualization, no component selected."),e.abrupt("return");case 4:if(!t.length){e.next=13;break}e.prev=5,JSON.parse(t),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(5),this.showPageError("Unable to generate visualization, invalid JSON provided.",e.t0),e.abrupt("return");case 13:return this.setState({isGeneratingVisualization:!0}),s={arguments:t,source:n,type:r},e.prev=15,e.next=18,da.buildPythonVisualizationConfig(s,a);case 18:o=e.sent,c=this.state.generatedVisualizations,l={config:o,nodeId:i},c.push(l),this.setState({generatedVisualizations:c}),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(15),this.showPageError("Unable to generate visualization, an unexpected error was encountered.",e.t1);case 28:return e.prev=28,this.setState({isGeneratingVisualization:!1}),e.finish(28);case 31:case"end":return e.stop()}}),e,this,[[5,9],[15,25,28,31]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()}]),n}(Ft),kc=function(e){var t=e.value,n=e.onComplete,r=c.useState(0),a=Object(d.a)(r,2),i=a[0],s=a[1];return c.useEffect((function(){var e;return e=setInterval((function(){i>=100?(clearInterval(e),setTimeout(n,400)):t>=100?s((function(e){return Math.min(e+6,100)})):i<t?s((function(e){var n=Math.max(Math.min((t-e)/6,.01),.2);return e<t?Math.min(t,e+n):e})):i>t&&s(t)}),16.6),function(){clearInterval(e)}}),[t,i,n]),c.createElement(A.a,{variant:"determinate",size:60,thickness:3,className:Fe.absoluteCenter,value:i})},Nc=["Succeeded","Failed","Error"],Sc=function(e){var t=e.visualizationCreatorConfig,n=e.generatedVisualizations,r=e.execution,a=e.nodeId,i=e.nodeStatus,s=e.namespace,o=e.onError,l=c.useState(!1),u=Object(d.a)(l,2),f=u[0],m=u[1],v=c.useCallback((function(){return m(!0)}),[m]),b=c.useState(0),g=Object(d.a)(b,2),E=g[0],y=g[1],x=c.useState([]),w=Object(d.a)(x,2),O=w[0],k=w[1],N=!!i&&Nc.includes(i.phase);return c.useEffect((function(){var e=!1;function t(){return(t=Object(h.a)(p.a.mark((function t(){var n,a,c,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:if(m(!1),y(0),k([]),i&&N){t.next=8;break}return y(100),t.abrupt("return");case 8:return n=hi.loadNodeOutputPaths(i),a=function(t){e||y(t)},c=function(e){return o(e),[]},t.next=13,Promise.all([].concat(Object(Kn.a)(r?[wi.buildTFXArtifactViewerConfig({reportProgress:a,execution:r,namespace:s||""}).catch(c)]:[]),Object(Kn.a)(n.map((function(e){return wi.load(e,s).catch(c)})))));case 13:if(l=t.sent.flatMap((function(e){return e})),!e){t.next=16;break}return t.abrupt("return");case 16:return k(l),y(100),t.abrupt("return");case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}();return function(){e=!0}}),[a,null===r||void 0===r?void 0:r.getId(),N,o,s]),c.createElement("div",{className:Fe.page},f?c.createElement(c.Fragment,null,O.length+n.length===0&&c.createElement(Nn,{message:"There are no visualizations in this step.",mode:"info"}),[].concat(Object(Kn.a)(O),Object(Kn.a)(n.map((function(e){return e.config})))).map((function(e,t){var n=Ta[e.type].prototype.getDisplayName();return(c.createElement("div",{key:t,className:Ve(20,"lrt")},c.createElement(La,{configs:[e],title:n,maxDimension:500}),c.createElement(Cn,null)))})),c.createElement("div",{className:Ve(20,"lrt")},c.createElement(La,{configs:[t],title:ja.prototype.getDisplayName(),maxDimension:500}),c.createElement(Cn,null)),c.createElement("div",{className:Ve(20)},c.createElement("p",null,"Add visualizations to your own components following instructions in"," ",c.createElement(ho,{href:"https://www.kubeflow.org/docs/pipelines/sdk/output-viewer/"},"Visualize Results in the Pipelines UI"),"."))):c.createElement(kc,{value:E,onComplete:v}))},Rc=function(e){var t=It(),n=c.useContext(Zo);return t?c.createElement(Rn.a,{to:xl.EXPERIMENTS}):c.createElement(Oc,Object.assign({},e,{gkeMetadata:n}))},_c=n(465),Cc=n.n(_c),Ic=n(462),Pc=n.n(Ic),jc=n(464),Tc=n.n(jc),Ac=n(461),Dc=n.n(Ac),Lc=n(309),Mc=n.n(Lc),Uc=n(463),Fc=n.n(Uc),Vc=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return c.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 12",xmlns:"http://www.w3.org/2000/svg"},c.createElement("g",{id:"Symbols",fill:"none",fillRule:"evenodd"},c.createElement("g",{transform:"translate(-26 -72)"},c.createElement("g",{transform:"translate(0 12)"},c.createElement("g",{transform:"translate(0 44)"},c.createElement("g",{id:"Group-3"},c.createElement("g",{transform:"translate(26 12)"},c.createElement("polygon",{points:"0 0 20 0 20 20 0 20"}),c.createElement("path",{d:"M15,5.83333333 L13.825,4.65833333 L8.54166667,9.94166667\r L9.71666667,11.1166667 L15,5.83333333 Z M18.5333333,4.65833333\r L9.71666667,13.475 L6.23333333,10 L5.05833333,11.175 L9.71666667,15.8333333\r L19.7166667,5.83333333 L18.5333333,4.65833333 Z M0.341666667,11.175\r L5,15.8333333 L6.175,14.6583333 L1.525,10 L0.341666667,11.175 Z",fill:this.props.color,fillRule:"nonzero"}))))))))}}]),n}(c.Component),Bc=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return c.createElement("svg",{width:"20px",height:"20px",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"},c.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},c.createElement("g",{transform:"translate(-2.000000, -4.000000)"},c.createElement("polygon",{id:"Shape",points:"0 0 24 0 24 24 0 24"}),c.createElement("path",{d:"M12.7244079,9.74960425 L17.4807112,9.74960425 C17.7675226,9.74960425\r 18,9.51894323 18,9.23437272 L18,4.51523153 C18,4.23066102 17.7675226,4\r 17.4807112,4 L12.7244079,4 C12.4375965,4 12.2051191,4.23066102\r 12.2051191,4.51523153 L12.2051191,6.06125154 L9.98218019,6.06125154\r C9.52936032,6.06125154 9.16225043,6.42549311 9.16225043,6.87477501\r L9.16225043,11.2135669 L7.05995053,11.2135669 C6.71661861,10.189612\r 5.74374462,9.45093267 4.59644424,9.45093267 C3.16249641,9.45093267\r 2,10.6043462 2,12.0270903 C2,13.4498886 3.16249641,14.603248\r 4.59644424,14.603248 C5.74379928,14.603248 6.71661861,13.8645687\r 7.06000519,12.8406138 L9.16225043,12.8406138 L9.16225043,17.1794057\r C9.16225043,17.6286875 9.52936032,17.9929291 9.98218019,17.9929291\r L12.2051191,17.9929291 L12.2051191,19.4847685 C12.2051191,19.769339\r 12.4375965,20 12.7244079,20 L17.4807112,20 C17.7675226,20 18,19.769339\r 18,19.4847685 L18,14.7656273 C18,14.4810568 17.7675226,14.2503957\r 17.4807112,14.2503957 L12.7244079,14.2503957 C12.4375965,14.2503957\r 12.2051191,14.4810568 12.2051191,14.7656273 L12.2051191,16.3658822\r L10.80211,16.3658822 L10.80211,7.68829848 L12.2051191,7.68829848\r L12.2051191,9.23437272 C12.2051191,9.51894323 12.4375965,9.74960425\r 12.7244079,9.74960425 Z",id:"Path",fill:this.props.color}))))}}]),n}(c.Component);!function(e){e.KUBEFLOW="KUBEFLOW",e.MARKETPLACE="MARKETPLACE"}(xc||(xc={}));var zc,Kc=window&&window.KFP_FLAGS?window.KFP_FLAGS.DEPLOYMENT===xc.KUBEFLOW?xc.KUBEFLOW:window.KFP_FLAGS.DEPLOYMENT===xc.MARKETPLACE?xc.MARKETPLACE:void 0:void 0;!function(e){e.navbarCollapsed="navbarCollapsed"}(zc||(zc={}));var Wc,qc=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"hasKey",value:function(e){return void 0!==localStorage.getItem(e)}},{key:"isNavbarCollapsed",value:function(){return"true"===localStorage.getItem(zc.navbarCollapsed)}},{key:"saveNavbarCollapsed",value:function(e){localStorage.setItem(zc.navbarCollapsed,e.toString())}}]),e}(),Hc="#f8fafb",Gc="#0d6de7",Xc="#9aa0a6",Jc="#f1f3f4",Yc="#bdc1c6",$c="#e8eaed",Qc=Object(W.stylesheet)({active:{color:Gc+" !important"},button:{$nest:{"&::hover":{backgroundColor:Jc}},borderRadius:0,color:Xc,display:"block",fontSize:_e,fontWeight:"bold",height:44,marginBottom:16,maxWidth:220,overflow:"hidden",padding:"12px 10px 10px 26px",textAlign:"left",textTransform:"none",transition:"max-width 0.3s",whiteSpace:"nowrap",width:220},chevron:{color:Xc,marginLeft:16,padding:6,transition:"transform 0.3s"},collapsedButton:{maxWidth:72,minWidth:72,padding:"12px 10px 10px 26px"},collapsedChevron:{transform:"rotate(180deg)"},collapsedExternalLabel:{height:0,opacity:0},collapsedLabel:{opacity:0},collapsedRoot:{width:"".concat(72,"px !important")},collapsedSeparator:{margin:"20px !important"},envMetadata:{color:Xc,marginBottom:16,marginLeft:30},icon:{height:20,width:20},iconImage:{opacity:.6},indicator:{borderBottom:"3px solid transparent",borderLeft:"3px solid ".concat(Gc),borderTop:"3px solid transparent",height:38,left:0,position:"absolute",zIndex:1},indicatorHidden:{opacity:0},infoHidden:{opacity:0,transition:"opacity 0s",transitionDelay:"0s",overflow:"hidden",height:0},infoVisible:{opacity:"initial",transition:"opacity 0.2s",transitionDelay:"0.3s",overflow:"hidden"},label:{fontSize:Re,letterSpacing:.25,marginLeft:20,transition:"opacity 0.3s",verticalAlign:"super"},link:{color:"#77abda"},openInNewTabIcon:{height:12,marginBottom:8,marginLeft:5,width:12},root:{background:Hc,borderRight:"1px ".concat($c," solid"),paddingTop:15,transition:"width 0.3s",width:220},separator:{border:"0px none transparent",borderTop:"1px solid ".concat(Yc),margin:20}}),Zc=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;Object(a.a)(this,n),(r=t.call(this,e))._isMounted=!0,r._AUTO_COLLAPSE_WIDTH=800,r._HUB_ADDRESS="/hub/";var i=qc.isNavbarCollapsed();return r.state={collapsed:i,jupyterHubAvailable:!1,manualCollapseState:qc.hasKey(zc.navbarCollapsed)},r}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return(n=Object(h.a)(p.a.mark((function e(){var t,n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,da.getBuildInfo();case 2:return t=e.sent,n=t.apiServerCommitHash||t.frontendCommitHash||"",r=t.apiServerTagName||t.frontendTagName||"",e.abrupt("return",{tagName:r||"unknown",commitHash:n?n.substring(0,7):"unknown",commitUrl:"https://www.github.com/kubeflow/pipelines"+(n&&"unknown"!==n?"/commit/".concat(n):""),date:t.buildDate?new Date(t.buildDate).toLocaleDateString("en-US"):"unknown"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t=function(){return n.apply(this,arguments)},window.addEventListener("resize",this._maybeResize.bind(this)),this._maybeResize(),e.next=6,t().catch((function(e){pt.error("Failed to retrieve build info",e)}));case 6:r=e.sent,this.setStateSafe({displayBuildInfo:r});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props.page,t=this.state,n=t.collapsed,r=t.displayBuildInfo,a=this.props.gkeMetadata,i={active:Gc,inactive:Xc};return c.createElement("div",{id:"sideNav",className:Object(W.classes)(Qc.root,Fe.flexColumn,Fe.noShrink,n&&Qc.collapsedRoot)},c.createElement("div",{style:{flexGrow:1}},Kc===xc.MARKETPLACE&&c.createElement(c.Fragment,null,c.createElement("div",{className:Object(W.classes)(Qc.indicator,!e.startsWith(xl.START)&&Qc.indicatorHidden)}),c.createElement($e.a,{title:"\u5f00\u59cb",enterDelay:300,placement:"right-start",disableFocusListener:!n,disableHoverListener:!n,disableTouchListener:!n},c.createElement(Ut.a,{id:"gettingStartedBtn",to:xl.START,className:Fe.unstyled},c.createElement(Jt.a,{className:Object(W.classes)(Qc.button,e.startsWith(xl.START)&&Qc.active,n&&Qc.collapsedButton)},c.createElement(Dc.a,{style:{width:20,height:20}}),c.createElement("span",{className:Object(W.classes)(n&&Qc.collapsedLabel,Qc.label)},"\u5f00\u59cb\u4f7f\u7528"))))),c.createElement("div",{className:Object(W.classes)(Qc.indicator,!e.startsWith(xl.PIPELINES)&&Qc.indicatorHidden)}),c.createElement($e.a,{title:"\u5de5\u4f5c\u6d41",enterDelay:300,placement:"right-start",disableFocusListener:!n,disableHoverListener:!n,disableTouchListener:!n},c.createElement(Ut.a,{id:"pipelinesBtn",to:xl.PIPELINES,className:Fe.unstyled},c.createElement(Jt.a,{className:Object(W.classes)(Qc.button,e.startsWith(xl.PIPELINES)&&Qc.active,n&&Qc.collapsedButton)},c.createElement(Bc,{color:e.startsWith(xl.PIPELINES)?i.active:i.inactive}),c.createElement("span",{className:Object(W.classes)(n&&Qc.collapsedLabel,Qc.label)},"\u5de5\u4f5c\u6d41")))),c.createElement("div",{className:Object(W.classes)(Qc.indicator,!this._highlightExperimentsButton(e)&&Qc.indicatorHidden)}),c.createElement($e.a,{title:"\u5b9e\u9a8c",enterDelay:300,placement:"right-start",disableFocusListener:!n,disableHoverListener:!n,disableTouchListener:!n},c.createElement(Ut.a,{id:"experimentsBtn",to:xl.EXPERIMENTS,className:Fe.unstyled},c.createElement(Jt.a,{className:Object(W.classes)(Qc.button,this._highlightExperimentsButton(e)&&Qc.active,n&&Qc.collapsedButton)},c.createElement(Vc,{color:this._highlightExperimentsButton(e)?i.active:i.inactive}),c.createElement("span",{className:Object(W.classes)(n&&Qc.collapsedLabel,Qc.label)},"\u5b9e\u9a8c")))),c.createElement("div",{className:Object(W.classes)(Qc.indicator,!this._highlightArtifactsButton(e)&&Qc.indicatorHidden)}),c.createElement($e.a,{title:"\u4ea7\u54c1\u5217\u8868",enterDelay:300,placement:"right-start",disableFocusListener:!n,disableHoverListener:!n,disableTouchListener:!n},c.createElement(Ut.a,{id:"artifactsBtn",to:xl.ARTIFACTS,className:Fe.unstyled},c.createElement(Jt.a,{className:Object(W.classes)(Qc.button,this._highlightArtifactsButton(e)&&Qc.active,n&&Qc.collapsedButton)},c.createElement(Pc.a,null),c.createElement("span",{className:Object(W.classes)(n&&Qc.collapsedLabel,Qc.label)},"\u4ea7\u54c1")))),c.createElement("div",{className:Object(W.classes)(Qc.indicator,!this._highlightExecutionsButton(e)&&Qc.indicatorHidden)}),c.createElement($e.a,{title:"\u6267\u884c\u5217\u8868",enterDelay:300,placement:"right-start",disableFocusListener:!n,disableHoverListener:!n,disableTouchListener:!n},c.createElement(Ut.a,{id:"executionsBtn",to:xl.EXECUTIONS,className:Fe.unstyled},c.createElement(Jt.a,{className:Object(W.classes)(Qc.button,this._highlightExecutionsButton(e)&&Qc.active,n&&Qc.collapsedButton)},c.createElement(Fc.a,null),c.createElement("span",{className:Object(W.classes)(n&&Qc.collapsedLabel,Qc.label)},"\u6267\u884c\u5217\u8868")))),this.state.jupyterHubAvailable&&c.createElement($e.a,{title:"\u6253\u5f00 Jupyter Notebook",enterDelay:300,placement:"right-start",disableFocusListener:!n,disableHoverListener:!n,disableTouchListener:!n},c.createElement("a",{id:"jupyterhubBtn",href:this._HUB_ADDRESS,className:Fe.unstyled,target:"_blank",rel:"noopener"},c.createElement(Jt.a,{className:Object(W.classes)(Qc.button,n&&Qc.collapsedButton)},c.createElement(Tc.a,{style:{height:20,width:20}}),c.createElement("span",{className:Object(W.classes)(n&&Qc.collapsedLabel,Qc.label)},"Notebook \u670d\u52a1\u5668"),c.createElement(Mc.a,{className:Qc.openInNewTabIcon})))),c.createElement("hr",{className:Object(W.classes)(Qc.separator,n&&Qc.collapsedSeparator)}),c.createElement("div",{className:Object(W.classes)(Qc.indicator,![xl.ARCHIVED_RUNS,xl.ARCHIVED_EXPERIMENTS].includes(e)&&Qc.indicatorHidden)}),c.createElement($e.a,{title:"\u5b58\u6863",enterDelay:300,placement:"right-start",disableFocusListener:!n,disableHoverListener:!n,disableTouchListener:!n},c.createElement(Ut.a,{id:"archiveBtn",to:xl.ARCHIVED_RUNS,className:Fe.unstyled},c.createElement(Jt.a,{className:Object(W.classes)(Qc.button,(e===xl.ARCHIVED_RUNS||e===xl.ARCHIVED_EXPERIMENTS)&&Qc.active,n&&Qc.collapsedButton)},c.createElement(Cc.a,{style:{height:20,width:20}}),c.createElement("span",{className:Object(W.classes)(n&&Qc.collapsedLabel,Qc.label)},"\u5b58\u6863")))),c.createElement("hr",{className:Object(W.classes)(Qc.separator,n&&Qc.collapsedSeparator)}),c.createElement(U.a,{className:Object(W.classes)(Qc.chevron,n&&Qc.collapsedChevron),onClick:this._toggleNavClicked.bind(this)},c.createElement(I.a,null))),c.createElement("div",{className:n?Qc.infoHidden:Qc.infoVisible},a.clusterName&&a.projectId&&c.createElement($e.a,{title:"Cluster name: ".concat(a.clusterName,", Project ID: ").concat(a.projectId),enterDelay:300,placement:"top-start"},c.createElement("div",{className:Qc.envMetadata},c.createElement("span",null,"Cluster name: "),c.createElement("a",{href:"https://console.cloud.google.com/kubernetes/list?project=".concat(a.projectId,"&filter=name:").concat(a.clusterName),className:Object(W.classes)(Qc.link,Fe.unstyled),rel:"noopener",target:"_blank"},a.clusterName))),r&&c.createElement($e.a,{title:"Build date: ".concat(r.date,", Commit hash: ").concat(r.commitHash),enterDelay:300,placement:"top-start"},c.createElement("div",{className:Qc.envMetadata},c.createElement("span",null,"Version: "),c.createElement("a",{href:r.commitUrl,className:Object(W.classes)(Qc.link,Fe.unstyled),rel:"noopener",target:"_blank"},r.tagName)))))}},{key:"_highlightExperimentsButton",value:function(e){return e.startsWith(xl.EXPERIMENTS)||e.startsWith(xl.RUNS)||e.startsWith(yl.RECURRING_RUN)||e.startsWith(xl.COMPARE)}},{key:"_highlightArtifactsButton",value:function(e){return e.startsWith(yl.ARTIFACT)}},{key:"_highlightExecutionsButton",value:function(e){return e.startsWith(yl.EXECUTION)}},{key:"_toggleNavClicked",value:function(){var e=this;this.setStateSafe({collapsed:!this.state.collapsed,manualCollapseState:!0},(function(){return qc.saveNavbarCollapsed(e.state.collapsed)})),this._toggleNavCollapsed()}},{key:"_toggleNavCollapsed",value:function(e){this.setStateSafe({collapsed:void 0!==e?e:!this.state.collapsed})}},{key:"_maybeResize",value:function(){this.state.manualCollapseState||this._toggleNavCollapsed(window.innerWidth<this._AUTO_COLLAPSE_WIDTH)}},{key:"setStateSafe",value:function(e,t){this._isMounted&&this.setState(e,t)}}]),n}(c.Component),el=function(e){var t=c.useContext(Zo);return(c.createElement(Zc,Object.assign({},e,{gkeMetadata:t})))},tl=n(224),nl=n.n(tl);!function(e){e.LOCAL="local",e.URL="url"}(Wc||(Wc={}));var rl=Object(W.stylesheet)({dropOverlay:{backgroundColor:re,border:"2px dashed #aaa",bottom:0,left:0,padding:"2.5em 0",position:"absolute",right:0,textAlign:"center",top:0,zIndex:xe},errorMessage:{color:"red"},explanation:{fontSize:Se},nonEditableInput:{color:ie},selectorDialog:{maxWidth:1200,minWidth:680,width:"calc(100% - 120px)"}}),al=function(e){return c.createElement(yo,{description:e.value||"",forceInline:!0})},il=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;Object(a.a)(this,n),(r=t.call(this,e))._dropzoneRef=c.createRef(),r._pipelineVersionNameRef=c.createRef(),r._pipelineNameRef=c.createRef(),r._pipelineDescriptionRef=c.createRef(),r.pipelineSelectorColumns=[{label:"Pipeline name",flex:1,sortKey:ia.NAME},{label:"Description",flex:2,customRenderer:al},{label:"Uploaded on",flex:1,sortKey:ia.CREATED_AT}],r.handleChange=function(e){return function(t){var n=t.target.value;if(r.setState(Object(qt.a)({},e,n),r._validate.bind(Object(Lt.a)(r))),"pipelineName"===e){var a=new Date;r.setState({pipelineVersionName:n+"_version_at_"+a.toISOString()},r._validate.bind(Object(Lt.a)(r)))}}};var i=new Ka(e).get(bl.pipelineId);return r.state={codeSourceUrl:"",dropzoneActive:!1,errorMessage:"",file:null,fileName:"",importMethod:Wc.URL,isbeingCreated:!1,newPipeline:!i,packageUrl:"",pipelineDescription:"",pipelineId:"",pipelineName:"",pipelineSelectorOpen:!1,pipelineVersionName:"",validationError:""},r}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){return{actions:{},breadcrumbs:[{displayName:"Pipeline \u7248\u672c",href:xl.NEW_PIPELINE_VERSION}],pageTitle:"\u4e0a\u4f20 Pipeline \u6216\u8005 Pipeline Version"}}},{key:"render",value:function(){var e=this,t=this.state,n=t.packageUrl,r=t.pipelineName,a=t.pipelineVersionName,i=t.isbeingCreated,s=t.validationError,o=t.pipelineSelectorOpen,l=t.unconfirmedSelectedPipeline,u=t.codeSourceUrl,d=t.importMethod,f=t.newPipeline,m=t.pipelineDescription,v=t.fileName,b=t.dropzoneActive,g=new Wa(this.props,this.refresh.bind(this));return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"))},c.createElement("div",{className:Object(W.classes)(Fe.scrollContainer,Ve(20,"lr"))},c.createElement("div",{className:Object(W.classes)(Fe.flex,Ve(10,"b"))},c.createElement(Ls.a,{id:"createNewPipelineBtn",label:"\u65b0\u5efapipeline",checked:!0===f,control:c.createElement(He.a,{color:"primary"}),onChange:function(){return e.setState({codeSourceUrl:"",newPipeline:!0,pipelineDescription:"",pipelineName:"",pipelineVersionName:""})}}),c.createElement(Ls.a,{id:"createPipelineVersionUnderExistingPipelineBtn",label:"\u6839\u636e\u5df2\u6709\u7684pipeline\u521b\u5efa\u65b0\u7684pipeline\u7248\u672c",checked:!1===f,control:c.createElement(He.a,{color:"primary"}),onChange:function(){return e.setState({codeSourceUrl:"",newPipeline:!1,pipelineDescription:"",pipelineName:"",pipelineVersionName:""})}})),!0===f&&c.createElement(c.Fragment,null,c.createElement("div",{className:rl.explanation},"\u4ece\u6307\u5b9a\u6587\u4ef6\u4e0a\u4f20pipeline\u5de5\u4f5c\u6d41"),c.createElement(ze,{id:"newPipelineName",value:r,required:!0,label:"Pipeline \u540d\u79f0",variant:"outlined",inputRef:this._pipelineNameRef,onChange:this.handleChange("pipelineName"),autoFocus:!0}),c.createElement(ze,{id:"pipelineDescription",value:m,required:!0,label:"Pipeline \u63cf\u8ff0",variant:"outlined",inputRef:this._pipelineDescriptionRef,onChange:this.handleChange("pipelineDescription"),autoFocus:!0})),!1===f&&c.createElement(c.Fragment,null,c.createElement("div",{className:rl.explanation},"\u521b\u5efa\u6307\u5b9a\u7684pipeline\u7248\u672c"),c.createElement(ze,{value:r,required:!0,label:"Pipeline",disabled:!0,variant:"outlined",inputRef:this._pipelineNameRef,onChange:this.handleChange("pipelineName"),autoFocus:!0,InputProps:{classes:{disabled:rl.nonEditableInput},endAdornment:c.createElement(Us.a,{position:"end"},c.createElement(Jt.a,{color:"secondary",id:"choosePipelineBtn",onClick:function(){return e.setStateSafe({pipelineSelectorOpen:!0})},style:{padding:"3px 5px",margin:0}},"Choose")),readOnly:!0}}),c.createElement(pn.a,{open:o,classes:{paper:rl.selectorDialog},onClose:function(){return e._pipelineSelectorClosed(!1)},PaperProps:{id:"pipelineSelectorDialog"}},c.createElement(mn.a,null,c.createElement(Ks,Object.assign({},this.props,{title:"\u9009\u62e9 pipeline",filterLabel:"\u8fc7\u6ee4 pipelines",listApi:Object(h.a)(p.a.mark((function e(){var t,n,r=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(t=da.pipelineServiceApi).listPipelines.apply(t,r);case 2:return n=e.sent,e.abrupt("return",{nextPageToken:n.next_page_token||"",resources:n.pipelines||[]});case 4:case"end":return e.stop()}}),e)}))),columns:this.pipelineSelectorColumns,emptyMessage:"\u65e0\u6570\u636e. \u4e0a\u4f20pipeline\u91cd\u8bd5.",initialSortColumn:ia.CREATED_AT,selectionChanged:function(t){return e.setStateSafe({unconfirmedSelectedPipeline:t})},toolbarActionMap:g.upload((function(){return e.setStateSafe({pipelineSelectorOpen:!1})})).getToolbarActionMap()}))),c.createElement(hn.a,null,c.createElement(Jt.a,{id:"cancelPipelineSelectionBtn",onClick:function(){return e._pipelineSelectorClosed(!1)},color:"secondary"},"\u53d6\u6d88"),c.createElement(Jt.a,{id:"usePipelineBtn",onClick:function(){return e._pipelineSelectorClosed(!0)},color:"secondary",disabled:!l},"\u4f7f\u7528\u8be5pipeline"))),c.createElement(ze,{id:"pipelineVersionName",label:"Pipeline \u7248\u672c\u540d\u79f0",inputRef:this._pipelineVersionNameRef,required:!0,onChange:this.handleChange("pipelineVersionName"),value:a,autoFocus:!0,variant:"outlined"})),this.state.importMethod===Wc.LOCAL&&c.createElement(c.Fragment,null,c.createElement("div",{className:Ve(10,"b")},"\u4ece\u672c\u5730\u4e0a\u4f20pipeline\u6587\u4ef6",c.createElement("br",null),"\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u5904"),c.createElement(sl,null)),this.state.importMethod===Wc.URL&&c.createElement(c.Fragment,null,c.createElement("div",{className:Ve(10,"b")},"URL \u5fc5\u987b\u4e3a\u516c\u5f00\u4e14\u80fd\u88ab\u8bbf\u95ee\u5230\u7684\u5730\u5740."),c.createElement(sl,null)),c.createElement("div",{className:Object(W.classes)(Fe.flex,Ve(10,"b"))},c.createElement(Ls.a,{id:"localPackageBtn",label:"\u4e0a\u4f20\u6587\u4ef6",checked:d===Wc.LOCAL,control:c.createElement(He.a,{color:"primary"}),onChange:function(){return e.setState({importMethod:Wc.LOCAL})}}),c.createElement(uo.a,{id:"dropZone",disableClick:!0,onDrop:this._onDrop.bind(this),onDragEnter:this._onDropzoneDragEnter.bind(this),onDragLeave:this._onDropzoneDragLeave.bind(this),style:{position:"relative"},ref:this._dropzoneRef,inputProps:{tabIndex:-1},disabled:d===Wc.URL},b&&c.createElement("div",{className:rl.dropOverlay},"Drop files.."),c.createElement(ze,{onChange:this.handleChange("fileName"),value:v,required:!0,label:"File",variant:"outlined",disabled:d===Wc.URL,InputProps:{endAdornment:c.createElement(Us.a,{position:"end"},c.createElement(Jt.a,{color:"secondary",onClick:function(){return e._dropzoneRef.current.open()},style:{padding:"3px 5px",margin:0,whiteSpace:"nowrap"},disabled:d===Wc.URL},"\u9009\u62e9\u6587\u4ef6")),readOnly:!0,style:{maxWidth:2e3,width:455}}}))),c.createElement("div",{className:Object(W.classes)(Fe.flex,Ve(10,"b"))},c.createElement(Ls.a,{id:"remotePackageBtn",label:"\u901a\u8fc7URL\u5f15\u7528",checked:d===Wc.URL,control:c.createElement(He.a,{color:"primary"}),onChange:function(){return e.setState({importMethod:Wc.URL})}}),c.createElement(ze,{id:"pipelinePackageUrl",label:"\u6587\u4ef6\u5305 Url",multiline:!0,onChange:this.handleChange("packageUrl"),value:n,variant:"outlined",disabled:d===Wc.LOCAL,style:{maxWidth:2e3,width:465}})),c.createElement(ze,{id:"pipelineVersionCodeSource",label:"\u6e90\u7801 (optional)",multiline:!0,onChange:this.handleChange("codeSourceUrl"),value:u,variant:"outlined"}),c.createElement("div",{className:Fe.flex},c.createElement(gr,{id:"createNewPipelineOrVersionBtn",disabled:!!s,busy:i,className:Fe.buttonAction,title:"\u521b\u5efa",onClick:this._create.bind(this)}),c.createElement(Jt.a,{id:"cancelNewPipelineOrVersionBtn",onClick:function(){return e.props.history.push(xl.PIPELINES)}},"\u53d6\u6d88"),c.createElement("div",{className:rl.errorMessage},s))))}},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new Ka(this.props),!(n=t.get(bl.pipelineId))){e.next=9;break}return e.next=5,da.pipelineServiceApi.getPipeline(n);case 5:r=e.sent,this.setState({pipelineId:n,pipelineName:r.name,pipeline:r}),a=new Date,this.setState({pipelineVersionName:r.name+"_version_at_"+a.toISOString()});case 9:this._validate();case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_pipelineSelectorClosed",value:function(){var e=Object(h.a)(p.a.mark((function e(t){var n,r,a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state.pipeline,r=new Date,t&&this.state.unconfirmedSelectedPipeline&&(n=this.state.unconfirmedSelectedPipeline),this.setStateSafe({pipeline:n,pipelineId:n&&n.id||"",pipelineName:n&&n.name||"",pipelineSelectorOpen:!1,pipelineVersionName:n&&n.name+"_version_at_"+r.toISOString()||""},(function(){return a._validate()}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_onDropForTest",value:function(e){this._onDrop(e)}},{key:"_create",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isbeingCreated:!0},Object(h.a)(p.a.mark((function e(){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t.state.newPipeline||t.state.importMethod!==Wc.LOCAL){e.next=7;break}return e.next=4,da.uploadPipeline(t.state.pipelineName,t.state.pipelineDescription,t.state.file);case 4:e.t0=e.sent.default_version,e.next=17;break;case 7:if(!t.state.newPipeline||t.state.importMethod!==Wc.URL){e.next=13;break}return e.next=10,da.pipelineServiceApi.createPipeline({description:t.state.pipelineDescription,name:t.state.pipelineName,url:{pipeline_url:t.state.packageUrl}});case 10:e.t1=e.sent.default_version,e.next=16;break;case 13:return e.next=15,t._createPipelineVersion();case 15:e.t1=e.sent;case 16:e.t0=e.t1;case 17:n=e.t0,t.props.history.push(xl.PIPELINE_DETAILS.replace(":".concat(gl.pipelineId),n.resource_references[0].key.id).replace(":".concat(gl.pipelineVersionId),n.id)),t.props.updateSnackbar({autoHideDuration:1e4,message:"Successfully created new pipeline version: ".concat(n.name),open:!0}),e.next=31;break;case 22:return e.prev=22,e.t2=e.catch(0),e.next=26,ft(e.t2);case 26:return r=e.sent,e.next=29,t.showErrorDialog("Pipeline version creation failed",r);case 29:pt.error("Error creating pipeline version:",e.t2),t.setState({isbeingCreated:!1});case 31:case"end":return e.stop()}}),e,null,[[0,22]])}))));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_createPipelineVersion",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t,n=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(){var e=Object(h.a)(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.state.pipelineId){e.next=4;break}return e.abrupt("return",n.state.pipelineId);case 4:return t={description:n.state.pipelineDescription,name:n.state.pipelineName,url:{pipeline_url:n.state.packageUrl}},e.next=7,da.pipelineServiceApi.createPipeline(t);case 7:return r=e.sent,e.abrupt("return",r.id);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),this.state.importMethod!==Wc.LOCAL){e.next=13;break}if(this.state.file){e.next=4;break}throw new Error("File should be selected");case 4:return e.t0=da,e.t1=this.state.pipelineVersionName,e.next=8,t();case 8:return e.t2=e.sent,e.t3=this.state.file,e.abrupt("return",e.t0.uploadPipelineVersion.call(e.t0,e.t1,e.t2,e.t3));case 13:return e.t4=da.pipelineServiceApi,e.t5=this.state.codeSourceUrl,e.t6=this.state.pipelineVersionName,e.t7={pipeline_url:this.state.packageUrl},e.next=19,t();case 19:return e.t8=e.sent,e.t9=Vr.PIPELINE,e.t10={id:e.t8,type:e.t9},e.t11={key:e.t10,relationship:1},e.t12=[e.t11],e.t13={code_source_url:e.t5,name:e.t6,package_url:e.t7,resource_references:e.t12},e.abrupt("return",e.t4.createPipelineVersion.call(e.t4,e.t13));case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_validate",value:function(){var e=this.state,t=e.fileName,n=e.pipeline,r=e.pipelineVersionName,a=e.packageUrl,i=e.newPipeline;try{if(i){if(!a&&!t)throw new Error("\u5fc5\u987b\u6307\u5b9a\u6587\u4ef6\u5305 url  \u6216\u8005\u9009\u62e9  .yaml, .zip,  .tar.gz \u683c\u5f0f\u7684\u6587\u4ef6")}else{if(!n)throw new Error("Pipeline \u4e0d\u80fd\u4e3a\u7a7a");if(!r)throw new Error("Pipeline \u7248\u672c\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a");if(!a&&!t)throw new Error("\u5fc5\u987b\u6307\u5b9a\u6587\u4ef6\u5305 url  \u6216\u8005\u9009\u62e9  .yaml, .zip,  .tar.gz \u683c\u5f0f\u7684\u6587\u4ef6")}this.setState({validationError:""})}catch(s){this.setState({validationError:s.message})}}},{key:"_onDropzoneDragEnter",value:function(){this.setState({dropzoneActive:!0})}},{key:"_onDropzoneDragLeave",value:function(){this.setState({dropzoneActive:!1})}},{key:"_onDrop",value:function(e){var t=this;this.setStateSafe({dropzoneActive:!1,file:e[0],fileName:e[0].name,pipelineName:this.state.pipelineName||e[0].name.split(".")[0]},(function(){t._validate()}))}}]),n}(Ft),sl=function(){return c.createElement("div",{className:Ve(10,"b")},"\u4e86\u89e3\u66f4\u591a, \u53ef\u70b9\u51fb\u67e5\u770b"," ",c.createElement(ho,{href:"https://www.kubeflow.org/docs/pipelines/sdk/build-component/#compile-the-pipeline"},"Compile Pipeline Documentation"),".")},ol=n(466).slice(0,4),cl=4,ll=3,ul=2,pl=1,dl=0;Object(W.cssRaw)("\n.kfp-start-page li {\n  font-size: 14px;\n  margin-block-start: 0.83em;\n  margin-block-end: 0.83em;\n  margin-left: 2em;\n}\n.kfp-start-page p {\n  font-size: 14px;\n  margin-block-start: 0.83em;\n  margin-block-end: 0.83em;\n}\n.kfp-start-page h2 {\n  font-size: 18px;\n  margin-block-start: 1em;\n  margin-block-end: 1em;\n}\n.kfp-start-page h3 {\n  font-size: 16px;\n  margin-block-start: 1em;\n  margin-block-end: 1em;\n}\n");var hl={overrides:{a:{component:function(e){return e.href&&e.href.startsWith("#")?l.a.createElement("a",Object.assign({},e,{className:po.link})):l.a.createElement(ho,e)}}}},fl=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={links:["","","",""].map(ml)},e}return Object(i.a)(n,[{key:"getInitialToolbarState",value:function(){return{actions:new Wa(this.props,this.refresh.bind(this)).getToolbarActionMap(),breadcrumbs:[],pageTitle:"\u4e00\u9053\u4e91\u4eba\u5de5\u667a\u80fd\u5bb9\u5668\u4e91\u5e73\u53f0"}}},{key:"componentDidMount",value:function(){var e=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(ol.map((function(e){return da.pipelineServiceApi.listPipelines(void 0,10,void 0,vl(e)).then((function(e){var t=e.pipelines;return 1!==(null===t||void 0===t?void 0:t.length)?"":t[0].id||""})).catch((function(){return""}))})));case 2:t=e.sent,this.setState({links:t.map(ml)});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){var e=Object(h.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.componentDidMount();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.createElement("div",{className:Object(W.classes)(Fe.page,Ve(20,"lr"),"kfp-start-page")},c.createElement(Xn.a,{options:hl},function(e){var t=e.control,n=e.data,r=e.tfxKeras,a=e.tfx,i=e.xgboost;return"\n<br/>\n\n## Build your own pipeline with\n\n  * TensorFlow Extended (TFX) [SDK](https://www.tensorflow.org/tfx/guide) with end-to-end ML Pipeline Template ([Open TF 2.1 Notebook](https://console.cloud.google.com/mlengine/notebooks/deploy-notebook?q=download_url%3Dhttps%253A%252F%252Fraw.githubusercontent.com%252Ftensorflow%252Ftfx%252Fmaster%252Fdocs%252Ftutorials%252Ftfx%252Ftemplate.ipynb))\n  * Kubeflow Pipelines [SDK](https://www.kubeflow.org/docs/pipelines/sdk/)\n\n<br/>\n\n## Demonstrations and Tutorials\nThis section contains demo and tutorial pipelines.\n\n**Demos** - Try an end-to-end demonstration pipeline.\n\n  * [TFX pipeline demo with Keras](".concat(r,") - Classification pipeline based on Keras. [source code](https://github.com/kubeflow/pipelines/tree/master/samples/core/iris)\n  * [TFX pipeline demo with Estimator](").concat(a,") - Classification pipeline with model analysis, based on a public BigQuery dataset of taxicab trips. [source code](https://github.com/kubeflow/pipelines/tree/master/samples/core/parameterized_tfx_oss)\n  * [XGBoost Pipeline demo](").concat(i,") - An example of end-to-end distributed training for an XGBoost model. [source code](https://github.com/kubeflow/pipelines/tree/master/samples/core/xgboost_training_cm)\n\n<br/>\n\n**Tutorials** - Learn pipeline concepts by following a tutorial.\n\n  * [Data passing in python components](").concat(n,") - Shows how to pass data between python components. [source code](https://github.com/kubeflow/pipelines/tree/master/samples/tutorials/Data%20passing%20in%20python%20components)\n  * [DSL - Control structures](").concat(t,") - Shows how to use conditional execution and exit handlers. [source code](https://github.com/kubeflow/pipelines/tree/master/samples/tutorials/DSL%20-%20Control%20structures)\n\nWant to learn more? [Learn from sample and tutorial pipelines.](https://www.kubeflow.org/docs/pipelines/tutorials/)\n")}({control:this.state.links[cl],data:this.state.links[ll],tfxKeras:this.state.links[ul],tfx:this.state.links[pl],xgboost:this.state.links[dl]})))}}]),n}(Ft);function ml(e){return e?"#".concat(wl.pipelineDetails(e)):"#/pipelines"}function vl(e){var t={predicates:[{key:"name",op:Be.EQUALS,string_value:e}]};return encodeURIComponent(JSON.stringify(t))}var bl,gl,El=Object(W.stylesheet)({dialog:{minWidth:250}});!function(e){e.cloneFromRun="cloneFromRun",e.cloneFromRecurringRun="cloneFromRecurringRun",e.experimentId="experimentId",e.isRecurring="recurring",e.firstRunInExperiment="firstRunInExperiment",e.pipelineId="pipelineId",e.pipelineVersionId="pipelineVersionId",e.fromRunId="fromRun",e.runlist="runlist",e.view="view"}(bl||(bl={})),function(e){e.experimentId="eid",e.pipelineId="pid",e.pipelineVersionId="vid",e.runId="rid",e.ID="id"}(gl||(gl={}));var yl={ARTIFACT:"/artifact",EXECUTION:"/execution",RECURRING_RUN:"/recurringrun"},xl={ARCHIVED_RUNS:"/archive/runs",ARCHIVED_EXPERIMENTS:"/archive/experiments",ARTIFACTS:"/artifacts",ARTIFACT_DETAILS:"/artifacts/:".concat(gl.ID),COMPARE:"/compare",EXECUTIONS:"/executions",EXECUTION_DETAILS:"/executions/:".concat(gl.ID),EXPERIMENTS:"/experiments",EXPERIMENT_DETAILS:"/experiments/details/:".concat(gl.experimentId),NEW_EXPERIMENT:"/experiments/new",NEW_PIPELINE_VERSION:"/pipeline_versions/new",NEW_RUN:"/runs/new",PIPELINES:"/pipelines",PIPELINE_DETAILS:"/pipelines/details/:".concat(gl.pipelineId,"/version/:").concat(gl.pipelineVersionId,"?"),PIPELINE_DETAILS_NO_VERSION:"/pipelines/details/:".concat(gl.pipelineId,"?"),RECURRING_RUN:"/recurringrun/details/:".concat(gl.runId),RUNS:"/runs",RUN_DETAILS:"/runs/details/:".concat(gl.runId),START:"/start"},wl={artifactDetails:function(e){return xl.ARTIFACT_DETAILS.replace(":".concat(gl.ID),""+e)},executionDetails:function(e){return xl.EXECUTION_DETAILS.replace(":".concat(gl.ID),""+e)},pipelineDetails:function(e){return xl.PIPELINE_DETAILS_NO_VERSION.replace(":".concat(gl.pipelineId),e)}},Ol=Kc===xc.MARKETPLACE?xl.START:xl.PIPELINES,kl=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={bannerProps:{},dialogProps:{open:!1},snackbarProps:{autoHideDuration:5e3,open:!1},toolbarProps:Object(Dt.a)({breadcrumbs:[{displayName:"",href:""}],actions:[]},e)},r}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t={toolbarProps:this.state.toolbarProps,updateBanner:this._updateBanner.bind(this),updateDialog:this._updateDialog.bind(this),updateSnackbar:this._updateSnackbar.bind(this),updateToolbar:this._updateToolbar.bind(this)},n=this.props.route;return c.createElement("div",{className:Object(W.classes)(Fe.page)},c.createElement(Gt.a,{render:function(t){var n=Object.assign({},t);return(c.createElement(ps,Object.assign({},e.state.toolbarProps,n)))}}),this.state.bannerProps.message&&c.createElement(Nn,{message:this.state.bannerProps.message,mode:this.state.bannerProps.mode,additionalInfo:this.state.bannerProps.additionalInfo,refresh:this.state.bannerProps.refresh,showTroubleshootingGuideLink:!0}),c.createElement(Ht.a,null,n&&function(){var e=Object(Dt.a)({},n),r=e.path,a=e.Component,i=Object(F.a)(e,["path","Component"]);return(c.createElement(Gt.a,{exact:!n.notExact,path:r,render:function(e){var n=Object.assign({},e);return(c.createElement(a,Object.assign({},n,t,i)))}}))}(),!!n&&c.createElement(Gt.a,{render:function(e){var n=Object.assign({},e);return(c.createElement(So,Object.assign({},n,t)))}})),c.createElement(nl.a,{autoHideDuration:this.state.snackbarProps.autoHideDuration,message:this.state.snackbarProps.message,open:this.state.snackbarProps.open,onClose:this._handleSnackbarClose.bind(this)}),c.createElement(pn.a,{open:!1!==this.state.dialogProps.open,classes:{paper:El.dialog},className:"dialog",onClose:function(){return e._handleDialogClosed()}},this.state.dialogProps.title&&c.createElement(bn.a,null," ",this.state.dialogProps.title),this.state.dialogProps.content&&c.createElement(mn.a,{className:Fe.prewrap},this.state.dialogProps.content),this.state.dialogProps.buttons&&c.createElement(hn.a,null,this.state.dialogProps.buttons.map((function(t,n){return c.createElement(Jt.a,{key:n,onClick:function(){return e._handleDialogClosed(t.onClick)},className:"dialogButton",color:"secondary"},t.text)})))))}},{key:"_updateDialog",value:function(e){void 0===e.open&&(e.open=!0),this.setState({dialogProps:e})}},{key:"_handleDialogClosed",value:function(e){this.setState({dialogProps:{open:!1}}),e&&e(),this.state.dialogProps.onClose&&this.state.dialogProps.onClose()}},{key:"_updateToolbar",value:function(e){var t=Object.assign(this.state.toolbarProps,e);this.setState({toolbarProps:t})}},{key:"_updateBanner",value:function(e){this.setState({bannerProps:e})}},{key:"_updateSnackbar",value:function(e){e.autoHideDuration=e.autoHideDuration||this.state.snackbarProps.autoHideDuration,this.setState({snackbarProps:e})}},{key:"_handleSnackbarClose",value:function(){this.setState({snackbarProps:{open:!1,message:""}})}}]),n}(c.Component),Nl=function(e){var t=e.configs||[{path:xl.START,Component:fl},{Component:Ps,path:xl.ARCHIVED_RUNS,view:xs.RUNS},{Component:Ps,path:xl.ARCHIVED_EXPERIMENTS,view:xs.EXPERIMENTS},{path:xl.ARTIFACTS,Component:Wt},{path:xl.ARTIFACT_DETAILS,Component:ln,notExact:!0},{path:xl.EXECUTIONS,Component:es},{path:xl.EXECUTION_DETAILS,Component:ts},{Component:ws,path:xl.EXPERIMENTS,view:as.EXPERIMENTS},{path:xl.EXPERIMENT_DETAILS,Component:ms},{path:xl.NEW_EXPERIMENT,Component:As},{path:xl.NEW_PIPELINE_VERSION,Component:il},{path:xl.NEW_RUN,Component:No},{path:xl.PIPELINES,Component:$o},{path:xl.PIPELINE_DETAILS,Component:Xo},{path:xl.PIPELINE_DETAILS_NO_VERSION,Component:Xo},{path:xl.RUNS,Component:ws,view:as.RUNS},{path:xl.RECURRING_RUN,Component:Qo},{path:xl.RUN_DETAILS,Component:Rc},{path:xl.COMPARE,Component:Vi}];return c.createElement(Sl,null,c.createElement(Ht.a,null,c.createElement(Gt.a,{exact:!0,path:"/",render:function(e){var t=Object.assign({},e);return(c.createElement(Rn.a,Object.assign({to:Ol},t)))}}),t.map((function(e,t){var n=Object(Dt.a)({},e).path;return(c.createElement(Gt.a,{key:t,exact:!e.notExact,path:n,render:function(t){return c.createElement(kl,{key:t.location.key,route:e})}}))})),c.createElement(Gt.a,null,c.createElement(kl,null))))},Sl=function(e){var t=e.children;return(c.createElement("div",{className:Fe.page},c.createElement("div",{className:Fe.flexGrow},c.createElement(Gt.a,{render:function(e){var t=Object.assign({},e);return(c.createElement(el,Object.assign({page:t.location.pathname},t)))}}),t)))},Rl=n(351);Kc===xc.KUBEFLOW&&function(){try{window.centraldashboard.CentralDashboardEventHandler.init((function(e){e.onNamespaceSelected=function(e){Nt=e,St&&St(Nt)}}))}catch(e){pt.error("Failed to initialize central dashboard client",e)}}(),Object(W.cssRule)("html, body, #root",{background:"white",color:"rgba(0, 0, 0, .66)",display:"flex",fontFamily:De,fontSize:13,height:"100%",width:"100%"});var _l=c.createElement(At.a,{theme:Ue},c.createElement(ec,null,c.createElement(Rl.a,null,c.createElement(Nl,null))));jt.render(Kc===xc.KUBEFLOW?c.createElement(Ct,null,_l):c.createElement(_t.Provider,{value:void 0},_l),document.getElementById("root"))}},[[517,1,2]]]);
//# sourceMappingURL=main.fcf1f27e.chunk.js.map